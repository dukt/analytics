const ot=window.axios,k={getReport(a){return ot.post(Craft.getActionUrl("analytics/reports/report-widget"),{...a},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getReportWidgetSettings(){return ot.get(Craft.getActionUrl("analytics/vue/get-report-widget-settings"),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getElementReport({elementId:a,siteId:t,metric:e}){return ot.post(Craft.getActionUrl("analytics/reports/element"),{elementId:a,siteId:t,metric:e},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getRealtimeReport({viewId:a}){return ot.post(Craft.getActionUrl("analytics/reports/realtime-widget"),{viewId:a},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getEcommerceReport({viewId:a,period:t}){return ot.post(Craft.getActionUrl("analytics/reports/ecommerce-widget"),{viewId:a,period:t},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})}};function S(a,t,e,s,l,c,p,v){var _=typeof a=="function"?a.options:a;t&&(_.render=t,_.staticRenderFns=e,_._compiled=!0),s&&(_.functional=!0),c&&(_._scopeId="data-v-"+c);var b;if(p?(b=function(T){T=T||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!T&&typeof __VUE_SSR_CONTEXT__<"u"&&(T=__VUE_SSR_CONTEXT__),l&&l.call(this,T),T&&T._registeredComponents&&T._registeredComponents.add(p)},_._ssrRegister=b):l&&(b=v?function(){l.call(this,(_.functional?this.parent:this).$root.$options.shadowRoot)}:l),b)if(_.functional){_._injectStyles=b;var q=_.render;_.render=function(U,W){return b.call(W),q(U,W)}}else{var j=_.beforeCreate;_.beforeCreate=j?[].concat(j,b):[b]}return{exports:a,options:_}}google.charts.load("current",{packages:["corechart","table","geochart"],language:Analytics.chartLanguage,mapsApiKey:Analytics.mapsApiKey});const Fr={props:{chartType:{type:String,default:"area"},chartData:{type:[Array,Object],required:!0},chartScale:{type:String,default:null},chartOptions:{type:Object,default:()=>({})}},computed:{isChartTypeSupported(){return this.chartType==="area"||this.chartType==="pie"||this.chartType==="table"||this.chartType==="geo"||this.chartType==="column"}},mounted(){if(!this.isChartTypeSupported)return null;google.charts.setOnLoadCallback(()=>this.drawChart())},created(){window.addEventListener("resize",this.onResize)},destroyed(){window.removeEventListener("resize",this.onResize)},methods:{onResize(){this.drawChart()},drawChart(){switch(this.chartType){case"area":{this.drawAreaChart();break}case"pie":{this.drawPieChart();break}case"table":{this.drawTableChart();break}case"geo":{this.drawGeoChart();break}case"column":{this.drawColumnChart();break}}},drawAreaChart(){const a=new google.visualization.AreaChart(this.$refs.chart),t={...this.chartOptions};t.hAxis.ticks=this.generateAreaTicks();const e=this.formatAreaDataTable(this.chartData);a.draw(e,t)},drawPieChart(){new google.visualization.PieChart(this.$refs.chart).draw(this.chartData,this.chartOptions)},drawTableChart(){new google.visualization.Table(this.$refs.chart).draw(this.chartData,this.chartOptions)},drawGeoChart(){new google.visualization.GeoChart(this.$refs.chart).draw(this.chartData,this.chartOptions)},drawColumnChart(){new google.visualization.ColumnChart(this.$refs.chart).draw(this.chartData,this.chartOptions)},generateAreaTicks(){const a=[];for(let t=0;t<this.chartData.getNumberOfRows();t++){const e=this.chartData.getValue(t,0);a.push(e)}return a},formatAreaDataTable(a){if(this.chartScale==="year"){var t=new google.visualization.DateFormat({pattern:"MMMM yyyy"});t.format(a,0)}return a}}};var Ir=function(){var t=this,e=t._self._c;return e("div",[t.isChartTypeSupported?t._e():[t._v(" Chart type “"+t._s(t.chartType)+"” is not supported. ")],e("div",{ref:"chart",class:{"da-hidden":!t.isChartTypeSupported}})],2)},Mr=[],jr=S(Fr,Ir,Mr,!1,null,null,null,null);const M=jr.exports,Lr=a=>{var t;return $.each(Analytics.continents,function(e,s){a==s.code&&(t=s.label)}),t||a},Er=a=>{var t;return $.each(Analytics.subContinents,function(e,s){a==s.code&&(t=s.label)}),t||a},he={getContinentByCode:Lr,getSubContinentByCode:Er},I=(a,t)=>{var e=new google.visualization.DataTable;return $.each(a.cols,function(s,l){var c;switch(l.type){case"date":c="date";break;case"percent":case"time":case"integer":case"currency":case"float":c="number";break;default:c="string"}e.addColumn({type:c,label:l.label,id:l.id})}),$.each(a.rows,$.proxy(function(s,l){var c=[];$.each(a.cols,$.proxy(function(p,v){switch(v.type){case"date":c[p]=Q(t,v.type,l[p]);break;case"float":c[p]=+l[p];break;case"integer":case"currency":case"percent":case"time":case"continent":case"subContinent":c[p]={v:Nr(t,v.type,l[p]),f:Q(t,v.type,l[p])};break;default:c[p]=l[p]}},this)),e.addRow(c)},globalThis)),e},Nr=(a,t,e)=>{switch(t){case"integer":case"currency":case"percent":case"time":case"float":return+e;default:return e}},Q=(a,t,e)=>{switch(t){case"continent":return he.getContinentByCode(e);case"subContinent":return he.getSubContinentByCode(e);case"currency":return Br(a,+e);case"float":return+e;case"integer":return qr(a,+e);case"time":return zr(+e);case"percent":return Ur(a,+e);case"date":{const s=e;if(s.length==8){let l=parseInt(s.substr(0,4)),c=parseInt(s.substr(4,2))-1,p=parseInt(s.substr(6,2));return new Date(l,c,p)}else if(s.length==6){let l=parseInt(s.substr(0,4)),c=parseInt(s.substr(4,2))-1;return new Date(l,c,"01")}break}default:return e}},Bt=a=>d3.formatLocale(a),Br=(a,t)=>{var e=Bt(a),s=e.format(Craft.charts.BaseChart.defaults.formats.currencyFormat);return s(t)},zr=a=>{var t=parseInt(a,10),e=Math.floor(t/3600),s=Math.floor((t-e*3600)/60),l=t-e*3600-s*60;return e<10&&(e="0"+e),s<10&&(s="0"+s),l<10&&(l="0"+l),e+":"+s+":"+l},qr=(a,t)=>Bt(a).format(",")(t),Ur=(a,t)=>Bt(a).format(Craft.charts.BaseChart.defaults.formats.percentFormat)(t/100),Wr=a=>$.extend(!0,Analytics.d3FormatLocaleDefinition,a),zt=a=>Wr({currency:a});var lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fe(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var wt={exports:{}};wt.exports;(function(a,t){var e=200,s="__lodash_hash_undefined__",l=800,c=16,p=9007199254740991,v="[object Arguments]",_="[object Array]",b="[object AsyncFunction]",q="[object Boolean]",j="[object Date]",T="[object Error]",U="[object Function]",W="[object GeneratorFunction]",Z="[object Map]",ct="[object Number]",Rt="[object Null]",dt="[object Object]",xt="[object Proxy]",St="[object RegExp]",ut="[object Set]",G="[object String]",pt="[object Undefined]",Dt="[object WeakMap]",Tt="[object ArrayBuffer]",r="[object DataView]",d="[object Float32Array]",u="[object Float64Array]",f="[object Int8Array]",y="[object Int16Array]",O="[object Int32Array]",z="[object Uint8Array]",tt="[object Uint8ClampedArray]",P="[object Uint16Array]",D="[object Uint32Array]",et=/[\\^$.*+?()[\]{}|]/g,ht=/^\[object .+?Constructor\]$/,F=/^(?:0|[1-9]\d*)$/,C={};C[d]=C[u]=C[f]=C[y]=C[O]=C[z]=C[tt]=C[P]=C[D]=!0,C[v]=C[_]=C[Tt]=C[q]=C[r]=C[j]=C[T]=C[U]=C[Z]=C[ct]=C[dt]=C[St]=C[ut]=C[G]=C[Dt]=!1;var qt=typeof lt=="object"&&lt&&lt.Object===Object&&lt,be=typeof self=="object"&&self&&self.Object===Object&&self,rt=qt||be||Function("return this")(),Ut=t&&!t.nodeType&&t,nt=Ut&&!0&&a&&!a.nodeType&&a,Wt=nt&&nt.exports===Ut,$t=Wt&&qt.process,Gt=function(){try{var n=nt&&nt.require&&nt.require("util").types;return n||$t&&$t.binding&&$t.binding("util")}catch{}}(),Ht=Gt&&Gt.isTypedArray;function Ce(n,i,o){switch(o.length){case 0:return n.call(i);case 1:return n.call(i,o[0]);case 2:return n.call(i,o[0],o[1]);case 3:return n.call(i,o[0],o[1],o[2])}return n.apply(i,o)}function we(n,i){for(var o=-1,h=Array(n);++o<n;)h[o]=i(o);return h}function Oe(n){return function(i){return n(i)}}function Re(n,i){return n==null?void 0:n[i]}function xe(n,i){return function(o){return n(i(o))}}var Se=Array.prototype,De=Function.prototype,ft=Object.prototype,At=rt["__core-js_shared__"],vt=De.toString,N=ft.hasOwnProperty,Kt=function(){var n=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Xt=ft.toString,Te=vt.call(Object),$e=RegExp("^"+vt.call(N).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_t=Wt?rt.Buffer:void 0,Jt=rt.Symbol,Yt=rt.Uint8Array,Qt=_t?_t.allocUnsafe:void 0,Zt=xe(Object.getPrototypeOf,Object),te=Object.create,Ae=ft.propertyIsEnumerable,Pe=Se.splice,H=Jt?Jt.toStringTag:void 0,gt=function(){try{var n=kt(Object,"defineProperty");return n({},"",{}),n}catch{}}(),Ve=_t?_t.isBuffer:void 0,ee=Math.max,ke=Date.now,re=kt(rt,"Map"),at=kt(Object,"create"),Fe=function(){function n(){}return function(i){if(!X(i))return{};if(te)return te(i);n.prototype=i;var o=new n;return n.prototype=void 0,o}}();function K(n){var i=-1,o=n==null?0:n.length;for(this.clear();++i<o;){var h=n[i];this.set(h[0],h[1])}}function Ie(){this.__data__=at?at(null):{},this.size=0}function Me(n){var i=this.has(n)&&delete this.__data__[n];return this.size-=i?1:0,i}function je(n){var i=this.__data__;if(at){var o=i[n];return o===s?void 0:o}return N.call(i,n)?i[n]:void 0}function Le(n){var i=this.__data__;return at?i[n]!==void 0:N.call(i,n)}function Ee(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=at&&i===void 0?s:i,this}K.prototype.clear=Ie,K.prototype.delete=Me,K.prototype.get=je,K.prototype.has=Le,K.prototype.set=Ee;function B(n){var i=-1,o=n==null?0:n.length;for(this.clear();++i<o;){var h=n[i];this.set(h[0],h[1])}}function Ne(){this.__data__=[],this.size=0}function Be(n){var i=this.__data__,o=mt(i,n);if(o<0)return!1;var h=i.length-1;return o==h?i.pop():Pe.call(i,o,1),--this.size,!0}function ze(n){var i=this.__data__,o=mt(i,n);return o<0?void 0:i[o][1]}function qe(n){return mt(this.__data__,n)>-1}function Ue(n,i){var o=this.__data__,h=mt(o,n);return h<0?(++this.size,o.push([n,i])):o[h][1]=i,this}B.prototype.clear=Ne,B.prototype.delete=Be,B.prototype.get=ze,B.prototype.has=qe,B.prototype.set=Ue;function J(n){var i=-1,o=n==null?0:n.length;for(this.clear();++i<o;){var h=n[i];this.set(h[0],h[1])}}function We(){this.size=0,this.__data__={hash:new K,map:new(re||B),string:new K}}function Ge(n){var i=bt(this,n).delete(n);return this.size-=i?1:0,i}function He(n){return bt(this,n).get(n)}function Ke(n){return bt(this,n).has(n)}function Xe(n,i){var o=bt(this,n),h=o.size;return o.set(n,i),this.size+=o.size==h?0:1,this}J.prototype.clear=We,J.prototype.delete=Ge,J.prototype.get=He,J.prototype.has=Ke,J.prototype.set=Xe;function Y(n){var i=this.__data__=new B(n);this.size=i.size}function Je(){this.__data__=new B,this.size=0}function Ye(n){var i=this.__data__,o=i.delete(n);return this.size=i.size,o}function Qe(n){return this.__data__.get(n)}function Ze(n){return this.__data__.has(n)}function tr(n,i){var o=this.__data__;if(o instanceof B){var h=o.__data__;if(!re||h.length<e-1)return h.push([n,i]),this.size=++o.size,this;o=this.__data__=new J(h)}return o.set(n,i),this.size=o.size,this}Y.prototype.clear=Je,Y.prototype.delete=Ye,Y.prototype.get=Qe,Y.prototype.has=Ze,Y.prototype.set=tr;function er(n,i){var o=Mt(n),h=!o&&It(n),m=!o&&!h&&oe(n),w=!o&&!h&&!m&&ce(n),R=o||h||m||w,g=R?we(n.length,String):[],x=g.length;for(var V in n)(i||N.call(n,V))&&!(R&&(V=="length"||m&&(V=="offset"||V=="parent")||w&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||ie(V,x)))&&g.push(V);return g}function Pt(n,i,o){(o!==void 0&&!Ct(n[i],o)||o===void 0&&!(i in n))&&Vt(n,i,o)}function rr(n,i,o){var h=n[i];(!(N.call(n,i)&&Ct(h,o))||o===void 0&&!(i in n))&&Vt(n,i,o)}function mt(n,i){for(var o=n.length;o--;)if(Ct(n[o][0],i))return o;return-1}function Vt(n,i,o){i=="__proto__"&&gt?gt(n,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[i]=o}var nr=_r();function yt(n){return n==null?n===void 0?pt:Rt:H&&H in Object(n)?gr(n):Or(n)}function ne(n){return it(n)&&yt(n)==v}function ar(n){if(!X(n)||Cr(n))return!1;var i=Lt(n)?$e:ht;return i.test(Dr(n))}function ir(n){return it(n)&&le(n.length)&&!!C[yt(n)]}function sr(n){if(!X(n))return wr(n);var i=se(n),o=[];for(var h in n)h=="constructor"&&(i||!N.call(n,h))||o.push(h);return o}function ae(n,i,o,h,m){n!==i&&nr(i,function(w,R){if(m||(m=new Y),X(w))or(n,i,R,o,ae,h,m);else{var g=h?h(Ft(n,R),w,R+"",n,i,m):void 0;g===void 0&&(g=w),Pt(n,R,g)}},de)}function or(n,i,o,h,m,w,R){var g=Ft(n,o),x=Ft(i,o),V=R.get(x);if(V){Pt(n,o,V);return}var A=w?w(g,x,o+"",n,i,R):void 0,st=A===void 0;if(st){var Et=Mt(x),Nt=!Et&&oe(x),pe=!Et&&!Nt&&ce(x);A=x,Et||Nt||pe?Mt(g)?A=g:Tr(g)?A=hr(g):Nt?(st=!1,A=dr(x,!0)):pe?(st=!1,A=pr(x,!0)):A=[]:$r(x)||It(x)?(A=g,It(g)?A=Ar(g):(!X(g)||Lt(g))&&(A=mr(x))):st=!1}st&&(R.set(x,A),m(A,x,h,w,R),R.delete(x)),Pt(n,o,A)}function lr(n,i){return xr(Rr(n,i,ue),n+"")}var cr=gt?function(n,i){return gt(n,"toString",{configurable:!0,enumerable:!1,value:Vr(i),writable:!0})}:ue;function dr(n,i){if(i)return n.slice();var o=n.length,h=Qt?Qt(o):new n.constructor(o);return n.copy(h),h}function ur(n){var i=new n.constructor(n.byteLength);return new Yt(i).set(new Yt(n)),i}function pr(n,i){var o=i?ur(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.length)}function hr(n,i){var o=-1,h=n.length;for(i||(i=Array(h));++o<h;)i[o]=n[o];return i}function fr(n,i,o,h){var m=!o;o||(o={});for(var w=-1,R=i.length;++w<R;){var g=i[w],x=h?h(o[g],n[g],g,o,n):void 0;x===void 0&&(x=n[g]),m?Vt(o,g,x):rr(o,g,x)}return o}function vr(n){return lr(function(i,o){var h=-1,m=o.length,w=m>1?o[m-1]:void 0,R=m>2?o[2]:void 0;for(w=n.length>3&&typeof w=="function"?(m--,w):void 0,R&&yr(o[0],o[1],R)&&(w=m<3?void 0:w,m=1),i=Object(i);++h<m;){var g=o[h];g&&n(i,g,h,w)}return i})}function _r(n){return function(i,o,h){for(var m=-1,w=Object(i),R=h(i),g=R.length;g--;){var x=R[n?g:++m];if(o(w[x],x,w)===!1)break}return i}}function bt(n,i){var o=n.__data__;return br(i)?o[typeof i=="string"?"string":"hash"]:o.map}function kt(n,i){var o=Re(n,i);return ar(o)?o:void 0}function gr(n){var i=N.call(n,H),o=n[H];try{n[H]=void 0;var h=!0}catch{}var m=Xt.call(n);return h&&(i?n[H]=o:delete n[H]),m}function mr(n){return typeof n.constructor=="function"&&!se(n)?Fe(Zt(n)):{}}function ie(n,i){var o=typeof n;return i=i??p,!!i&&(o=="number"||o!="symbol"&&F.test(n))&&n>-1&&n%1==0&&n<i}function yr(n,i,o){if(!X(o))return!1;var h=typeof i;return(h=="number"?jt(o)&&ie(i,o.length):h=="string"&&i in o)?Ct(o[i],n):!1}function br(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null}function Cr(n){return!!Kt&&Kt in n}function se(n){var i=n&&n.constructor,o=typeof i=="function"&&i.prototype||ft;return n===o}function wr(n){var i=[];if(n!=null)for(var o in Object(n))i.push(o);return i}function Or(n){return Xt.call(n)}function Rr(n,i,o){return i=ee(i===void 0?n.length-1:i,0),function(){for(var h=arguments,m=-1,w=ee(h.length-i,0),R=Array(w);++m<w;)R[m]=h[i+m];m=-1;for(var g=Array(i+1);++m<i;)g[m]=h[m];return g[i]=o(R),Ce(n,this,g)}}function Ft(n,i){if(!(i==="constructor"&&typeof n[i]=="function")&&i!="__proto__")return n[i]}var xr=Sr(cr);function Sr(n){var i=0,o=0;return function(){var h=ke(),m=c-(h-o);if(o=h,m>0){if(++i>=l)return arguments[0]}else i=0;return n.apply(void 0,arguments)}}function Dr(n){if(n!=null){try{return vt.call(n)}catch{}try{return n+""}catch{}}return""}function Ct(n,i){return n===i||n!==n&&i!==i}var It=ne(function(){return arguments}())?ne:function(n){return it(n)&&N.call(n,"callee")&&!Ae.call(n,"callee")},Mt=Array.isArray;function jt(n){return n!=null&&le(n.length)&&!Lt(n)}function Tr(n){return it(n)&&jt(n)}var oe=Ve||kr;function Lt(n){if(!X(n))return!1;var i=yt(n);return i==U||i==W||i==b||i==xt}function le(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=p}function X(n){var i=typeof n;return n!=null&&(i=="object"||i=="function")}function it(n){return n!=null&&typeof n=="object"}function $r(n){if(!it(n)||yt(n)!=dt)return!1;var i=Zt(n);if(i===null)return!0;var o=N.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&vt.call(o)==Te}var ce=Ht?Oe(Ht):ir;function Ar(n){return fr(n,de(n))}function de(n){return jt(n)?er(n,!0):sr(n)}var Pr=vr(function(n,i,o){ae(n,i,o)});function Vr(n){return function(){return n}}function ue(n){return n}function kr(){return!1}a.exports=Pr})(wt,wt.exports);var Gr=wt.exports;const Hr=fe(Gr);class L{constructor(){this.defaults={area:{theme:"maximized",legend:"none",backgroundColor:"transparent",colors:["#058DC7"],areaOpacity:.1,pointSize:7,lineWidth:4,chartArea:{},hAxis:{textPosition:"in",textStyle:{color:"#058DC7"},baselineColor:"#fff",gridlines:{color:"none"}},vAxis:{textPosition:"in",textStyle:{color:"#058DC7"},baselineColor:"#ccc",gridlines:{color:"#fafafa"},minValue:0,maxValue:10,format:"#"}},geo:{displayMode:"auto"},pie:{theme:"maximized",height:282,pieHole:.5,legend:{alignment:"center",position:"top"},chartArea:{top:40,height:"82%"},sliceVisibilityThreshold:1/120},table:{page:"auto",pageSize:10}}}area(t){var e=JSON.parse(JSON.stringify(this.defaults.area));switch(t){case"week":e.hAxis.format="E";break;case"month":e.hAxis.format="MMM d";break;case"year":e.hAxis.format="MMM yy";break}return e}table(){return this.defaults.table}geo(t){var e=this.defaults.geo;switch(t){case"ga:city":e.displayMode="markers";break;case"ga:country":e.resolution="countries",e.displayMode="regions";break;case"ga:continent":e.resolution="continents",e.displayMode="regions";break;case"ga:subContinent":e.resolution="subcontinents",e.displayMode="regions";break}return e}pie(){return this.defaults.pie}field(){var t=JSON.parse(JSON.stringify(this.defaults.area));return Hr(t,{height:120,hAxis:{format:"MMM d"}})}}const Kr={props:{reportResponse:{type:Object,required:!0}}};var Xr=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"da-font-bold"},[t._v(" "+t._s(t.reportResponse.data.metric)+" ")]),e("div",[t._v(t._s(t.reportResponse.data.periodLabel))]),e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(t.reportResponse.data.view)+" ")])])},Jr=[],Yr=S(Kr,Xr,Jr,!1,null,null,null,null);const Ot=Yr.exports,Qr={components:{ReportHeader:Ot,AnalyticsChart:M},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{chartData:null}},computed:{chartOptions(){return new L().area(this.reportResponse.data.period)}},mounted(){this.parseReportResponse()},methods:{parseReportResponse(){this.chartData=I(this.reportResponse.data.chart,this.localeDefinition)}}};var Zr=function(){var t=this,e=t._self._c;return e("div",[e("report-header",{attrs:{"report-response":t.reportResponse}}),e("div",{staticClass:"da-mt-4"},[e("div",[t.chartData?[e("analytics-chart",{staticClass:"-da-mx-[24px] -da-mb-[24px]",attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])],1)},tn=[],en=S(Qr,Zr,tn,!1,null,null,null,null);const rn=en.exports,nn={props:{reportResponse:{type:Object,required:!0}},computed:{counterData(){return!this.reportResponse||!this.reportResponse.data||!this.reportResponse.data.counter?null:this.reportResponse.data.counter}}};var an=function(){var t=this,e=t._self._c;return t.reportResponse.data?e("div",[e("div",{staticClass:"da-text-center"},[e("div",{staticClass:"da-text-7xl"},[t._v(" "+t._s(t.counterData.value)+" ")]),e("div",{staticClass:"da-mt-2"},[e("span",{staticClass:"da-text-blue-600"},[t._v(t._s(t.reportResponse.data.metric))]),t._v(" "+t._s(t.reportResponse.data.periodLabel)+" ")]),e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(t.reportResponse.data.view)+" ")])])]):t._e()},sn=[],on=S(nn,an,sn,!1,null,null,null,null);const ln=on.exports,cn={components:{ReportHeader:Ot,AnalyticsChart:M},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{chartData:null}},computed:{chartOptions(){return new L().pie()}},mounted(){this.chartData=I(this.reportResponse.data.chart,this.localeDefinition)}};var dn=function(){var t=this,e=t._self._c;return e("div",[e("report-header",{attrs:{"report-response":t.reportResponse}}),e("div",{staticClass:"da-mt-4"},[e("div",[t.chartData?[e("analytics-chart",{attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])],1)},un=[],pn=S(cn,dn,un,!1,null,null,null,null);const hn=pn.exports;const fn={components:{ReportHeader:Ot,AnalyticsChart:M},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{chartData:null}},computed:{chartOptions(){return new L().table()}},mounted(){this.chartData=I(this.reportResponse.data.chart,this.localeDefinition)}};var vn=function(){var t=this,e=t._self._c;return e("div",[e("report-header",{attrs:{"report-response":t.reportResponse}}),e("div",{staticClass:"da-mt-4"},[e("div",[t.chartData?[e("analytics-chart",{staticClass:"table-report",attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])],1)},_n=[],gn=S(fn,vn,_n,!1,null,null,null,null);const mn=gn.exports,yn={components:{ReportHeader:Ot,AnalyticsChart:M},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{chartData:null,dimensions:[{label:"ga:city",value:"ga:city"},{label:"ga:country",value:"ga:country"},{label:"ga:continent",value:"ga:continent"},{label:"ga:subContinent",value:"ga:subContinent"}],selectedDimension:"ga:country"}},computed:{chartOptions(){return new L().geo(this.reportResponse.data.dimensionRaw)}},mounted(){this.chartData=I(this.reportResponse.data.chart,this.localeDefinition)}};var bn=function(){var t=this,e=t._self._c;return e("div",[e("report-header",{attrs:{"report-response":t.reportResponse}}),e("div",{staticClass:"da-mt-4"},[e("div",[t.chartData?[e("analytics-chart",{attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])],1)},Cn=[],wn=S(yn,bn,Cn,!1,null,null,null,null);const On=wn.exports,Rn={components:{GeoReport:On,TableReport:mn,PieReport:hn,CounterReport:ln,AreaReport:rn},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},computed:{reportType(){return this.reportResponse?this.reportResponse.data.type:null}}};var xn=function(){var t=this,e=t._self._c;return e("div",[t.reportType==="area"?[e("area-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t.reportType==="counter"?[e("counter-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t.reportType==="pie"?[e("pie-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t.reportType==="table"?[e("table-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t.reportType==="geo"?[e("geo-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t._e()],2)},Sn=[],Dn=S(Rn,xn,Sn,!1,null,null,null,null);const ve=Dn.exports,Tn={components:{AnalyticsReport:ve},props:{requestCriteria:{type:Object,required:!0}},data(){return{debug:!1,loading:!0,reportResponse:null}},watch:{requestCriteria(){this.getReport()}},mounted(){this.getReport()},methods:{getReport(){this.requestCriteria&&(this.loading=!0,k.getReport(this.requestCriteria).then(a=>{this.loading=!1,this.reportResponse=a}))}}};var $n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"da-border da-rounded-md da-p-6"},[t.requestCriteria&&t.requestCriteria.chart?e("div",[e("div",[e("div",{staticClass:"da-font-bold"},[t._v(" "+t._s(t.requestCriteria.options.metric)+" ")]),e("div",[t._v(t._s(t.requestCriteria.period))]),e("div",{staticClass:"da-text-gray-500"},[t._v(" Site Name ")]),e("div",{staticClass:"da-mt-4"},[t.loading?[e("div",[t._v("Loading…")])]:[e("div",[e("analytics-report",{attrs:{"report-response":t.reportResponse}}),t.debug?[e("div",{staticClass:"da-relative da-mt-6"},[e("pre",{staticClass:"da-border da-rounded-md da-bg-gray-100 da-w-96 da-h-96 da-overflow-auto"},[t._v("                  "),e("code",{staticClass:"da-min-w-full da-p-4"},[t._v(t._s(t.reportResponse))]),t._v(`
                `)])])]:t._e()],2)]],2)])]):t._e()])},An=[],Pn=S(Tn,$n,An,!1,null,null,null,null);const _e=Pn.exports;var ge={exports:{}};(function(a,t){(function(e,s){a.exports=s()})(typeof self<"u"?self:lt,function(){return(()=>{var e={646:p=>{p.exports=function(v){if(Array.isArray(v)){for(var _=0,b=new Array(v.length);_<v.length;_++)b[_]=v[_];return b}}},713:p=>{p.exports=function(v,_,b){return _ in v?Object.defineProperty(v,_,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[_]=b,v}},860:p=>{p.exports=function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}},206:p=>{p.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},319:(p,v,_)=>{var b=_(646),q=_(860),j=_(206);p.exports=function(T){return b(T)||q(T)||j()}},8:p=>{function v(_){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p.exports=v=function(b){return typeof b}:p.exports=v=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},v(_)}p.exports=v}},s={};function l(p){var v=s[p];if(v!==void 0)return v.exports;var _=s[p]={exports:{}};return e[p](_,_.exports,l),_.exports}l.n=p=>{var v=p&&p.__esModule?()=>p.default:()=>p;return l.d(v,{a:v}),v},l.d=(p,v)=>{for(var _ in v)l.o(v,_)&&!l.o(p,_)&&Object.defineProperty(p,_,{enumerable:!0,get:v[_]})},l.o=(p,v)=>Object.prototype.hasOwnProperty.call(p,v),l.r=p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})};var c={};return(()=>{l.r(c),l.d(c,{VueSelect:()=>pt,default:()=>Tt,mixins:()=>Dt});var p=l(319),v=l.n(p),_=l(8),b=l.n(_),q=l(713),j=l.n(q);const T={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer:function(){this.autoscroll&&this.maybeAdjustScroll()},open:function(r){var d=this;this.autoscroll&&r&&this.$nextTick(function(){return d.maybeAdjustScroll()})}},methods:{maybeAdjustScroll:function(){var r,d=((r=this.$refs.dropdownMenu)===null||r===void 0?void 0:r.children[this.typeAheadPointer])||!1;if(d){var u=this.getDropdownViewport(),f=d.getBoundingClientRect(),y=f.top,O=f.bottom,z=f.height;if(y<u.top)return this.$refs.dropdownMenu.scrollTop=d.offsetTop;if(O>u.bottom)return this.$refs.dropdownMenu.scrollTop=d.offsetTop-(u.height-z)}},getDropdownViewport:function(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},U={data:function(){return{typeAheadPointer:-1}},watch:{filteredOptions:function(){for(var r=0;r<this.filteredOptions.length;r++)if(this.selectable(this.filteredOptions[r])){this.typeAheadPointer=r;break}},open:function(r){r&&this.typeAheadToLastSelected()},selectedValue:function(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp:function(){for(var r=this.typeAheadPointer-1;r>=0;r--)if(this.selectable(this.filteredOptions[r])){this.typeAheadPointer=r;break}},typeAheadDown:function(){for(var r=this.typeAheadPointer+1;r<this.filteredOptions.length;r++)if(this.selectable(this.filteredOptions[r])){this.typeAheadPointer=r;break}},typeAheadSelect:function(){var r=this.filteredOptions[this.typeAheadPointer];r&&this.selectable(r)&&this.select(r)},typeAheadToLastSelected:function(){var r=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1;r!==-1&&(this.typeAheadPointer=r)}}},W={props:{loading:{type:Boolean,default:!1}},data:function(){return{mutableLoading:!1}},watch:{search:function(){this.$emit("search",this.search,this.toggleLoading)},loading:function(r){this.mutableLoading=r}},methods:{toggleLoading:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.mutableLoading=r??!this.mutableLoading}}};function Z(r,d,u,f,y,O,z,tt){var P,D=typeof r=="function"?r.options:r;if(d&&(D.render=d,D.staticRenderFns=u,D._compiled=!0),f&&(D.functional=!0),O&&(D._scopeId="data-v-"+O),z?(P=function(F){(F=F||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||typeof __VUE_SSR_CONTEXT__>"u"||(F=__VUE_SSR_CONTEXT__),y&&y.call(this,F),F&&F._registeredComponents&&F._registeredComponents.add(z)},D._ssrRegister=P):y&&(P=tt?function(){y.call(this,(D.functional?this.parent:this).$root.$options.shadowRoot)}:y),P)if(D.functional){D._injectStyles=P;var et=D.render;D.render=function(F,C){return P.call(C),et(F,C)}}else{var ht=D.beforeCreate;D.beforeCreate=ht?[].concat(ht,P):[P]}return{exports:r,options:D}}const ct={Deselect:Z({},function(){var r=this.$createElement,d=this._self._c||r;return d("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"}},[d("path",{attrs:{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"}})])},[],!1,null,null,null).exports,OpenIndicator:Z({},function(){var r=this.$createElement,d=this._self._c||r;return d("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"}},[d("path",{attrs:{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"}})])},[],!1,null,null,null).exports},Rt={inserted:function(r,d,u){var f=u.context;if(f.appendToBody){var y=f.$refs.toggle.getBoundingClientRect(),O=y.height,z=y.top,tt=y.left,P=y.width,D=window.scrollX||window.pageXOffset,et=window.scrollY||window.pageYOffset;r.unbindPosition=f.calculatePosition(r,f,{width:P+"px",left:D+tt+"px",top:et+z+O+"px"}),document.body.appendChild(r)}},unbind:function(r,d,u){u.context.appendToBody&&(r.unbindPosition&&typeof r.unbindPosition=="function"&&r.unbindPosition(),r.parentNode&&r.parentNode.removeChild(r))}},dt=function(r){var d={};return Object.keys(r).sort().forEach(function(u){d[u]=r[u]}),JSON.stringify(d)};var xt=0;const St=function(){return++xt};function ut(r,d){var u=Object.keys(r);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(r);d&&(f=f.filter(function(y){return Object.getOwnPropertyDescriptor(r,y).enumerable})),u.push.apply(u,f)}return u}function G(r){for(var d=1;d<arguments.length;d++){var u=arguments[d]!=null?arguments[d]:{};d%2?ut(Object(u),!0).forEach(function(f){j()(r,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):ut(Object(u)).forEach(function(f){Object.defineProperty(r,f,Object.getOwnPropertyDescriptor(u,f))})}return r}const pt=Z({components:G({},ct),directives:{appendToBody:Rt},mixins:[T,U,W],props:{value:{},components:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:function(r){return r}},selectable:{type:Function,default:function(r){return!0}},getOptionLabel:{type:Function,default:function(r){return b()(r)==="object"?r.hasOwnProperty(this.label)?r[this.label]:console.warn('[vue-select warn]: Label key "option.'.concat(this.label,'" does not')+" exist in options object ".concat(JSON.stringify(r),`.
`)+"https://vue-select.org/api/props.html#getoptionlabel"):r}},getOptionKey:{type:Function,default:function(r){if(b()(r)!=="object")return r;try{return r.hasOwnProperty("id")?r.id:dt(r)}catch(d){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,r,d)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default:function(r,d,u){return(d||"").toLocaleLowerCase().indexOf(u.toLocaleLowerCase())>-1}},filter:{type:Function,default:function(r,d){var u=this;return r.filter(function(f){var y=u.getOptionLabel(f);return typeof y=="number"&&(y=y.toString()),u.filterBy(f,y,d)})}},createOption:{type:Function,default:function(r){return b()(this.optionList[0])==="object"?j()({},this.label,r):r}},resetOnOptionsChange:{default:!1,validator:function(r){return["function","boolean"].includes(b()(r))}},clearSearchOnBlur:{type:Function,default:function(r){var d=r.clearSearchOnSelect,u=r.multiple;return d&&!u}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:function(){return[13]}},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:function(r,d){return r}},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default:function(r,d,u){var f=u.width,y=u.top,O=u.left;r.style.top=y,r.style.left=O,r.style.width=f}},dropdownShouldOpen:{type:Function,default:function(r){var d=r.noDrop,u=r.open,f=r.mutableLoading;return!d&&u&&!f}},uid:{type:[String,Number],default:function(){return St()}}},data:function(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[]}},computed:{isTrackingValues:function(){return this.value===void 0||this.$options.propsData.hasOwnProperty("reduce")},selectedValue:function(){var r=this.value;return this.isTrackingValues&&(r=this.$data._value),r!=null&&r!==""?[].concat(r):[]},optionList:function(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl:function(){return this.$scopedSlots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope:function(){var r=this,d={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:G({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":"vs".concat(this.uid,"__combobox"),"aria-controls":"vs".concat(this.uid,"__listbox"),ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":"vs".concat(this.uid,"__option-").concat(this.typeAheadPointer)}:{}),events:{compositionstart:function(){return r.isComposing=!0},compositionend:function(){return r.isComposing=!1},keydown:this.onSearchKeyDown,keypress:this.onSearchKeyPress,blur:this.onSearchBlur,focus:this.onSearchFocus,input:function(u){return r.search=u.target.value}}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:d,listFooter:d,header:G({},d,{deselect:this.deselect}),footer:G({},d,{deselect:this.deselect})}},childComponents:function(){return G({},ct,{},this.components)},stateClasses:function(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching:function(){return!!this.search},dropdownOpen:function(){return this.dropdownShouldOpen(this)},searchPlaceholder:function(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions:function(){var r=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return r;var d=this.search.length?this.filter(r,this.search,this):r;if(this.taggable&&this.search.length){var u=this.createOption(this.search);this.optionExists(u)||d.unshift(u)}return d},isValueEmpty:function(){return this.selectedValue.length===0},showClearButton:function(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options:function(r,d){var u=this;!this.taggable&&(typeof u.resetOnOptionsChange=="function"?u.resetOnOptionsChange(r,d,u.selectedValue):u.resetOnOptionsChange)&&this.clearSelection(),this.value&&this.isTrackingValues&&this.setInternalValueFromOptions(this.value)},value:{immediate:!0,handler:function(r){this.isTrackingValues&&this.setInternalValueFromOptions(r)}},multiple:function(){this.clearSelection()},open:function(r){this.$emit(r?"open":"close")},search:function(r){r.length&&(this.open=!0)}},created:function(){this.mutableLoading=this.loading,this.$on("option:created",this.pushTag)},methods:{setInternalValueFromOptions:function(r){var d=this;Array.isArray(r)?this.$data._value=r.map(function(u){return d.findOptionFromReducedValue(u)}):this.$data._value=this.findOptionFromReducedValue(r)},select:function(r){this.$emit("option:selecting",r),this.isOptionSelected(r)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(r):(this.taggable&&!this.optionExists(r)&&this.$emit("option:created",r),this.multiple&&(r=this.selectedValue.concat(r)),this.updateValue(r),this.$emit("option:selected",r)),this.onAfterSelect(r)},deselect:function(r){var d=this;this.$emit("option:deselecting",r),this.updateValue(this.selectedValue.filter(function(u){return!d.optionComparator(u,r)})),this.$emit("option:deselected",r)},clearSelection:function(){this.updateValue(this.multiple?[]:null)},onAfterSelect:function(r){var d=this;this.closeOnSelect&&(this.open=!this.open),this.clearSearchOnSelect&&(this.search=""),this.noDrop&&this.multiple&&this.$nextTick(function(){return d.$refs.search.focus()})},updateValue:function(r){var d=this;this.value===void 0&&(this.$data._value=r),r!==null&&(r=Array.isArray(r)?r.map(function(u){return d.reduce(u)}):this.reduce(r)),this.$emit("input",r)},toggleDropdown:function(r){var d=r.target!==this.searchEl;d&&r.preventDefault();var u=[].concat(v()(this.$refs.deselectButtons||[]),v()([this.$refs.clearButton]));this.searchEl===void 0||u.filter(Boolean).some(function(f){return f.contains(r.target)||f===r.target})?r.preventDefault():this.open&&d?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected:function(r){var d=this;return this.selectedValue.some(function(u){return d.optionComparator(u,r)})},isOptionDeselectable:function(r){return this.isOptionSelected(r)&&this.deselectFromDropdown},optionComparator:function(r,d){return this.getOptionKey(r)===this.getOptionKey(d)},findOptionFromReducedValue:function(r){var d=this,u=[].concat(v()(this.options),v()(this.pushedTags)).filter(function(f){return JSON.stringify(d.reduce(f))===JSON.stringify(r)});return u.length===1?u[0]:u.find(function(f){return d.optionComparator(f,d.$data._value)})||r},closeSearchOptions:function(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue:function(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){var r=null;this.multiple&&(r=v()(this.selectedValue.slice(0,this.selectedValue.length-1))),this.updateValue(r)}},optionExists:function(r){var d=this;return this.optionList.some(function(u){return d.optionComparator(u,r)})},normalizeOptionForSlot:function(r){return b()(r)==="object"?r:j()({},this.label,r)},pushTag:function(r){this.pushedTags.push(r)},onEscape:function(){this.search.length?this.search="":this.open=!1},onSearchBlur:function(){if(!this.mousedown||this.searching){var r=this.clearSearchOnSelect,d=this.multiple;return this.clearSearchOnBlur({clearSearchOnSelect:r,multiple:d})&&(this.search=""),void this.closeSearchOptions()}this.mousedown=!1,this.search.length!==0||this.options.length!==0||this.closeSearchOptions()},onSearchFocus:function(){this.open=!0,this.$emit("search:focus")},onMousedown:function(){this.mousedown=!0},onMouseUp:function(){this.mousedown=!1},onSearchKeyDown:function(r){var d=this,u=function(O){return O.preventDefault(),!d.isComposing&&d.typeAheadSelect()},f={8:function(O){return d.maybeDeleteValue()},9:function(O){return d.onTab()},27:function(O){return d.onEscape()},38:function(O){if(O.preventDefault(),d.open)return d.typeAheadUp();d.open=!0},40:function(O){if(O.preventDefault(),d.open)return d.typeAheadDown();d.open=!0}};this.selectOnKeyCodes.forEach(function(O){return f[O]=u});var y=this.mapKeydown(f,this);if(typeof y[r.keyCode]=="function")return y[r.keyCode](r)},onSearchKeyPress:function(r){this.open||r.keyCode!==32||(r.preventDefault(),this.open=!0)}}},function(){var r=this,d=r.$createElement,u=r._self._c||d;return u("div",{staticClass:"v-select",class:r.stateClasses,attrs:{dir:r.dir}},[r._t("header",null,null,r.scope.header),r._v(" "),u("div",{ref:"toggle",staticClass:"vs__dropdown-toggle",attrs:{id:"vs"+r.uid+"__combobox",role:"combobox","aria-expanded":r.dropdownOpen.toString(),"aria-owns":"vs"+r.uid+"__listbox","aria-label":"Search for option"},on:{mousedown:function(f){return r.toggleDropdown(f)}}},[u("div",{ref:"selectedOptions",staticClass:"vs__selected-options"},[r._l(r.selectedValue,function(f){return r._t("selected-option-container",[u("span",{key:r.getOptionKey(f),staticClass:"vs__selected"},[r._t("selected-option",[r._v(`
            `+r._s(r.getOptionLabel(f))+`
          `)],null,r.normalizeOptionForSlot(f)),r._v(" "),r.multiple?u("button",{ref:"deselectButtons",refInFor:!0,staticClass:"vs__deselect",attrs:{disabled:r.disabled,type:"button",title:"Deselect "+r.getOptionLabel(f),"aria-label":"Deselect "+r.getOptionLabel(f)},on:{click:function(y){return r.deselect(f)}}},[u(r.childComponents.Deselect,{tag:"component"})],1):r._e()],2)],{option:r.normalizeOptionForSlot(f),deselect:r.deselect,multiple:r.multiple,disabled:r.disabled})}),r._v(" "),r._t("search",[u("input",r._g(r._b({staticClass:"vs__search"},"input",r.scope.search.attributes,!1),r.scope.search.events))],null,r.scope.search)],2),r._v(" "),u("div",{ref:"actions",staticClass:"vs__actions"},[u("button",{directives:[{name:"show",rawName:"v-show",value:r.showClearButton,expression:"showClearButton"}],ref:"clearButton",staticClass:"vs__clear",attrs:{disabled:r.disabled,type:"button",title:"Clear Selected","aria-label":"Clear Selected"},on:{click:r.clearSelection}},[u(r.childComponents.Deselect,{tag:"component"})],1),r._v(" "),r._t("open-indicator",[r.noDrop?r._e():u(r.childComponents.OpenIndicator,r._b({tag:"component"},"component",r.scope.openIndicator.attributes,!1))],null,r.scope.openIndicator),r._v(" "),r._t("spinner",[u("div",{directives:[{name:"show",rawName:"v-show",value:r.mutableLoading,expression:"mutableLoading"}],staticClass:"vs__spinner"},[r._v("Loading...")])],null,r.scope.spinner)],2)]),r._v(" "),u("transition",{attrs:{name:r.transition}},[r.dropdownOpen?u("ul",{directives:[{name:"append-to-body",rawName:"v-append-to-body"}],key:"vs"+r.uid+"__listbox",ref:"dropdownMenu",staticClass:"vs__dropdown-menu",attrs:{id:"vs"+r.uid+"__listbox",role:"listbox",tabindex:"-1"},on:{mousedown:function(f){return f.preventDefault(),r.onMousedown(f)},mouseup:r.onMouseUp}},[r._t("list-header",null,null,r.scope.listHeader),r._v(" "),r._l(r.filteredOptions,function(f,y){return u("li",{key:r.getOptionKey(f),staticClass:"vs__dropdown-option",class:{"vs__dropdown-option--deselect":r.isOptionDeselectable(f)&&y===r.typeAheadPointer,"vs__dropdown-option--selected":r.isOptionSelected(f),"vs__dropdown-option--highlight":y===r.typeAheadPointer,"vs__dropdown-option--disabled":!r.selectable(f)},attrs:{id:"vs"+r.uid+"__option-"+y,role:"option","aria-selected":y===r.typeAheadPointer||null},on:{mouseover:function(O){r.selectable(f)&&(r.typeAheadPointer=y)},click:function(O){O.preventDefault(),O.stopPropagation(),r.selectable(f)&&r.select(f)}}},[r._t("option",[r._v(`
          `+r._s(r.getOptionLabel(f))+`
        `)],null,r.normalizeOptionForSlot(f))],2)}),r._v(" "),r.filteredOptions.length===0?u("li",{staticClass:"vs__no-options"},[r._t("no-options",[r._v(`
          Sorry, no matching options.
        `)],null,r.scope.noOptions)],2):r._e(),r._v(" "),r._t("list-footer",null,null,r.scope.listFooter)],2):u("ul",{staticStyle:{display:"none",visibility:"hidden"},attrs:{id:"vs"+r.uid+"__listbox",role:"listbox"}})]),r._v(" "),r._t("footer",null,null,r.scope.footer)],2)},[],!1,null,null,null).exports,Dt={ajax:W,pointer:U,pointerScroll:T},Tt=pt})(),c})()})})(ge);var Vn=ge.exports;const me=fe(Vn);const kn={components:{VSelect:me},data(){return{reportingViews:[],chartTypeOptions:[{label:"Area",value:"area"},{label:"Counter",value:"counter"},{label:"Pie",value:"pie"},{label:"Table",value:"table"},{label:"Geo",value:"geo"}],periodOptions:[{label:"Week",value:"week"},{label:"Month",value:"month"},{label:"Year",value:"year"}],selectedReportingView:null,selectedChart:"area",selectedPeriod:"week",vSelectedMetric:null,selectedDimension:null,selectOptions:null}},computed:{viewOptions(){return this.reportingViews.map(a=>({label:a.name,value:a.id}))},metricOptions(){if(!this.selectOptions)return[];const a=this.selectOptions[this.selectedChart].metrics;return console.log("options",a),a},dimensionOptions(){if(!this.selectOptions)return[];const a=this.selectOptions[this.selectedChart].dimensions;return console.log("options",a),a},hasDimensions(){return this.selectedChart==="pie"||this.selectedChart==="table"||this.selectedChart==="geo"},vSelectMetricOptions(){const a=this.metricOptions,t=[];for(let e=0;e<a.length;e++){const s=a[e];s.optgroup?t.push({optgroup:!0,label:s.optgroup}):t.push({label:s.label,value:s.value})}return t},selectedMetric(){return this.vSelectedMetric?this.vSelectedMetric.value:null}},mounted(){this.loading=!0,k.getReportWidgetSettings().then(a=>{this.loading=!1,this.reportingViews=a.data.views,this.selectOptions=a.data.selectOptions,this.selectedReportingView=this.reportingViews[0].id})},methods:{updateCriteria(){const a={metric:this.selectedMetric};this.hasDimensions&&(a.dimension=this.selectedDimension),this.$emit("update-criteria",{viewId:this.selectedReportingView,chart:this.selectedChart,period:this.selectedPeriod,options:a})}}};var Fn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"da-bg-gray-100 da-border da-rounded-md da-p-6"},[e("div",{staticClass:"field"},[t._m(0),e("div",{staticClass:"input"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedReportingView,expression:"selectedReportingView"}],on:{change:function(s){var l=Array.prototype.filter.call(s.target.options,function(c){return c.selected}).map(function(c){var p="_value"in c?c._value:c.value;return p});t.selectedReportingView=s.target.multiple?l:l[0]}}},[t._l(t.viewOptions,function(s,l){return[e("option",{key:l,domProps:{value:s.value}},[t._v(" "+t._s(s.label)+" ")])]})],2)])])]),e("div",{staticClass:"field"},[t._m(1),e("div",{staticClass:"input"},[e("div",[e("div",{staticClass:"da-inline-block"},[e("ul",{staticClass:"da-flex da-border da-border-gray-300/70 da-bg-white da-rounded-md"},[t._l(t.chartTypeOptions,function(s,l){return[e("li",{key:l,staticClass:"da-relative"},[e("label",[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedChart,expression:"selectedChart"}],staticClass:"da-peer da-sr-only",attrs:{type:"radio"},domProps:{value:s.value,checked:t._q(t.selectedChart,s.value)},on:{change:function(c){t.selectedChart=s.value}}}),e("div",{staticClass:"da-text-gray-700 peer-checked:da-text-black da-px-4 da-py-3 da-cursor-pointer peer-focus-visible:da-ring-2 peer-focus-visible:da-z-50 peer-focus-visible:da-border-transparent da-relative",class:{"da-bg-white hover:da-bg-gray-100/50":s.value!==t.selectedChart,"da-bg-gray-100":s.value===t.selectedChart,"da-rounded-l-md":l===0,"da-rounded-r-md":l===t.chartTypeOptions.length-1,"da-border-r":l!==t.chartTypeOptions.length-1}},[t._v(" "+t._s(s.label)+" ")])])])])]})],2)])])])]),e("div",{staticClass:"field"},[t._m(2),e("div",{staticClass:"input"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedPeriod,expression:"selectedPeriod"}],on:{change:function(s){var l=Array.prototype.filter.call(s.target.options,function(c){return c.selected}).map(function(c){var p="_value"in c?c._value:c.value;return p});t.selectedPeriod=s.target.multiple?l:l[0]}}},[t._l(t.periodOptions,function(s,l){return[e("option",{key:l,domProps:{value:s.value}},[t._v(" "+t._s(s.label)+" ")])]})],2)])])]),t.hasDimensions?[e("div",{staticClass:"field"},[t._m(3),e("div",{staticClass:"input"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedDimension,expression:"selectedDimension"}],on:{change:function(s){var l=Array.prototype.filter.call(s.target.options,function(c){return c.selected}).map(function(c){var p="_value"in c?c._value:c.value;return p});t.selectedDimension=s.target.multiple?l:l[0]}}},[t._l(t.dimensionOptions,function(s,l){return[s.optgroup?[e("optgroup",{key:l,attrs:{label:s.optgroup}})]:[e("option",{key:l,domProps:{value:s.value}},[t._v(" "+t._s(s.label)+" ")])]]})],2)])])])]:t._e(),e("div",{staticClass:"field"},[t._m(4),e("div",{staticClass:"input"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.vSelectedMetric,expression:"vSelectedMetric"}],on:{change:function(s){var l=Array.prototype.filter.call(s.target.options,function(c){return c.selected}).map(function(c){var p="_value"in c?c._value:c.value;return p});t.vSelectedMetric=s.target.multiple?l:l[0]}}},[t._l(t.metricOptions,function(s,l){return[s.optgroup?[e("optgroup",{key:l,attrs:{label:s.optgroup}})]:[e("option",{key:l,domProps:{value:s.value}},[t._v(" "+t._s(s.label)+" ")])]]})],2)])])]),e("div",[e("v-select",{attrs:{options:t.vSelectMetricOptions,selectable:s=>!s.optgroup},scopedSlots:t._u([{key:"option",fn:function(s){return[s.optgroup?[t._v(" ——— "+t._s(s.label)+" ——— ")]:[t._v(" "+t._s(s.label)+" ")]]}}]),model:{value:t.vSelectedMetric,callback:function(s){t.vSelectedMetric=s},expression:"vSelectedMetric"}})],1),e("div",[e("ul",[e("li",[t._v(t._s(t.selectedReportingView))]),e("li",[t._v(t._s(t.selectedChart))]),e("li",[t._v(t._s(t.selectedPeriod))]),e("li",[t._v(t._s(t.selectedDimension))]),e("li",[t._v(t._s(t.selectedMetric))])])]),e("div",{staticClass:"da-mt-6"},[e("input",{staticClass:"da-bg-red-600 da-text-white da-rounded-md da-px-4 da-py-2 da-cursor-pointer",attrs:{type:"button",value:"Update Chart"},on:{click:t.updateCriteria}})])],2)},In=[function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("View")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("Chart Type")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("Period")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("Dimension")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("Metric")])])}],Mn=S(kn,Fn,In,!1,null,null,null,null);const ye=Mn.exports;const jn={components:{AnalyticsChart:M},data(){return{loading:!1,reportResponse:null,pluginOptions:null,totalRevenue:0,totalRevenuePerTransaction:0,totalTransactions:0,totalTransactionsPerSession:0,chartData:null}},computed:{siteName(){return this.reportResponse?this.reportResponse.data.reportData.view:null},chartOptions(){return new L().area(this.pluginOptions.period)}},mounted(){this.getReport()},methods:{getReport(){this.loading=!0,k.getEcommerceReport({viewId:this.pluginOptions.viewId,period:this.pluginOptions.period}).then(a=>{this.loading=!1,this.reportResponse=a;const t=zt(this.pluginOptions.currencyDefinition);this.totalRevenue=Q(t,"currency",a.data.totalRevenue),this.totalRevenuePerTransaction=Q(t,"currency",a.data.totalRevenuePerTransaction),this.totalTransactions=Q(t,"number",a.data.totalTransactions),this.totalTransactionsPerSession=Q(t,"percent",a.data.totalTransactionsPerSession),this.chartData=I(a.data.reportData.chart,t)})}}};var Ln=function(){var t=this,e=t._self._c;return e("div",[t.loading?[t._v(" Loading… ")]:t._e(),t.reportResponse?[e("div",[t._v(" "+t._s(t.reportResponse.data.reportData.periodLabel)+" ")]),e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(t.siteName)+" ")]),t.chartData?[e("analytics-chart",{staticClass:"da-mt-4",attrs:{"chart-type":"area","chart-data":t.chartData,"chart-options":t.chartOptions,"chart-scale":t.reportResponse.data.reportData.period}})]:t._e(),e("div",{staticClass:"tiles"},[e("div",{staticClass:"tile"},[e("div",{staticClass:"label light"},[t._v(" "+t._s("Total Revenue")+" ")]),e("div",{staticClass:"value revenue"},[t._v(" "+t._s(t.totalRevenue)+" ")])]),e("div",{staticClass:"tile"},[e("div",{staticClass:"label light"},[t._v(" "+t._s("Average Order")+" ")]),e("div",{staticClass:"value revenue-per-transaction"},[t._v(" "+t._s(t.totalRevenuePerTransaction)+" ")])]),e("div",{staticClass:"tile"},[e("div",{staticClass:"label light"},[t._v(" "+t._s("Transactions")+" ")]),e("div",{staticClass:"value transactions"},[t._v(" "+t._s(t.totalTransactions)+" ")])]),e("div",{staticClass:"tile"},[e("div",{staticClass:"label light"},[t._v(" "+t._s("Conversion Rate")+" ")]),e("div",{staticClass:"value transactions-per-session"},[t._v(" "+t._s(t.totalTransactionsPerSession)+" ")])])])]:t._e()],2)},En=[],Nn=S(jn,Ln,En,!1,null,null,null,null);const Bn=Nn.exports,zn={components:{AnalyticsReport:ve},data(){return{loading:!0,reportResponse:null,pluginOptions:null}},computed:{requestCriteria(){return this.pluginOptions.request},localeDefinition(){return zt(this.pluginOptions.currencyDefinition)}},watch:{requestCriteria(){this.getReport()}},mounted(){this.getReport()},methods:{getReport(){this.requestCriteria&&(this.loading=!0,k.getReport(this.requestCriteria).then(a=>{this.loading=!1,this.reportResponse=a}))}}};var qn=function(){var t=this,e=t._self._c;return t.requestCriteria&&t.requestCriteria.chart?e("div",[t.loading?[e("div",[t._v("Loading…")])]:[e("analytics-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]],2):t._e()},Un=[],Wn=S(zn,qn,Un,!1,null,null,null,null);const Gn=Wn.exports,Hn={components:{VSelect:me},data(){return{pluginSettings:null,chartTypeOptions:[{label:"Area",value:"area"},{label:"Counter",value:"counter"},{label:"Pie",value:"pie"},{label:"Table",value:"table"},{label:"Geo",value:"geo"}],periodOptions:[{label:"Week",value:"week"},{label:"Month",value:"month"},{label:"Year",value:"year"}],vSelectedMetric:null,selectedDimension:null,viewId:null,chart:null,period:null,dimension:null,metric:null}},computed:{viewOptions(){return this.reportingViews.map(a=>({label:a.name,value:a.id}))},metricOptions(){return!this.selectOptions||!this.chart?null:this.selectOptions[this.chart].metrics},dimensionOptions(){return!this.selectOptions||!this.chart?null:this.selectOptions[this.chart].dimensions},hasDimension(){return this.chart==="pie"||this.chart==="table"||this.chart==="geo"},metricSelectOptions(){return this.parseOptionsForVueSelect(this.metricOptions)},dimensionSelectOptions(){return this.parseOptionsForVueSelect(this.dimensionOptions)},reportingViews(){return this.pluginSettings.reportingViews},selectOptions(){return this.pluginSettings.selectOptions},inputName(){return a=>{if(!a)return null;const t=this.pluginSettings.namespace;return Craft.namespaceInputName(a,t)}}},mounted(){this.viewId=this.pluginSettings.settings.viewId??this.viewOptions[0].value??null,this.chart=this.pluginSettings.settings.chart??this.chartTypeOptions[0].value,this.period=this.pluginSettings.settings.period??this.periodOptions[0].value,this.namespace=this.pluginSettings.namespace,this.initMetric(),this.initDimension()},methods:{initMetric(){var a;this.pluginSettings.settings.options&&this.pluginSettings.settings.options[this.chart]&&this.pluginSettings.settings.options[this.chart].metric&&this.metricSelectOptions.find(t=>t.value===this.pluginSettings.settings.options[this.chart].metric)?this.metric=this.pluginSettings.settings.options[this.chart].metric:this.metric=(a=this.metricSelectOptions.find(t=>t.value!==void 0))==null?void 0:a.value},initDimension(){var a;this.pluginSettings.settings.options&&this.pluginSettings.settings.options[this.chart]&&this.pluginSettings.settings.options[this.chart].dimension&&this.dimensionSelectOptions.find(t=>t.value===this.pluginSettings.settings.options[this.chart].dimension)?this.dimension=this.pluginSettings.settings.options[this.chart].dimension:this.dimension=(a=this.dimensionSelectOptions.find(t=>t.value!==void 0))==null?void 0:a.value},onChartChange(){this.initMetric(),this.initDimension()},parseOptionsForVueSelect(a){if(!a)return[];const t=[];for(let e=0;e<a.length;e++){const s=a[e];s.optgroup?t.push({optgroup:!0,label:s.optgroup}):t.push({label:s.label,value:s.value})}return t}}};var Kn=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"field"},[t._m(0),e("div",{staticClass:"input"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.viewId,expression:"viewId"}],attrs:{name:t.inputName("viewId")},on:{change:function(s){var l=Array.prototype.filter.call(s.target.options,function(c){return c.selected}).map(function(c){var p="_value"in c?c._value:c.value;return p});t.viewId=s.target.multiple?l:l[0]}}},[t._l(t.viewOptions,function(s,l){return[e("option",{key:l,domProps:{value:s.value}},[t._v(" "+t._s(s.label)+" ")])]})],2)])])]),e("div",{staticClass:"field"},[t._m(1),e("div",{staticClass:"input"},[e("div",{staticClass:"chart-picker"},[e("div",{staticClass:"da-inline-block"},[e("ul",{staticClass:"chart-types da-flex da-border da-border-gray-300/70 da-bg-white da-rounded-md"},[t._l(t.chartTypeOptions,function(s,l){return[e("li",{key:l,staticClass:"da-relative"},[e("label",[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.chart,expression:"chart"}],staticClass:"da-peer da-sr-only",attrs:{name:t.inputName("chart"),type:"radio"},domProps:{value:s.value,checked:t._q(t.chart,s.value)},on:{change:[function(c){t.chart=s.value},t.onChartChange]}}),e("div",{staticClass:"da-text-gray-700 peer-checked:da-text-black da-px-4 da-py-3 da-cursor-pointer peer-focus-visible:da-ring-2 peer-focus-visible:da-z-50 peer-focus-visible:da-border-transparent da-relative",class:{"da-bg-white hover:da-bg-gray-100/50":s.value!==t.chart,"da-bg-gray-100":s.value===t.chart,"da-rounded-l-md":l===0,"da-rounded-r-md":l===t.chartTypeOptions.length-1,"da-border-r":l!==t.chartTypeOptions.length-1}},[t._v(" "+t._s(s.label)+" ")])])])])]})],2)])])])]),e("div",{staticClass:"field"},[t._m(2),e("div",{staticClass:"input"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.period,expression:"period"}],attrs:{name:t.inputName("period")},on:{change:function(s){var l=Array.prototype.filter.call(s.target.options,function(c){return c.selected}).map(function(c){var p="_value"in c?c._value:c.value;return p});t.period=s.target.multiple?l:l[0]}}},[t._l(t.periodOptions,function(s,l){return[e("option",{key:l,domProps:{value:s.value}},[t._v(" "+t._s(s.label)+" ")])]})],2)])])]),t.hasDimension?[e("div",{staticClass:"field"},[t._m(3),e("div",[e("v-select",{attrs:{options:t.dimensionSelectOptions,selectable:s=>!s.optgroup,reduce:s=>s.value},scopedSlots:t._u([{key:"option",fn:function(s){return[s.optgroup?[t._v(" ——— "+t._s(s.label)+" ——— ")]:[t._v(" "+t._s(s.label)+" ")]]}}],null,!1,3128001412),model:{value:t.dimension,callback:function(s){t.dimension=s},expression:"dimension"}}),e("input",{attrs:{type:"hidden",name:t.inputName("options["+t.chart+"][dimension]")},domProps:{value:t.dimension}})],1)])]:t._e(),e("div",{staticClass:"field"},[t._m(4),e("div",[e("v-select",{attrs:{options:t.metricSelectOptions,selectable:s=>!s.optgroup,reduce:s=>s.value},scopedSlots:t._u([{key:"option",fn:function(s){return[s.optgroup?[t._v(" ——— "+t._s(s.label)+" ——— ")]:[t._v(" "+t._s(s.label)+" ")]]}}]),model:{value:t.metric,callback:function(s){t.metric=s},expression:"metric"}}),e("input",{attrs:{type:"hidden",name:t.inputName("options["+t.chart+"][metric]")},domProps:{value:t.metric}})],1)])],2)},Xn=[function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("View")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("Chart Type")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("Period")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("Dimension")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("Metric")])])}],Jn=S(Hn,Kn,Xn,!1,null,null,null,null);const Yn=Jn.exports,Qn={components:{AnalyticsChart:M},data(){return{refreshInterval:60,pluginOptions:null,reportResponse:null,activeUsers:0,activePages:null,pageviews:null,chartData:null}},computed:{chartOptions(){return{height:150,theme:"maximized",bar:{groupWidth:"90%"},legend:{position:"bottom"},hAxis:{direction:-1,baselineColor:"transparent",gridlineColor:"transparent",textPosition:"none",gridlines:{count:0}},vAxis:{baselineColor:"#fff",gridlineColor:"#fff",textPosition:"none",gridlines:{count:0}}}}},mounted(){this.refreshInterval=this.pluginOptions.refreshInterval,this.getReport()},methods:{getReport(){this.loading=!0,k.getRealtimeReport({viewId:this.pluginOptions.reportingView.id}).then(a=>{this.loading=!1,this.reportResponse=a,this.activeUsers=this.reportResponse.data.activeUsers,this.activePages=this.reportResponse.data.activePages,this.parsePageviews(this.reportResponse),setTimeout(this.getReport,this.refreshInterval*1e3)})},parsePageviews(a){this.pageviews=a.data.pageviews,this.chartData=this.getPageviewsDataTable(this.pageviews)},getPageviewsDataTable(a){let t=new google.visualization.DataTable;if(t.addColumn("number",Craft.t("analytics","Minutes ago")),t.addColumn("number",Craft.t("analytics","Pageviews")),a.rows)for(let e=30;e>=0;e--){let s=0;a.rows.forEach(c=>{var p=parseInt(c[0]);p===e&&(s=parseInt(c[1]))});let l=Craft.t("analytics","{count} minutes ago",{count:e});e===1&&(l=Craft.t("analytics","{count} minute ago",{count:e})),t.addRow([{v:e,f:l},s])}return t}}};var Zn=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(t.pluginOptions.reportingView.name)+" ")]),e("div",{staticClass:"da-mt-2 da-text-6xl"},[t._v(" "+t._s(t.activeUsers)+" ")]),e("div",{staticClass:"da-mt-6"},[e("h3",[t._v(" Pageviews per minute ")]),e("div",[t.chartData?[e("analytics-chart",{attrs:{"chart-type":"column","chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)]),e("div",{staticClass:"active-pages da-mt-6"},[e("h3",[t._v(" Active pages ")]),t.activePages?[e("table",{staticClass:"data fullwidth"},[t._m(0),e("tbody",t._l(t.activePages.rows,function(s,l){return e("tr",{key:l},[e("td",{staticClass:"col-page"},[t._v(" "+t._s(s[0])+" ")]),e("td",{staticClass:"col-users"},[t._v(" "+t._s(s[1])+" ")])])}),0)])]:t._e()],2)])},ta=[function(){var a=this,t=a._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-page"},[a._v(" Page ")]),t("th",{staticClass:"col-users"},[a._v(" Users ")])])])}],ea=S(Qn,Zn,ta,!1,null,null,null,null);const ra=ea.exports,na={components:{AnalyticsChart:M},data(){return{loading:!1,pluginOptions:null,reportType:null,chartData:null,reportResponse:null,metricOptions:[{label:"Pageviews",value:"ga:pageviews"},{label:"Sessions",value:"ga:sessions"},{label:"Bounce Rate",value:"ga:bounceRate"},{label:"Avg. time on page",value:"ga:avgTimeOnPage"},{label:"% Exit",value:"ga:exitRate"}],metric:"ga:pageviews"}},computed:{elementId(){return this.pluginOptions.element.id},siteId(){return this.pluginOptions.element.siteId},chartOptions(){return new L().field()},localeDefinition(){return zt(this.pluginOptions.currencyDefinition)}},mounted(){this.getElementReport()},methods:{getElementReport(){this.loading=!0,k.getElementReport({elementId:this.elementId,siteId:this.siteId,metric:this.metric}).then(a=>{this.loading=!1,this.reportResponse=a,this.reportType=a.data.type;const t=I(this.reportResponse.data.chart,this.localeDefinition);this.chartData=this.formatDataTable(t)})},generateTicks(){var a=[];for(let p=0;p<this.reportResponse.data.chart.rows.length;p++){var t=this.reportResponse.data.chart.rows[p][0],e=t.substr(0,4),s=t.substr(4,2)-1,l=t.substr(6,2),c=new Date(e,s,l);a.push(c)}return a},formatDataTable(a){if(this.reportResponse.data.period==="year"){var t=new google.visualization.DateFormat({pattern:"MMMM yyyy"});t.format(a,0)}return a}}};var aa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"da-mt-8"},[e("div",{staticClass:"da-flex da-items-center"},[e("div",[e("div",{staticClass:"field"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.metric,expression:"metric"}],on:{change:[function(s){var l=Array.prototype.filter.call(s.target.options,function(c){return c.selected}).map(function(c){var p="_value"in c?c._value:c.value;return p});t.metric=s.target.multiple?l:l[0]},function(s){return t.getElementReport()}]}},[t._l(t.metricOptions,function(s,l){return[e("option",{key:l,domProps:{value:s.value}},[t._v(" "+t._s(s.label)+" ")])]})],2)])])]),e("div",{staticClass:"da-flex-1 da-ml-4 da-text-right"},[t._v(" "+t._s(t.pluginOptions.element.url)+" ")])]),t.loading?[t._v(" Loading… ")]:[t.reportResponse?[e("analytics-chart",{staticClass:"da-mt-4",attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],e("ul",{staticClass:"da-mt-4"},[e("li",[t._v("elementId: "+t._s(t.elementId))]),e("li",[t._v("siteId: "+t._s(t.siteId))]),e("li",[t._v("metric: "+t._s(t.metric))])])],2)},ia=[],sa=S(na,aa,ia,!1,null,null,null,null);const oa=sa.exports,la=window.axios,ca={getAccountExplorerData(){return la.get(Craft.getActionUrl("analytics/settings/get-account-explorer-data"),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})}},da={data(){return{loading:!1,accountExplorerData:null,selectedAccount:null,selectedProperty:null,selectedView:null,pluginOptions:null}},computed:{accounts(){return this.accountExplorerData?this.accountExplorerData.accounts:[]},properties(){return this.accountExplorerData?this.selectedAccount?this.accountExplorerData.properties.filter(a=>a.accountId===this.selectedAccount):[]:[]},views(){return this.accountExplorerData?this.selectedProperty?this.accountExplorerData.views.filter(a=>a.webPropertyId===this.selectedProperty):[]:[]}},mounted(){this.loading=!0,ca.getAccountExplorerData().then(a=>{this.loading=!1,this.accountExplorerData=a.data}),this.selectedAccount=this.pluginOptions.reportingView.gaAccountId,this.selectedProperty=this.pluginOptions.reportingView.gaPropertyId,this.selectedView=this.pluginOptions.reportingView.gaViewId}};var ua=function(){var t=this,e=t._self._c;return e("div",[t.loading?[e("div",[t._v(" Loading… ")])]:[e("div",{staticClass:"da-flex da-border da-rounded-md"},[e("div",{staticClass:"da-flex-1 da-border-r"},[e("div",{staticClass:"da-border-b da-font-medium da-text-gray-500 da-px-6 da-py-3"},[t._v(" Analytics Accounts ")]),e("div",[e("ul",[t._l(t.accounts,function(s,l){return[e("li",{key:l},[e("button",{staticClass:"da-px-6 da-py-3 da-block da-w-full da-text-left da-flex da-justify-between da-items-center",class:{"da-bg-gray-100":t.selectedAccount===s.id,"hover:da-bg-gray-100/50":t.selectedAccount!==s.id},on:{click:function(c){c.preventDefault(),t.selectedAccount=s.id}}},[e("div",[e("div",[t._v(" "+t._s(s.name)+" ")]),e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(s.id)+" ")])]),e("svg",{staticClass:"da-h-4 da-w-4 da-text-gray-700",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"}})])])])]})],2)])]),e("div",{staticClass:"da-flex-1 da-border-r"},[e("div",{staticClass:"da-border-b da-font-medium da-text-gray-500 da-px-6 da-py-3"},[t._v(" Properties & Apps ")]),e("div",[e("ul",[t._l(t.properties,function(s,l){return[e("li",{key:l},[e("button",{staticClass:"da-px-6 da-py-3 da-block da-w-full da-text-left",class:{"da-bg-gray-100":t.selectedProperty===s.id,"hover:da-bg-gray-100/50":t.selectedProperty!==s.id},on:{click:function(c){c.preventDefault(),t.selectedProperty=s.id}}},[t._v(" "+t._s(s.name)+" "),e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(s.id)+" ")])])])]})],2)])]),e("div",{staticClass:"da-flex-1"},[e("div",{staticClass:"da-border-b da-font-medium da-text-gray-500 da-px-6 da-py-3"},[t._v(" Views ")]),e("div",[e("ul",[t._l(t.views,function(s,l){return[e("li",{key:l,staticClass:"da-px-6 da-py-3"},[t._v(" "+t._s(s.name)+" ("+t._s(s.id)+") "),e("button",{staticClass:"da-bg-blue-600 da-text-white da-font-medium da-rounded-md da-px-2 da-py-1 da-ml-2",class:{"da-opacity-50":t.selectedView===s.id},attrs:{disabled:t.selectedView===s.id},on:{click:function(c){c.preventDefault(),t.selectedView=s.id}}},[t._v(" Select ")])])]})],2)])])]),e("div",{staticClass:"hidden"},[e("div",[t._v(" Account: "),e("input",{attrs:{type:"text",name:"accountExplorer[account]"},domProps:{value:t.selectedAccount}})]),e("div",[t._v(" Property: "),e("input",{attrs:{type:"text",name:"accountExplorer[property]"},domProps:{value:t.selectedProperty}})]),e("div",[t._v(" View: "),e("input",{attrs:{type:"text",name:"accountExplorer[view]"},domProps:{value:t.selectedView}})])])]],2)},pa=[],ha=S(da,ua,pa,!1,null,null,null,null);const fa=ha.exports,va={components:{ReportWidgetSettings:ye,ReportWidget:_e},data(){return{requestCriteria:null}},methods:{updateRequestCriteria(a){console.log("updateRequestCriteria",a),this.requestCriteria=a}}};var _a=function(){var t=this,e=t._self._c;return e("div",[e("h2",[t._v("Report Widget")]),e("div",{staticClass:"da-grid da-grid-cols-2 da-gap-6"},[e("div",[e("report-widget-settings",{on:{"update-criteria":t.updateRequestCriteria}})],1),e("div",[e("report-widget",{attrs:{"request-criteria":t.requestCriteria}}),e("div",{staticClass:"da-mt-6"},[e("pre",[t._v(t._s(t.requestCriteria))])])],1)])])},ga=[],ma=S(va,_a,ga,!1,null,null,null,null);const ya=ma.exports,ba={components:{AnalyticsChart:M},data(){return{loading:!0,reportResponse:null,chartData:null,dimensions:[{label:"ga:city",value:"ga:city"},{label:"ga:country",value:"ga:country"},{label:"ga:continent",value:"ga:continent"},{label:"ga:subContinent",value:"ga:subContinent"}],selectedDimension:"ga:country"}},computed:{reportCriteria(){return{viewId:1,chart:"geo",period:"month",options:{dimension:this.selectedDimension,metric:"ga:users"}}},chartOptions(){return new L().geo(this.selectedDimension)}},mounted(){this.loading=!0,k.getReport(this.reportCriteria).then(a=>{this.loading=!1,this.reportResponse=a,this.chartData=I(a.data.chart)})},methods:{onDimensionChange(){this.loading=!0,k.getReport(this.reportCriteria).then(a=>{this.loading=!1,this.reportResponse=a,this.chartData=I(a.data.chart)})}}};var Ca=function(){var t=this,e=t._self._c;return e("div",{staticClass:"da-border da-rounded-md da-p-6"},[e("div",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedDimension,expression:"selectedDimension"}],on:{change:[function(s){var l=Array.prototype.filter.call(s.target.options,function(c){return c.selected}).map(function(c){var p="_value"in c?c._value:c.value;return p});t.selectedDimension=s.target.multiple?l:l[0]},t.onDimensionChange]}},t._l(t.dimensions,function(s,l){return e("option",{key:l,domProps:{value:s.value}},[t._v(" "+t._s(s.label)+" ")])}),0),t._v(" "+t._s(t.selectedDimension)+" ")]),e("hr"),t.loading?[e("div",[t._v("Loading…")])]:[e("div",[e("div",[e("div",{staticClass:"da-font-bold"},[t._v(" "+t._s(t.reportResponse.data.metric)+" ")]),e("div",[t._v(" "+t._s(t.reportResponse.data.periodLabel)+" ")]),e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(t.reportResponse.data.view)+" ")]),e("div",{staticClass:"da-mt-4"},[e("div",[t.chartData?[e("analytics-chart",{attrs:{"chart-type":t.reportCriteria.chart,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])])])]],2)},wa=[],Oa=S(ba,Ca,wa,!1,null,null,null,null);const Ra=Oa.exports,xa={components:{AnalyticsChart:M},data(){return{loading:!0,reportResponse:null,chartData:null,periods:[{value:"week",label:"Week"},{value:"month",label:"Month"},{value:"year",label:"Year"}],selectedPeriod:"week"}},computed:{reportCriteria(){return{viewId:1,chart:"area",period:this.selectedPeriod,options:{metric:"ga:users"}}},chartOptions(){const a=new L().area(this.selectedPeriod);return a.hAxis.ticks=this.generateTicks(),a}},mounted(){this.getReport()},methods:{onPeriodChange(){this.getReport()},getReport(){this.loading=!0,k.getReport(this.reportCriteria).then(a=>{this.loading=!1,this.reportResponse=a;const t=I(a.data.chart);this.chartData=this.formatDataTable(t)})},generateTicks(){var a=[];for(let p=0;p<this.reportResponse.data.chart.rows.length;p++){var t=this.reportResponse.data.chart.rows[p][0],e=t.substr(0,4),s=t.substr(4,2)-1,l=t.substr(6,2),c=new Date(e,s,l);a.push(c)}return a},formatDataTable(a){if(this.reportResponse.data.period==="year"){var t=new google.visualization.DateFormat({pattern:"MMMM yyyy"});t.format(a,0)}return a}}};var Sa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"da-border da-rounded-md da-p-6"},[e("div",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedPeriod,expression:"selectedPeriod"}],on:{change:[function(s){var l=Array.prototype.filter.call(s.target.options,function(c){return c.selected}).map(function(c){var p="_value"in c?c._value:c.value;return p});t.selectedPeriod=s.target.multiple?l:l[0]},t.onPeriodChange]}},t._l(t.periods,function(s,l){return e("option",{key:l,domProps:{value:s.value}},[t._v(" "+t._s(s.label)+" ")])}),0)]),e("hr"),t.loading?[e("div",[t._v("Loading…")])]:[e("div",[e("div",[e("div",{staticClass:"da-font-bold"},[t._v(" "+t._s(t.reportResponse.data.metric)+" ")]),e("div",[t._v(t._s(t.reportResponse.data.periodLabel))]),e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(t.reportResponse.data.view)+" ")]),e("div",{staticClass:"da-mt-4"},[e("div",[t.chartData?[e("analytics-chart",{attrs:{"chart-type":t.reportCriteria.chart,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])])])]],2)},Da=[],Ta=S(xa,Sa,Da,!1,null,null,null,null);const $a=Ta.exports,Aa={components:{AnalyticsChart:M},data(){return{loading:!0,reportCriteria:{viewId:1,chart:"pie",period:"month",options:{dimension:"ga:userType",metric:"ga:users"}},reportResponse:null,chartData:null}},computed:{chartOptions(){return new L().pie()}},mounted(){this.loading=!0,k.getReport(this.reportCriteria).then(a=>{this.loading=!1,this.reportResponse=a,this.chartData=I(a.data.chart)})}};var Pa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"da-border da-rounded-md da-p-6"},[e("div",[e("div",[e("div",{staticClass:"da-font-bold"},[t._v(" "+t._s(t.reportCriteria.options.metric)+" ")]),e("div",[t._v(t._s(t.reportCriteria.period))]),e("div",{staticClass:"da-text-gray-500"},[t._v(" Site Name ")]),e("div",{staticClass:"da-mt-4"},[t.loading?[e("div",[t._v("Loading…")])]:[e("div",[t.chartData?[e("analytics-chart",{attrs:{"chart-type":t.reportCriteria.chart,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)]],2)])])])},Va=[],ka=S(Aa,Pa,Va,!1,null,null,null,null);const Fa=ka.exports,Ia={components:{AnalyticsChart:M},data(){return{loading:!0,reportCriteria:{viewId:1,chart:"table",period:"month",options:{dimension:"ga:country",metric:"ga:users"}},reportResponse:null,chartData:null}},computed:{chartOptions(){return new L().table()}},mounted(){this.loading=!0,k.getReport(this.reportCriteria).then(a=>{this.loading=!1,this.reportResponse=a,this.chartData=I(a.data.chart)})}};var Ma=function(){var t=this,e=t._self._c;return e("div",{staticClass:"da-border da-rounded-md da-p-6"},[e("div",[e("div",[e("div",{staticClass:"da-font-bold"},[t._v(" "+t._s(t.reportCriteria.options.metric)+" ")]),e("div",[t._v(t._s(t.reportCriteria.period))]),e("div",{staticClass:"da-text-gray-500"},[t._v(" Site Name ")]),e("div",{staticClass:"da-mt-4"},[t.loading?[e("div",[t._v("Loading…")])]:[e("div",[t.chartData?[e("analytics-chart",{attrs:{"chart-type":t.reportCriteria.chart,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)]],2)])])])},ja=[],La=S(Ia,Ma,ja,!1,null,null,null,null);const Ea=La.exports,Na={data(){return{loading:!0,reportCriteria:{viewId:1,chart:"counter",period:"month",options:{metric:"ga:users"}},reportResponse:null,counterData:null}},mounted(){this.loading=!0,k.getReport(this.reportCriteria).then(a=>{this.loading=!1,this.reportResponse=a,this.counterData=a.data.counter})}};var Ba=function(){var t=this,e=t._self._c;return e("div",{staticClass:"da-border da-rounded-md da-p-6"},[e("div",[t.loading?[e("div",[t._v("Loading…")])]:[e("div",{staticClass:"da-text-center"},[e("div",{staticClass:"da-text-6xl"},[t._v(" "+t._s(t.counterData.value)+" ")]),e("div",{staticClass:"da-mt-2"},[e("span",{staticClass:"da-text-blue-600"},[t._v(t._s(t.reportResponse.data.metric))]),t._v(" "+t._s(t.reportResponse.data.periodLabel)+" ")]),e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(t.reportResponse.data.view)+" ")])])]],2)])},za=[],qa=S(Na,Ba,za,!1,null,null,null,null);const Ua=qa.exports,Wa={components:{GeoReport:Ra,CounterReport:Ua,TableReport:Ea,PieReport:Fa,AreaReport:$a}};var Ga=function(){var t=this,e=t._self._c;return e("div",{staticClass:"da-grid da-grid-cols-2 da-gap-6"},[e("area-report"),e("geo-report"),e("counter-report"),e("pie-report"),e("table-report")],1)},Ha=[],Ka=S(Wa,Ga,Ha,!1,null,null,null,null);const Xa=Ka.exports,E=window.Vue;window.AnalyticsVueEcommerceWidget=E.extend(Bn);window.AnalyticsVueReportWidget=E.extend(Gn);window.AnalyticsVueReportWidgetSettings=E.extend(Yn);window.AnalyticsVueRealtimeWidget=E.extend(ra);window.AnalyticsVueReportField=E.extend(oa);window.AnalyticsVueTestReportWidget=E.extend({render:a=>a(_e)});window.AnalyticsVueTestReportWidgetSettings=E.extend({render:a=>a(ye)});window.AnalyticsVueSettings=E.extend(fa);window.AnalyticsVueTests=E.extend({data(){return{selectedReportingView:null,selectedChart:"area",selectedPeriod:"week",selectedMetric:null}},render:a=>a(ya)});window.AnalyticsVueTestReports=E.extend({render:a=>a(Xa)});
//# sourceMappingURL=main-26427d3e.js.map

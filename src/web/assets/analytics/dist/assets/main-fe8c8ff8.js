const J=window.axios,lt={getReport(a){return J.post(Craft.getActionUrl("analytics/reports/report-widget"),{...a},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getReportWidgetSettings(){return J.get(Craft.getActionUrl("analytics/vue/get-report-widget-settings"),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getDimensionsMetrics(a){return J.get(Craft.getActionUrl("analytics/reports/get-dimensions-metrics&sourceId="+a),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getElementReport({elementId:a,siteId:t,metric:e}){return J.post(Craft.getActionUrl("analytics/reports/element"),{elementId:a,siteId:t,metric:e},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getRealtimeReport({sourceId:a}){return J.post(Craft.getActionUrl("analytics/reports/realtime-widget"),{sourceId:a},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getEcommerceReport({sourceId:a,period:t}){return J.post(Craft.getActionUrl("analytics/reports/ecommerce-widget"),{sourceId:a,period:t},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})}},Pn=a=>{var t;return $.each(Analytics.continents,function(e,i){a==i.code&&(t=i.label)}),t||a},Vn={getContinentByCode:Pn},Y=(a,t)=>{var e=new google.visualization.DataTable;return $.each(a.cols,function(i,u){var f;switch(u.type){case"date":f="date";break;case"percent":case"time":case"integer":case"currency":case"float":f="number";break;default:f="string"}e.addColumn({type:f,label:u.label,id:u.id})}),$.each(a.rows,$.proxy(function(i,u){var f=[];$.each(a.cols,$.proxy(function(p,v){switch(v.type){case"date":f[p]=L(t,v.type,u[p]);break;case"float":f[p]=+u[p];break;case"integer":case"currency":case"percent":case"time":case"continent":case"continentId":f[p]={v:Fn(t,v.type,u[p]),f:L(t,v.type,u[p])};break;default:f[p]=u[p]}},this)),e.addRow(f)},globalThis)),e},Fn=(a,t,e)=>{switch(t){case"integer":case"currency":case"percent":case"time":case"float":return+e;default:return e}},L=(a,t,e)=>{switch(t){case"continent":return Vn.getContinentByCode(e);case"currency":return In(a,+e);case"float":return(+e).toFixed(2);case"integer":return En(a,+e);case"time":return jn(+e);case"percent":return Mn(a,+e);case"date":{const i=e;if(i.length==8){let u=parseInt(i.substr(0,4)),f=parseInt(i.substr(4,2))-1,p=parseInt(i.substr(6,2));return new Date(u,f,p)}else if(i.length==6){let u=parseInt(i.substr(0,4)),f=parseInt(i.substr(4,2))-1;return new Date(u,f,"01")}break}default:return e}},Ut=a=>d3.formatLocale(a),In=(a,t)=>{var e=Ut(a),i=e.format(Craft.charts.BaseChart.defaults.formats.currencyFormat);return i(t)},jn=a=>{var t=parseInt(a,10),e=Math.floor(t/3600),i=Math.floor((t-e*3600)/60),u=t-e*3600-i*60;return e<10&&(e="0"+e),i<10&&(i="0"+i),u<10&&(u="0"+u),e+":"+i+":"+u},En=(a,t)=>Ut(a).format(",")(t),Mn=(a,t)=>Ut(a).format(Craft.charts.BaseChart.defaults.formats.percentFormat)(t/100),Ln=a=>$.extend(!0,Analytics.d3FormatLocaleDefinition,a),Ot=a=>Ln({currency:a}),xt=(a,t,e)=>Craft.t(a,t,e);var ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fe(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var wt={exports:{}};wt.exports;(function(a,t){var e=200,i="__lodash_hash_undefined__",u=800,f=16,p=9007199254740991,v="[object Arguments]",_="[object Array]",b="[object AsyncFunction]",B="[object Boolean]",I="[object Date]",D="[object Error]",k="[object Function]",z="[object GeneratorFunction]",Z="[object Map]",ct="[object Number]",Tt="[object Null]",ut="[object Object]",Rt="[object Proxy]",Dt="[object RegExp]",dt="[object Set]",N="[object String]",pt="[object Undefined]",At="[object WeakMap]",$t="[object ArrayBuffer]",n="[object DataView]",l="[object Float32Array]",c="[object Float64Array]",h="[object Int8Array]",y="[object Int16Array]",O="[object Int32Array]",M="[object Uint8Array]",tt="[object Uint8ClampedArray]",P="[object Uint16Array]",R="[object Uint32Array]",et=/[\\^$.*+?()[\]{}|]/g,ht=/^\[object .+?Constructor\]$/,F=/^(?:0|[1-9]\d*)$/,C={};C[l]=C[c]=C[h]=C[y]=C[O]=C[M]=C[tt]=C[P]=C[R]=!0,C[v]=C[_]=C[$t]=C[B]=C[n]=C[I]=C[D]=C[k]=C[Z]=C[ct]=C[ut]=C[Dt]=C[dt]=C[N]=C[At]=!1;var Ht=typeof ot=="object"&&ot&&ot.Object===Object&&ot,_e=typeof self=="object"&&self&&self.Object===Object&&self,nt=Ht||_e||Function("return this")(),qt=t&&!t.nodeType&&t,rt=qt&&!0&&a&&!a.nodeType&&a,Gt=rt&&rt.exports===qt,Pt=Gt&&Ht.process,Kt=function(){try{var r=rt&&rt.require&&rt.require("util").types;return r||Pt&&Pt.binding&&Pt.binding("util")}catch{}}(),Wt=Kt&&Kt.isTypedArray;function ge(r,s,o){switch(o.length){case 0:return r.call(s);case 1:return r.call(s,o[0]);case 2:return r.call(s,o[0],o[1]);case 3:return r.call(s,o[0],o[1],o[2])}return r.apply(s,o)}function me(r,s){for(var o=-1,d=Array(r);++o<r;)d[o]=s(o);return d}function ye(r){return function(s){return r(s)}}function be(r,s){return r==null?void 0:r[s]}function Ce(r,s){return function(o){return r(s(o))}}var we=Array.prototype,Oe=Function.prototype,ft=Object.prototype,Vt=nt["__core-js_shared__"],vt=Oe.toString,j=ft.hasOwnProperty,Xt=function(){var r=/[^.]+$/.exec(Vt&&Vt.keys&&Vt.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Jt=ft.toString,xe=vt.call(Object),Se=RegExp("^"+vt.call(j).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_t=Gt?nt.Buffer:void 0,Yt=nt.Symbol,Qt=nt.Uint8Array,Zt=_t?_t.allocUnsafe:void 0,te=Ce(Object.getPrototypeOf,Object),ee=Object.create,Te=ft.propertyIsEnumerable,Re=we.splice,U=Yt?Yt.toStringTag:void 0,gt=function(){try{var r=jt(Object,"defineProperty");return r({},"",{}),r}catch{}}(),De=_t?_t.isBuffer:void 0,ne=Math.max,Ae=Date.now,re=jt(nt,"Map"),at=jt(Object,"create"),$e=function(){function r(){}return function(s){if(!q(s))return{};if(ee)return ee(s);r.prototype=s;var o=new r;return r.prototype=void 0,o}}();function H(r){var s=-1,o=r==null?0:r.length;for(this.clear();++s<o;){var d=r[s];this.set(d[0],d[1])}}function Pe(){this.__data__=at?at(null):{},this.size=0}function Ve(r){var s=this.has(r)&&delete this.__data__[r];return this.size-=s?1:0,s}function Fe(r){var s=this.__data__;if(at){var o=s[r];return o===i?void 0:o}return j.call(s,r)?s[r]:void 0}function Ie(r){var s=this.__data__;return at?s[r]!==void 0:j.call(s,r)}function je(r,s){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=at&&s===void 0?i:s,this}H.prototype.clear=Pe,H.prototype.delete=Ve,H.prototype.get=Fe,H.prototype.has=Ie,H.prototype.set=je;function E(r){var s=-1,o=r==null?0:r.length;for(this.clear();++s<o;){var d=r[s];this.set(d[0],d[1])}}function Ee(){this.__data__=[],this.size=0}function Me(r){var s=this.__data__,o=mt(s,r);if(o<0)return!1;var d=s.length-1;return o==d?s.pop():Re.call(s,o,1),--this.size,!0}function Le(r){var s=this.__data__,o=mt(s,r);return o<0?void 0:s[o][1]}function Be(r){return mt(this.__data__,r)>-1}function ke(r,s){var o=this.__data__,d=mt(o,r);return d<0?(++this.size,o.push([r,s])):o[d][1]=s,this}E.prototype.clear=Ee,E.prototype.delete=Me,E.prototype.get=Le,E.prototype.has=Be,E.prototype.set=ke;function W(r){var s=-1,o=r==null?0:r.length;for(this.clear();++s<o;){var d=r[s];this.set(d[0],d[1])}}function ze(){this.size=0,this.__data__={hash:new H,map:new(re||E),string:new H}}function Ne(r){var s=bt(this,r).delete(r);return this.size-=s?1:0,s}function Ue(r){return bt(this,r).get(r)}function He(r){return bt(this,r).has(r)}function qe(r,s){var o=bt(this,r),d=o.size;return o.set(r,s),this.size+=o.size==d?0:1,this}W.prototype.clear=ze,W.prototype.delete=Ne,W.prototype.get=Ue,W.prototype.has=He,W.prototype.set=qe;function X(r){var s=this.__data__=new E(r);this.size=s.size}function Ge(){this.__data__=new E,this.size=0}function Ke(r){var s=this.__data__,o=s.delete(r);return this.size=s.size,o}function We(r){return this.__data__.get(r)}function Xe(r){return this.__data__.has(r)}function Je(r,s){var o=this.__data__;if(o instanceof E){var d=o.__data__;if(!re||d.length<e-1)return d.push([r,s]),this.size=++o.size,this;o=this.__data__=new W(d)}return o.set(r,s),this.size=o.size,this}X.prototype.clear=Ge,X.prototype.delete=Ke,X.prototype.get=We,X.prototype.has=Xe,X.prototype.set=Je;function Ye(r,s){var o=Lt(r),d=!o&&Mt(r),m=!o&&!d&&le(r),w=!o&&!d&&!m&&ue(r),x=o||d||m||w,g=x?me(r.length,String):[],S=g.length;for(var V in r)(s||j.call(r,V))&&!(x&&(V=="length"||m&&(V=="offset"||V=="parent")||w&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||ie(V,S)))&&g.push(V);return g}function Ft(r,s,o){(o!==void 0&&!Ct(r[s],o)||o===void 0&&!(s in r))&&It(r,s,o)}function Qe(r,s,o){var d=r[s];(!(j.call(r,s)&&Ct(d,o))||o===void 0&&!(s in r))&&It(r,s,o)}function mt(r,s){for(var o=r.length;o--;)if(Ct(r[o][0],s))return o;return-1}function It(r,s,o){s=="__proto__"&&gt?gt(r,s,{configurable:!0,enumerable:!0,value:o,writable:!0}):r[s]=o}var Ze=hn();function yt(r){return r==null?r===void 0?pt:Tt:U&&U in Object(r)?fn(r):bn(r)}function ae(r){return st(r)&&yt(r)==v}function tn(r){if(!q(r)||mn(r))return!1;var s=kt(r)?Se:ht;return s.test(xn(r))}function en(r){return st(r)&&ce(r.length)&&!!C[yt(r)]}function nn(r){if(!q(r))return yn(r);var s=oe(r),o=[];for(var d in r)d=="constructor"&&(s||!j.call(r,d))||o.push(d);return o}function se(r,s,o,d,m){r!==s&&Ze(s,function(w,x){if(m||(m=new X),q(w))rn(r,s,x,o,se,d,m);else{var g=d?d(Et(r,x),w,x+"",r,s,m):void 0;g===void 0&&(g=w),Ft(r,x,g)}},de)}function rn(r,s,o,d,m,w,x){var g=Et(r,o),S=Et(s,o),V=x.get(S);if(V){Ft(r,o,V);return}var A=w?w(g,S,o+"",r,s,x):void 0,it=A===void 0;if(it){var zt=Lt(S),Nt=!zt&&le(S),he=!zt&&!Nt&&ue(S);A=S,zt||Nt||he?Lt(g)?A=g:Sn(g)?A=un(g):Nt?(it=!1,A=on(S,!0)):he?(it=!1,A=cn(S,!0)):A=[]:Tn(S)||Mt(S)?(A=g,Mt(g)?A=Rn(g):(!q(g)||kt(g))&&(A=vn(S))):it=!1}it&&(x.set(S,A),m(A,S,d,w,x),x.delete(S)),Ft(r,o,A)}function an(r,s){return wn(Cn(r,s,pe),r+"")}var sn=gt?function(r,s){return gt(r,"toString",{configurable:!0,enumerable:!1,value:An(s),writable:!0})}:pe;function on(r,s){if(s)return r.slice();var o=r.length,d=Zt?Zt(o):new r.constructor(o);return r.copy(d),d}function ln(r){var s=new r.constructor(r.byteLength);return new Qt(s).set(new Qt(r)),s}function cn(r,s){var o=s?ln(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.length)}function un(r,s){var o=-1,d=r.length;for(s||(s=Array(d));++o<d;)s[o]=r[o];return s}function dn(r,s,o,d){var m=!o;o||(o={});for(var w=-1,x=s.length;++w<x;){var g=s[w],S=d?d(o[g],r[g],g,o,r):void 0;S===void 0&&(S=r[g]),m?It(o,g,S):Qe(o,g,S)}return o}function pn(r){return an(function(s,o){var d=-1,m=o.length,w=m>1?o[m-1]:void 0,x=m>2?o[2]:void 0;for(w=r.length>3&&typeof w=="function"?(m--,w):void 0,x&&_n(o[0],o[1],x)&&(w=m<3?void 0:w,m=1),s=Object(s);++d<m;){var g=o[d];g&&r(s,g,d,w)}return s})}function hn(r){return function(s,o,d){for(var m=-1,w=Object(s),x=d(s),g=x.length;g--;){var S=x[r?g:++m];if(o(w[S],S,w)===!1)break}return s}}function bt(r,s){var o=r.__data__;return gn(s)?o[typeof s=="string"?"string":"hash"]:o.map}function jt(r,s){var o=be(r,s);return tn(o)?o:void 0}function fn(r){var s=j.call(r,U),o=r[U];try{r[U]=void 0;var d=!0}catch{}var m=Jt.call(r);return d&&(s?r[U]=o:delete r[U]),m}function vn(r){return typeof r.constructor=="function"&&!oe(r)?$e(te(r)):{}}function ie(r,s){var o=typeof r;return s=s??p,!!s&&(o=="number"||o!="symbol"&&F.test(r))&&r>-1&&r%1==0&&r<s}function _n(r,s,o){if(!q(o))return!1;var d=typeof s;return(d=="number"?Bt(o)&&ie(s,o.length):d=="string"&&s in o)?Ct(o[s],r):!1}function gn(r){var s=typeof r;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?r!=="__proto__":r===null}function mn(r){return!!Xt&&Xt in r}function oe(r){var s=r&&r.constructor,o=typeof s=="function"&&s.prototype||ft;return r===o}function yn(r){var s=[];if(r!=null)for(var o in Object(r))s.push(o);return s}function bn(r){return Jt.call(r)}function Cn(r,s,o){return s=ne(s===void 0?r.length-1:s,0),function(){for(var d=arguments,m=-1,w=ne(d.length-s,0),x=Array(w);++m<w;)x[m]=d[s+m];m=-1;for(var g=Array(s+1);++m<s;)g[m]=d[m];return g[s]=o(x),ge(r,this,g)}}function Et(r,s){if(!(s==="constructor"&&typeof r[s]=="function")&&s!="__proto__")return r[s]}var wn=On(sn);function On(r){var s=0,o=0;return function(){var d=Ae(),m=f-(d-o);if(o=d,m>0){if(++s>=u)return arguments[0]}else s=0;return r.apply(void 0,arguments)}}function xn(r){if(r!=null){try{return vt.call(r)}catch{}try{return r+""}catch{}}return""}function Ct(r,s){return r===s||r!==r&&s!==s}var Mt=ae(function(){return arguments}())?ae:function(r){return st(r)&&j.call(r,"callee")&&!Te.call(r,"callee")},Lt=Array.isArray;function Bt(r){return r!=null&&ce(r.length)&&!kt(r)}function Sn(r){return st(r)&&Bt(r)}var le=De||$n;function kt(r){if(!q(r))return!1;var s=yt(r);return s==k||s==z||s==b||s==Rt}function ce(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=p}function q(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}function st(r){return r!=null&&typeof r=="object"}function Tn(r){if(!st(r)||yt(r)!=ut)return!1;var s=te(r);if(s===null)return!0;var o=j.call(s,"constructor")&&s.constructor;return typeof o=="function"&&o instanceof o&&vt.call(o)==xe}var ue=Wt?ye(Wt):en;function Rn(r){return dn(r,de(r))}function de(r){return Bt(r)?Ye(r,!0):nn(r)}var Dn=pn(function(r,s,o){se(r,s,o)});function An(r){return function(){return r}}function pe(r){return r}function $n(){return!1}a.exports=Dn})(wt,wt.exports);var Bn=wt.exports;const kn=fe(Bn);class Q{constructor(){this.defaults={area:{theme:"maximized",legend:"none",backgroundColor:"transparent",colors:["#058DC7"],areaOpacity:.1,pointSize:7,lineWidth:4,chartArea:{},hAxis:{textPosition:"in",textStyle:{color:"#058DC7"},baselineColor:"#fff",gridlines:{color:"none"}},vAxis:{textPosition:"in",textStyle:{color:"#058DC7"},baselineColor:"#ccc",gridlines:{color:"#fafafa"},minValue:0,maxValue:10,format:"#"}},geo:{displayMode:"auto"},pie:{theme:"maximized",height:282,pieHole:.5,legend:{alignment:"center",position:"top"},chartArea:{top:40,height:"82%"},sliceVisibilityThreshold:1/120},table:{page:"auto",pageSize:10}}}area(t){var e=JSON.parse(JSON.stringify(this.defaults.area));switch(t){case"week":e.hAxis.format="E";break;case"month":e.hAxis.format="MMM d";break;case"year":e.hAxis.format="MMM yy";break}return e}table(){return this.defaults.table}geo(t){var e=this.defaults.geo;switch(t){case"country":e.resolution="countries",e.displayMode="regions";break;case"continent":case"continentId":e.resolution="continents",e.displayMode="regions";break}return e}pie(){return this.defaults.pie}field(){var t=JSON.parse(JSON.stringify(this.defaults.area));return kn(t,{height:120,hAxis:{format:"MMM d"}})}}function T(a,t,e,i,u,f,p,v){var _=typeof a=="function"?a.options:a;t&&(_.render=t,_.staticRenderFns=e,_._compiled=!0),i&&(_.functional=!0),f&&(_._scopeId="data-v-"+f);var b;if(p?(b=function(D){D=D||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!D&&typeof __VUE_SSR_CONTEXT__<"u"&&(D=__VUE_SSR_CONTEXT__),u&&u.call(this,D),D&&D._registeredComponents&&D._registeredComponents.add(p)},_._ssrRegister=b):u&&(b=v?function(){u.call(this,(_.functional?this.parent:this).$root.$options.shadowRoot)}:u),b)if(_.functional){_._injectStyles=b;var B=_.render;_.render=function(k,z){return b.call(z),B(k,z)}}else{var I=_.beforeCreate;_.beforeCreate=I?[].concat(I,b):[b]}return{exports:a,options:_}}google.charts.load("current",{packages:["corechart","table","geochart"],language:Analytics.chartLanguage,mapsApiKey:Analytics.mapsApiKey});const zn={props:{chartType:{type:String,default:"area"},chartData:{type:[Array,Object],required:!0},chartScale:{type:String,default:null},chartOptions:{type:Object,default:()=>({})}},computed:{isChartTypeSupported(){return this.chartType==="area"||this.chartType==="pie"||this.chartType==="table"||this.chartType==="geo"||this.chartType==="column"}},mounted(){if(!this.isChartTypeSupported)return null;google.charts.setOnLoadCallback(()=>this.drawChart())},created(){window.addEventListener("resize",this.onResize)},destroyed(){window.removeEventListener("resize",this.onResize)},methods:{onResize(){this.drawChart()},drawChart(){switch(this.chartType){case"area":{this.drawAreaChart();break}case"pie":{this.drawPieChart();break}case"table":{this.drawTableChart();break}case"geo":{this.drawGeoChart();break}case"column":{this.drawColumnChart();break}}},drawAreaChart(){const a=new google.visualization.AreaChart(this.$refs.chart),t={...this.chartOptions};t.hAxis.ticks=this.generateAreaTicks();const e=this.formatAreaDataTable(this.chartData);a.draw(e,t)},drawPieChart(){new google.visualization.PieChart(this.$refs.chart).draw(this.chartData,this.chartOptions)},drawTableChart(){new google.visualization.Table(this.$refs.chart).draw(this.chartData,this.chartOptions)},drawGeoChart(){new google.visualization.GeoChart(this.$refs.chart).draw(this.chartData,this.chartOptions)},drawColumnChart(){new google.visualization.ColumnChart(this.$refs.chart).draw(this.chartData,this.chartOptions)},generateAreaTicks(){const a=[];for(let t=0;t<this.chartData.getNumberOfRows();t++){const e=this.chartData.getValue(t,0);a.push(e)}return a},formatAreaDataTable(a){if(this.chartScale==="year"){var t=new google.visualization.DateFormat({pattern:"MMMM yyyy"});t.format(a,0)}return a}}};var Nn=function(){var t=this,e=t._self._c;return e("div",[t.isChartTypeSupported?t._e():[t._v(" Chart type “"+t._s(t.chartType)+"” is not supported. ")],e("div",{ref:"chart",class:{"da-hidden":!t.isChartTypeSupported}})],2)},Un=[],Hn=T(zn,Nn,Un,!1,null,null,null,null);const G=Hn.exports;const qn={components:{AnalyticsChart:G},data(){return{loading:!1,reportResponse:null,pluginOptions:null,totalRevenue:0,totalRevenuePerTransaction:0,totalTransactions:0,totalTransactionsPerSession:0,chartData:null}},computed:{siteName(){return this.reportResponse?this.reportResponse.data.reportData.view:null},chartOptions(){return new Q().area(this.pluginOptions.period)}},mounted(){this.getReport()},methods:{t:xt,getReport(){this.loading=!0,lt.getEcommerceReport({sourceId:this.pluginOptions.sourceId,period:this.pluginOptions.period}).then(a=>{this.loading=!1,this.reportResponse=a;const t=Ot(this.pluginOptions.currencyDefinition);this.totalRevenue=L(t,"currency",a.data.totalRevenue),this.totalRevenuePerTransaction=L(t,"currency",a.data.totalRevenuePerTransaction),this.totalTransactions=L(t,"number",a.data.totalTransactions),this.totalTransactionsPerSession=L(t,"number",a.data.totalTransactionsPerSession);const e=[];a.data.reportData.chart.rows.forEach(u=>{e.push([u[0],u[1]])});const i={cols:[a.data.reportData.chart.cols[0],a.data.reportData.chart.cols[1]],rows:e};this.chartData=Y(i,t)})}}};var Gn=function(){var t=this,e=t._self._c;return e("div",[t.loading?[t._v(" "+t._s(t.t("analytics","Loading…"))+" ")]:t._e(),t.reportResponse?[e("div",[t._v(" "+t._s(t.reportResponse.data.reportData.periodLabel)+" ")]),e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(t.siteName)+" ")]),t.chartData?[e("analytics-chart",{staticClass:"da-mt-4",attrs:{"chart-type":"area","chart-data":t.chartData,"chart-options":t.chartOptions,"chart-scale":t.reportResponse.data.reportData.period}})]:t._e(),e("div",{staticClass:"tiles"},[e("div",{staticClass:"tile"},[e("div",{staticClass:"label light"},[t._v(" "+t._s(t.t("analytics","Total Revenue"))+" ")]),e("div",{staticClass:"value revenue"},[t._v(" "+t._s(t.totalRevenue)+" ")])]),e("div",{staticClass:"tile"},[e("div",{staticClass:"label light"},[t._v(" "+t._s(t.t("analytics","Revenue Per Transaction"))+" ")]),e("div",{staticClass:"value revenue-per-transaction"},[t._v(" "+t._s(t.totalRevenuePerTransaction)+" ")])]),e("div",{staticClass:"tile"},[e("div",{staticClass:"label light"},[t._v(" "+t._s(t.t("analytics","Transactions"))+" ")]),e("div",{staticClass:"value transactions"},[t._v(" "+t._s(t.totalTransactions)+" ")])]),e("div",{staticClass:"tile"},[e("div",{staticClass:"label light"},[t._v(" "+t._s(t.t("analytics","Transactions Per Session"))+" ")]),e("div",{staticClass:"value transactions-per-session"},[t._v(" "+t._s(t.totalTransactionsPerSession)+" ")])])])]:t._e()],2)},Kn=[],Wn=T(qn,Gn,Kn,!1,null,null,null,null);const Xn=Wn.exports,Jn={props:{reportResponse:{type:Object,required:!0}}};var Yn=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"da-font-bold"},[t._v(" "+t._s(t.reportResponse.data.metric)+" ")]),e("div",[t._v(t._s(t.reportResponse.data.periodLabel))]),e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(t.reportResponse.data.view)+" ")])])},Qn=[],Zn=T(Jn,Yn,Qn,!1,null,null,null,null);const St=Zn.exports,tr={components:{ReportHeader:St,AnalyticsChart:G},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{chartData:null}},computed:{chartOptions(){return new Q().area(this.reportResponse.data.period)}},mounted(){this.parseReportResponse()},methods:{parseReportResponse(){this.chartData=Y(this.reportResponse.data.chart,this.localeDefinition)}}};var er=function(){var t=this,e=t._self._c;return e("div",[e("report-header",{attrs:{"report-response":t.reportResponse}}),e("div",{staticClass:"da-mt-4"},[e("div",[t.chartData?[e("analytics-chart",{staticClass:"-da-mx-[24px] -da-mb-[24px]",attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])],1)},nr=[],rr=T(tr,er,nr,!1,null,null,null,null);const ar=rr.exports,sr={props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{pluginOptions:null}},computed:{counterValue(){var i;if(!this.reportResponse||!this.reportResponse.data||!this.reportResponse.data.report)return null;const a=this.reportResponse.data.report;let t=0;(i=a.totals[0][0])!=null&&i.value&&(t=a.totals[0][0].value);const e=a.cols[0].type;return L(this.localeDefinition,e,t)}}};var ir=function(){var t=this,e=t._self._c;return t.reportResponse.data?e("div",[e("div",{staticClass:"da-text-center"},[e("div",{staticClass:"da-text-5xl"},[t._v(" "+t._s(t.counterValue)+" ")]),e("div",{staticClass:"da-mt-2"},[e("strong",[t._v(t._s(t.reportResponse.data.metric))]),t._v(" "+t._s(t.reportResponse.data.periodLabel)+" ")]),e("div",{staticClass:"da-text-gray-500 da-text-sm da-mt-1"},[t._v(" "+t._s(t.reportResponse.data.source)+" ")])])]):t._e()},or=[],lr=T(sr,ir,or,!1,null,null,null,null);const cr=lr.exports,ur={components:{ReportHeader:St,AnalyticsChart:G},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{chartData:null}},computed:{chartOptions(){return new Q().pie()}},mounted(){this.chartData=Y(this.reportResponse.data.chart,this.localeDefinition)}};var dr=function(){var t=this,e=t._self._c;return e("div",[e("report-header",{attrs:{"report-response":t.reportResponse}}),e("div",{staticClass:"da-mt-4"},[e("div",[t.chartData?[e("analytics-chart",{attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])],1)},pr=[],hr=T(ur,dr,pr,!1,null,null,null,null);const fr=hr.exports;const vr={components:{ReportHeader:St,AnalyticsChart:G},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{chartData:null}},computed:{chartOptions(){return new Q().table()}},mounted(){this.chartData=Y(this.reportResponse.data.chart,this.localeDefinition)}};var _r=function(){var t=this,e=t._self._c;return e("div",[e("report-header",{attrs:{"report-response":t.reportResponse}}),e("div",{staticClass:"da-mt-4"},[e("div",[t.chartData?[e("analytics-chart",{staticClass:"table-report",attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])],1)},gr=[],mr=T(vr,_r,gr,!1,null,null,null,null);const yr=mr.exports,br={components:{ReportHeader:St,AnalyticsChart:G},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{chartData:null}},computed:{chartOptions(){return new Q().geo(this.reportResponse.data.dimensionRaw)}},mounted(){this.chartData=Y(this.reportResponse.data.chart,this.localeDefinition)}};var Cr=function(){var t=this,e=t._self._c;return e("div",[e("report-header",{attrs:{"report-response":t.reportResponse}}),e("div",{staticClass:"da-mt-4"},[e("div",[t.chartData?[e("analytics-chart",{attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])],1)},wr=[],Or=T(br,Cr,wr,!1,null,null,null,null);const xr=Or.exports,Sr={components:{GeoReport:xr,TableReport:yr,PieReport:fr,CounterReport:cr,AreaReport:ar},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},computed:{reportType(){return this.reportResponse?this.reportResponse.data.type:null}}};var Tr=function(){var t=this,e=t._self._c;return e("div",[t.reportType==="area"?[e("area-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t.reportType==="counter"?[e("counter-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t.reportType==="pie"?[e("pie-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t.reportType==="table"?[e("table-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t.reportType==="geo"?[e("geo-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t._e()],2)},Rr=[],Dr=T(Sr,Tr,Rr,!1,null,null,null,null);const Ar=Dr.exports,$r={components:{AnalyticsReport:Ar},data(){return{loading:!0,reportResponse:null,pluginOptions:null}},computed:{requestCriteria(){return this.pluginOptions.request},localeDefinition(){return Ot(this.pluginOptions.currencyDefinition)}},watch:{requestCriteria(){this.getReport()}},mounted(){this.getReport()},methods:{getReport(){this.requestCriteria&&(this.loading=!0,lt.getReport(this.requestCriteria).then(a=>{this.loading=!1,this.reportResponse=a}))}}};var Pr=function(){var t=this,e=t._self._c;return t.requestCriteria&&t.requestCriteria.chart?e("div",[t.loading?[e("div",[t._v("Loading…")])]:[e("analytics-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]],2):t._e()},Vr=[],Fr=T($r,Pr,Vr,!1,null,null,null,null);const Ir=Fr.exports;var ve={exports:{}};(function(a,t){(function(e,i){a.exports=i()})(typeof self<"u"?self:ot,function(){return(()=>{var e={646:p=>{p.exports=function(v){if(Array.isArray(v)){for(var _=0,b=new Array(v.length);_<v.length;_++)b[_]=v[_];return b}}},713:p=>{p.exports=function(v,_,b){return _ in v?Object.defineProperty(v,_,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[_]=b,v}},860:p=>{p.exports=function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}},206:p=>{p.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},319:(p,v,_)=>{var b=_(646),B=_(860),I=_(206);p.exports=function(D){return b(D)||B(D)||I()}},8:p=>{function v(_){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p.exports=v=function(b){return typeof b}:p.exports=v=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},v(_)}p.exports=v}},i={};function u(p){var v=i[p];if(v!==void 0)return v.exports;var _=i[p]={exports:{}};return e[p](_,_.exports,u),_.exports}u.n=p=>{var v=p&&p.__esModule?()=>p.default:()=>p;return u.d(v,{a:v}),v},u.d=(p,v)=>{for(var _ in v)u.o(v,_)&&!u.o(p,_)&&Object.defineProperty(p,_,{enumerable:!0,get:v[_]})},u.o=(p,v)=>Object.prototype.hasOwnProperty.call(p,v),u.r=p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})};var f={};return(()=>{u.r(f),u.d(f,{VueSelect:()=>pt,default:()=>$t,mixins:()=>At});var p=u(319),v=u.n(p),_=u(8),b=u.n(_),B=u(713),I=u.n(B);const D={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer:function(){this.autoscroll&&this.maybeAdjustScroll()},open:function(n){var l=this;this.autoscroll&&n&&this.$nextTick(function(){return l.maybeAdjustScroll()})}},methods:{maybeAdjustScroll:function(){var n,l=((n=this.$refs.dropdownMenu)===null||n===void 0?void 0:n.children[this.typeAheadPointer])||!1;if(l){var c=this.getDropdownViewport(),h=l.getBoundingClientRect(),y=h.top,O=h.bottom,M=h.height;if(y<c.top)return this.$refs.dropdownMenu.scrollTop=l.offsetTop;if(O>c.bottom)return this.$refs.dropdownMenu.scrollTop=l.offsetTop-(c.height-M)}},getDropdownViewport:function(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},k={data:function(){return{typeAheadPointer:-1}},watch:{filteredOptions:function(){for(var n=0;n<this.filteredOptions.length;n++)if(this.selectable(this.filteredOptions[n])){this.typeAheadPointer=n;break}},open:function(n){n&&this.typeAheadToLastSelected()},selectedValue:function(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp:function(){for(var n=this.typeAheadPointer-1;n>=0;n--)if(this.selectable(this.filteredOptions[n])){this.typeAheadPointer=n;break}},typeAheadDown:function(){for(var n=this.typeAheadPointer+1;n<this.filteredOptions.length;n++)if(this.selectable(this.filteredOptions[n])){this.typeAheadPointer=n;break}},typeAheadSelect:function(){var n=this.filteredOptions[this.typeAheadPointer];n&&this.selectable(n)&&this.select(n)},typeAheadToLastSelected:function(){var n=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1;n!==-1&&(this.typeAheadPointer=n)}}},z={props:{loading:{type:Boolean,default:!1}},data:function(){return{mutableLoading:!1}},watch:{search:function(){this.$emit("search",this.search,this.toggleLoading)},loading:function(n){this.mutableLoading=n}},methods:{toggleLoading:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.mutableLoading=n??!this.mutableLoading}}};function Z(n,l,c,h,y,O,M,tt){var P,R=typeof n=="function"?n.options:n;if(l&&(R.render=l,R.staticRenderFns=c,R._compiled=!0),h&&(R.functional=!0),O&&(R._scopeId="data-v-"+O),M?(P=function(F){(F=F||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||typeof __VUE_SSR_CONTEXT__>"u"||(F=__VUE_SSR_CONTEXT__),y&&y.call(this,F),F&&F._registeredComponents&&F._registeredComponents.add(M)},R._ssrRegister=P):y&&(P=tt?function(){y.call(this,(R.functional?this.parent:this).$root.$options.shadowRoot)}:y),P)if(R.functional){R._injectStyles=P;var et=R.render;R.render=function(F,C){return P.call(C),et(F,C)}}else{var ht=R.beforeCreate;R.beforeCreate=ht?[].concat(ht,P):[P]}return{exports:n,options:R}}const ct={Deselect:Z({},function(){var n=this.$createElement,l=this._self._c||n;return l("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"}},[l("path",{attrs:{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"}})])},[],!1,null,null,null).exports,OpenIndicator:Z({},function(){var n=this.$createElement,l=this._self._c||n;return l("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"}},[l("path",{attrs:{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"}})])},[],!1,null,null,null).exports},Tt={inserted:function(n,l,c){var h=c.context;if(h.appendToBody){var y=h.$refs.toggle.getBoundingClientRect(),O=y.height,M=y.top,tt=y.left,P=y.width,R=window.scrollX||window.pageXOffset,et=window.scrollY||window.pageYOffset;n.unbindPosition=h.calculatePosition(n,h,{width:P+"px",left:R+tt+"px",top:et+M+O+"px"}),document.body.appendChild(n)}},unbind:function(n,l,c){c.context.appendToBody&&(n.unbindPosition&&typeof n.unbindPosition=="function"&&n.unbindPosition(),n.parentNode&&n.parentNode.removeChild(n))}},ut=function(n){var l={};return Object.keys(n).sort().forEach(function(c){l[c]=n[c]}),JSON.stringify(l)};var Rt=0;const Dt=function(){return++Rt};function dt(n,l){var c=Object.keys(n);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(n);l&&(h=h.filter(function(y){return Object.getOwnPropertyDescriptor(n,y).enumerable})),c.push.apply(c,h)}return c}function N(n){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?dt(Object(c),!0).forEach(function(h){I()(n,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(c)):dt(Object(c)).forEach(function(h){Object.defineProperty(n,h,Object.getOwnPropertyDescriptor(c,h))})}return n}const pt=Z({components:N({},ct),directives:{appendToBody:Tt},mixins:[D,k,z],props:{value:{},components:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:function(n){return n}},selectable:{type:Function,default:function(n){return!0}},getOptionLabel:{type:Function,default:function(n){return b()(n)==="object"?n.hasOwnProperty(this.label)?n[this.label]:console.warn('[vue-select warn]: Label key "option.'.concat(this.label,'" does not')+" exist in options object ".concat(JSON.stringify(n),`.
`)+"https://vue-select.org/api/props.html#getoptionlabel"):n}},getOptionKey:{type:Function,default:function(n){if(b()(n)!=="object")return n;try{return n.hasOwnProperty("id")?n.id:ut(n)}catch(l){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,n,l)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default:function(n,l,c){return(l||"").toLocaleLowerCase().indexOf(c.toLocaleLowerCase())>-1}},filter:{type:Function,default:function(n,l){var c=this;return n.filter(function(h){var y=c.getOptionLabel(h);return typeof y=="number"&&(y=y.toString()),c.filterBy(h,y,l)})}},createOption:{type:Function,default:function(n){return b()(this.optionList[0])==="object"?I()({},this.label,n):n}},resetOnOptionsChange:{default:!1,validator:function(n){return["function","boolean"].includes(b()(n))}},clearSearchOnBlur:{type:Function,default:function(n){var l=n.clearSearchOnSelect,c=n.multiple;return l&&!c}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:function(){return[13]}},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:function(n,l){return n}},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default:function(n,l,c){var h=c.width,y=c.top,O=c.left;n.style.top=y,n.style.left=O,n.style.width=h}},dropdownShouldOpen:{type:Function,default:function(n){var l=n.noDrop,c=n.open,h=n.mutableLoading;return!l&&c&&!h}},uid:{type:[String,Number],default:function(){return Dt()}}},data:function(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[]}},computed:{isTrackingValues:function(){return this.value===void 0||this.$options.propsData.hasOwnProperty("reduce")},selectedValue:function(){var n=this.value;return this.isTrackingValues&&(n=this.$data._value),n!=null&&n!==""?[].concat(n):[]},optionList:function(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl:function(){return this.$scopedSlots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope:function(){var n=this,l={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:N({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":"vs".concat(this.uid,"__combobox"),"aria-controls":"vs".concat(this.uid,"__listbox"),ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":"vs".concat(this.uid,"__option-").concat(this.typeAheadPointer)}:{}),events:{compositionstart:function(){return n.isComposing=!0},compositionend:function(){return n.isComposing=!1},keydown:this.onSearchKeyDown,keypress:this.onSearchKeyPress,blur:this.onSearchBlur,focus:this.onSearchFocus,input:function(c){return n.search=c.target.value}}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:l,listFooter:l,header:N({},l,{deselect:this.deselect}),footer:N({},l,{deselect:this.deselect})}},childComponents:function(){return N({},ct,{},this.components)},stateClasses:function(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching:function(){return!!this.search},dropdownOpen:function(){return this.dropdownShouldOpen(this)},searchPlaceholder:function(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions:function(){var n=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return n;var l=this.search.length?this.filter(n,this.search,this):n;if(this.taggable&&this.search.length){var c=this.createOption(this.search);this.optionExists(c)||l.unshift(c)}return l},isValueEmpty:function(){return this.selectedValue.length===0},showClearButton:function(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options:function(n,l){var c=this;!this.taggable&&(typeof c.resetOnOptionsChange=="function"?c.resetOnOptionsChange(n,l,c.selectedValue):c.resetOnOptionsChange)&&this.clearSelection(),this.value&&this.isTrackingValues&&this.setInternalValueFromOptions(this.value)},value:{immediate:!0,handler:function(n){this.isTrackingValues&&this.setInternalValueFromOptions(n)}},multiple:function(){this.clearSelection()},open:function(n){this.$emit(n?"open":"close")},search:function(n){n.length&&(this.open=!0)}},created:function(){this.mutableLoading=this.loading,this.$on("option:created",this.pushTag)},methods:{setInternalValueFromOptions:function(n){var l=this;Array.isArray(n)?this.$data._value=n.map(function(c){return l.findOptionFromReducedValue(c)}):this.$data._value=this.findOptionFromReducedValue(n)},select:function(n){this.$emit("option:selecting",n),this.isOptionSelected(n)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(n):(this.taggable&&!this.optionExists(n)&&this.$emit("option:created",n),this.multiple&&(n=this.selectedValue.concat(n)),this.updateValue(n),this.$emit("option:selected",n)),this.onAfterSelect(n)},deselect:function(n){var l=this;this.$emit("option:deselecting",n),this.updateValue(this.selectedValue.filter(function(c){return!l.optionComparator(c,n)})),this.$emit("option:deselected",n)},clearSelection:function(){this.updateValue(this.multiple?[]:null)},onAfterSelect:function(n){var l=this;this.closeOnSelect&&(this.open=!this.open),this.clearSearchOnSelect&&(this.search=""),this.noDrop&&this.multiple&&this.$nextTick(function(){return l.$refs.search.focus()})},updateValue:function(n){var l=this;this.value===void 0&&(this.$data._value=n),n!==null&&(n=Array.isArray(n)?n.map(function(c){return l.reduce(c)}):this.reduce(n)),this.$emit("input",n)},toggleDropdown:function(n){var l=n.target!==this.searchEl;l&&n.preventDefault();var c=[].concat(v()(this.$refs.deselectButtons||[]),v()([this.$refs.clearButton]));this.searchEl===void 0||c.filter(Boolean).some(function(h){return h.contains(n.target)||h===n.target})?n.preventDefault():this.open&&l?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected:function(n){var l=this;return this.selectedValue.some(function(c){return l.optionComparator(c,n)})},isOptionDeselectable:function(n){return this.isOptionSelected(n)&&this.deselectFromDropdown},optionComparator:function(n,l){return this.getOptionKey(n)===this.getOptionKey(l)},findOptionFromReducedValue:function(n){var l=this,c=[].concat(v()(this.options),v()(this.pushedTags)).filter(function(h){return JSON.stringify(l.reduce(h))===JSON.stringify(n)});return c.length===1?c[0]:c.find(function(h){return l.optionComparator(h,l.$data._value)})||n},closeSearchOptions:function(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue:function(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){var n=null;this.multiple&&(n=v()(this.selectedValue.slice(0,this.selectedValue.length-1))),this.updateValue(n)}},optionExists:function(n){var l=this;return this.optionList.some(function(c){return l.optionComparator(c,n)})},normalizeOptionForSlot:function(n){return b()(n)==="object"?n:I()({},this.label,n)},pushTag:function(n){this.pushedTags.push(n)},onEscape:function(){this.search.length?this.search="":this.open=!1},onSearchBlur:function(){if(!this.mousedown||this.searching){var n=this.clearSearchOnSelect,l=this.multiple;return this.clearSearchOnBlur({clearSearchOnSelect:n,multiple:l})&&(this.search=""),void this.closeSearchOptions()}this.mousedown=!1,this.search.length!==0||this.options.length!==0||this.closeSearchOptions()},onSearchFocus:function(){this.open=!0,this.$emit("search:focus")},onMousedown:function(){this.mousedown=!0},onMouseUp:function(){this.mousedown=!1},onSearchKeyDown:function(n){var l=this,c=function(O){return O.preventDefault(),!l.isComposing&&l.typeAheadSelect()},h={8:function(O){return l.maybeDeleteValue()},9:function(O){return l.onTab()},27:function(O){return l.onEscape()},38:function(O){if(O.preventDefault(),l.open)return l.typeAheadUp();l.open=!0},40:function(O){if(O.preventDefault(),l.open)return l.typeAheadDown();l.open=!0}};this.selectOnKeyCodes.forEach(function(O){return h[O]=c});var y=this.mapKeydown(h,this);if(typeof y[n.keyCode]=="function")return y[n.keyCode](n)},onSearchKeyPress:function(n){this.open||n.keyCode!==32||(n.preventDefault(),this.open=!0)}}},function(){var n=this,l=n.$createElement,c=n._self._c||l;return c("div",{staticClass:"v-select",class:n.stateClasses,attrs:{dir:n.dir}},[n._t("header",null,null,n.scope.header),n._v(" "),c("div",{ref:"toggle",staticClass:"vs__dropdown-toggle",attrs:{id:"vs"+n.uid+"__combobox",role:"combobox","aria-expanded":n.dropdownOpen.toString(),"aria-owns":"vs"+n.uid+"__listbox","aria-label":"Search for option"},on:{mousedown:function(h){return n.toggleDropdown(h)}}},[c("div",{ref:"selectedOptions",staticClass:"vs__selected-options"},[n._l(n.selectedValue,function(h){return n._t("selected-option-container",[c("span",{key:n.getOptionKey(h),staticClass:"vs__selected"},[n._t("selected-option",[n._v(`
            `+n._s(n.getOptionLabel(h))+`
          `)],null,n.normalizeOptionForSlot(h)),n._v(" "),n.multiple?c("button",{ref:"deselectButtons",refInFor:!0,staticClass:"vs__deselect",attrs:{disabled:n.disabled,type:"button",title:"Deselect "+n.getOptionLabel(h),"aria-label":"Deselect "+n.getOptionLabel(h)},on:{click:function(y){return n.deselect(h)}}},[c(n.childComponents.Deselect,{tag:"component"})],1):n._e()],2)],{option:n.normalizeOptionForSlot(h),deselect:n.deselect,multiple:n.multiple,disabled:n.disabled})}),n._v(" "),n._t("search",[c("input",n._g(n._b({staticClass:"vs__search"},"input",n.scope.search.attributes,!1),n.scope.search.events))],null,n.scope.search)],2),n._v(" "),c("div",{ref:"actions",staticClass:"vs__actions"},[c("button",{directives:[{name:"show",rawName:"v-show",value:n.showClearButton,expression:"showClearButton"}],ref:"clearButton",staticClass:"vs__clear",attrs:{disabled:n.disabled,type:"button",title:"Clear Selected","aria-label":"Clear Selected"},on:{click:n.clearSelection}},[c(n.childComponents.Deselect,{tag:"component"})],1),n._v(" "),n._t("open-indicator",[n.noDrop?n._e():c(n.childComponents.OpenIndicator,n._b({tag:"component"},"component",n.scope.openIndicator.attributes,!1))],null,n.scope.openIndicator),n._v(" "),n._t("spinner",[c("div",{directives:[{name:"show",rawName:"v-show",value:n.mutableLoading,expression:"mutableLoading"}],staticClass:"vs__spinner"},[n._v("Loading...")])],null,n.scope.spinner)],2)]),n._v(" "),c("transition",{attrs:{name:n.transition}},[n.dropdownOpen?c("ul",{directives:[{name:"append-to-body",rawName:"v-append-to-body"}],key:"vs"+n.uid+"__listbox",ref:"dropdownMenu",staticClass:"vs__dropdown-menu",attrs:{id:"vs"+n.uid+"__listbox",role:"listbox",tabindex:"-1"},on:{mousedown:function(h){return h.preventDefault(),n.onMousedown(h)},mouseup:n.onMouseUp}},[n._t("list-header",null,null,n.scope.listHeader),n._v(" "),n._l(n.filteredOptions,function(h,y){return c("li",{key:n.getOptionKey(h),staticClass:"vs__dropdown-option",class:{"vs__dropdown-option--deselect":n.isOptionDeselectable(h)&&y===n.typeAheadPointer,"vs__dropdown-option--selected":n.isOptionSelected(h),"vs__dropdown-option--highlight":y===n.typeAheadPointer,"vs__dropdown-option--disabled":!n.selectable(h)},attrs:{id:"vs"+n.uid+"__option-"+y,role:"option","aria-selected":y===n.typeAheadPointer||null},on:{mouseover:function(O){n.selectable(h)&&(n.typeAheadPointer=y)},click:function(O){O.preventDefault(),O.stopPropagation(),n.selectable(h)&&n.select(h)}}},[n._t("option",[n._v(`
          `+n._s(n.getOptionLabel(h))+`
        `)],null,n.normalizeOptionForSlot(h))],2)}),n._v(" "),n.filteredOptions.length===0?c("li",{staticClass:"vs__no-options"},[n._t("no-options",[n._v(`
          Sorry, no matching options.
        `)],null,n.scope.noOptions)],2):n._e(),n._v(" "),n._t("list-footer",null,null,n.scope.listFooter)],2):c("ul",{staticStyle:{display:"none",visibility:"hidden"},attrs:{id:"vs"+n.uid+"__listbox",role:"listbox"}})]),n._v(" "),n._t("footer",null,null,n.scope.footer)],2)},[],!1,null,null,null).exports,At={ajax:z,pointer:k,pointerScroll:D},$t=pt})(),f})()})})(ve);var jr=ve.exports;const Er=fe(jr);const Mr={};var Lr=function(){var t=this,e=t._self._c;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",fill:"currentColor"}},[e("path",{attrs:{d:"M304 240V.6c5.3-.4 10.6-.6 16-.6C443.7 0 544 100.3 544 224c0 5.4-.2 10.7-.6 16H304zM32 272C32 144.8 130.9 40.8 256 32.5V288L425 457c-41.5 34.4-94.8 55-153 55C139.5 512 32 404.6 32 272zm288 16H575.5C571 355.9 538.3 416.1 489 457L320 288z"}})])},Br=[],kr=T(Mr,Lr,Br,!1,null,null,null,null);const zr=kr.exports,Nr={};var Ur=function(){var t=this,e=t._self._c;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor"}},[e("path",{attrs:{d:"M55.7 199.7L96 240h48l48 48v64l32 32v64h64V400l64-64V256H224l-32-32V192h80V160l-32-32V112l32-32V48.6c-5.3-.4-10.6-.6-16-.6C160.6 48 80.3 112.2 55.7 199.7zM464 256c0-36.9-9.6-71.5-26.4-101.6L400 192v80h63.4c.4-5.3 .6-10.6 .6-16zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"}})])},Hr=[],qr=T(Nr,Ur,Hr,!1,null,null,null,null);const Gr=qr.exports,Kr={};var Wr=function(){var t=this,e=t._self._c;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor"}},[e("path",{attrs:{d:"M48 264V160H232V264H48zm0 48H232V432H64c-8.8 0-16-7.2-16-16V312zM280 432V312H464V416c0 8.8-7.2 16-16 16H280zM464 264H280V160H464V264zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"}})])},Xr=[],Jr=T(Kr,Wr,Xr,!1,null,null,null,null);const Yr=Jr.exports,Qr={};var Zr=function(){var t=this,e=t._self._c;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor"}},[e("path",{attrs:{d:"M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zm191.6 33.2c-12.6-4.2-26.2 2.6-30.4 15.2l-48 144c-2.4 7.3-1.2 15.4 3.3 21.6s11.8 10 19.5 10H240v40c0 13.3 10.7 24 24 24s24-10.7 24-24V320h8c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v56H169.3l37.5-112.4c4.2-12.6-2.6-26.2-15.2-30.4z"}})])},ta=[],ea=T(Qr,Zr,ta,!1,null,null,null,null);const na=ea.exports,ra={};var aa=function(){var t=this,e=t._self._c;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor"}},[e("path",{attrs:{d:"M64 64V32H0V64 448v32H32 480h32V416H480 64V64zm64 288H480V240L384 128l-64 64L240 96 128 224V352z"}})])},sa=[],ia=T(ra,aa,sa,!1,null,null,null,null);const oa=ia.exports,la={components:{ChartArea:oa,NumberIcon:na,TableIcon:Yr,EarthIcon:Gr,ChartPieIcon:zr,VSelect:Er},data(){return{loading:!1,pluginSettings:null,chartTypeOptions:[{label:"Area",value:"area"},{label:"Counter",value:"counter"},{label:"Pie",value:"pie"},{label:"Table",value:"table"},{label:"Geo",value:"geo"}],periodOptions:[{label:"Week",value:"week"},{label:"Month",value:"month"},{label:"Year",value:"year"}],vSelectedMetric:null,selectedDimension:null,sourceId:null,chart:null,period:null,dimension:null,metric:null,dimensions:[],metrics:[]}},computed:{viewOptions(){return this.sources.map(a=>({label:a.name,value:a.id}))},metricCategories(){return this.metrics.map(a=>a.category).filter((a,t,e)=>e.indexOf(a)===t)},dimensionCategories(){return this._dimensions.map(a=>a.category).filter((a,t,e)=>e.indexOf(a)===t)},metricOptions(){let a=[];return this.metricCategories.forEach(t=>{a.push({optgroup:t}),this.metrics.filter(e=>e.category===t).forEach(e=>{a.push({label:e.name,value:e.apiName})})}),a},_dimensions(){const a=["country","continent"];return this.dimensions.filter(t=>this.chart!=="geo"||a.find(e=>e===t.apiName)).map(t=>{if(this.chart==="geo")switch(t.apiName){case"continent":return{...t,apiName:"continentId"}}return t})},dimensionOptions(){let a=[];return this.dimensionCategories.forEach(t=>{a.push({optgroup:t}),this._dimensions.filter(e=>e.category===t).forEach(e=>{a.push({label:e.name,value:e.apiName})})}),a},chartSupportsDimensions(){return this.chart==="pie"||this.chart==="table"||this.chart==="geo"},metricSelectOptions(){return this.parseOptionsForVueSelect(this.metricOptions)},dimensionSelectOptions(){return this.parseOptionsForVueSelect(this.dimensionOptions)},sources(){return this.pluginSettings.sources},selectOptions(){return this.pluginSettings.selectOptions},inputName(){return a=>{if(!a)return null;const t=this.pluginSettings.namespace;return Craft.namespaceInputName(a,t)}}},mounted(){this.sourceId=this.pluginSettings.settings.sourceId??this.viewOptions[0].value??null,this.chart=this.pluginSettings.settings.chart??this.chartTypeOptions[0].value,this.period=this.pluginSettings.settings.period??this.periodOptions[0].value,this.namespace=this.pluginSettings.namespace,this.onViewChange()},methods:{t:xt,onViewChange(){this.refreshDimensionsAndMetrics()},refreshDimensionsAndMetrics(){this.loading=!0,lt.getDimensionsMetrics(this.sourceId).then(a=>{this.dimensions=a.data.dimensions,this.metrics=a.data.metrics,this.initMetric(),this.initDimension()}).finally(()=>{this.loading=!1})},initMetric(){var t,e;const a=this.pluginSettings.settings.options;(t=a==null?void 0:a[this.chart])!=null&&t.metric&&this.metricSelectOptions.find(i=>i.value===a[this.chart].metric)?this.metric=a[this.chart].metric:Object.values(a).length>0&&Object.values(a)[0].metric&&this.metricSelectOptions.find(i=>i.value===Object.values(a)[0].metric)?this.metric=Object.values(a)[0].metric:this.metric=(e=this.metricSelectOptions.find(i=>i.value!==void 0))==null?void 0:e.value},initDimension(){var t,e;const a=this.pluginSettings.settings.options;(t=a==null?void 0:a[this.chart])!=null&&t.dimension&&this.dimensionSelectOptions.find(i=>i.value===a[this.chart].dimension)?this.dimension=a[this.chart].dimension:Object.values(a).length>0&&Object.values(a)[0].dimension&&this.dimensionSelectOptions.find(i=>i.value===Object.values(a)[0].dimension)?this.dimension=Object.values(a)[0].dimension:this.dimension=(e=this.dimensionSelectOptions.find(i=>i.value!==void 0))==null?void 0:e.value},onChartChange(){this.initMetric(),this.initDimension()},parseOptionsForVueSelect(a){if(!a)return[];const t=[];for(let e=0;e<a.length;e++){const i=a[e];i.optgroup?t.push({optgroup:!0,label:i.optgroup}):t.push({label:i.label,value:i.value})}return t}}};var ca=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"field"},[e("div",{staticClass:"heading"},[e("label",[t._v(t._s(t.t("analytics","Source")))])]),e("div",{staticClass:"input"},[e("div",{staticClass:"da-flex da-items-center da-gap-3"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.sourceId,expression:"sourceId"}],attrs:{name:t.inputName("sourceId")},on:{change:[function(i){var u=Array.prototype.filter.call(i.target.options,function(f){return f.selected}).map(function(f){var p="_value"in f?f._value:f.value;return p});t.sourceId=i.target.multiple?u:u[0]},function(i){return t.onViewChange()}]}},[t._l(t.viewOptions,function(i,u){return[e("option",{key:u,domProps:{value:i.value}},[t._v(" "+t._s(i.label)+" ")])]})],2)]),e("div",{staticClass:"spinner",class:{"da-invisible":!t.loading}})])])]),e("div",{staticClass:"field"},[e("div",{staticClass:"heading"},[e("label",[t._v(t._s(t.t("analytics","Chart Type")))])]),e("div",{staticClass:"input"},[e("div",{staticClass:"chart-picker"},[e("div",{staticClass:"da-inline-block"},[e("ul",{staticClass:"chart-types da-flex da-border da-border-gray-300/70 da-bg-white da-rounded-md"},[t._l(t.chartTypeOptions,function(i,u){return[e("li",{key:u,staticClass:"da-relative"},[e("label",[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.chart,expression:"chart"}],staticClass:"da-peer da-sr-only",attrs:{name:t.inputName("chart"),type:"radio"},domProps:{value:i.value,checked:t._q(t.chart,i.value)},on:{change:[function(f){t.chart=i.value},t.onChartChange]}}),e("div",{staticClass:"da-text-gray-700 peer-checked:da-text-black da-px-4 da-py-3 da-cursor-pointer peer-focus-visible:da-ring-2 peer-focus-visible:da-z-50 peer-focus-visible:da-border-transparent da-relative",class:{"da-bg-white hover:da-bg-gray-100/50":i.value!==t.chart,"da-bg-gray-100":i.value===t.chart,"da-rounded-l-md":u===0,"da-rounded-r-md":u===t.chartTypeOptions.length-1,"da-border-r":u!==t.chartTypeOptions.length-1},attrs:{title:i.label}},[i.value==="area"?[e("ChartArea",{staticClass:"da-w-4 da-h-4"})]:i.value==="counter"?[e("NumberIcon",{staticClass:"da-w-4 da-h-4"})]:i.value==="pie"?[e("ChartPieIcon",{staticClass:"da-w-4 da-h-4"})]:i.value==="table"?[e("TableIcon",{staticClass:"da-w-4 da-h-4"})]:i.value==="geo"?[e("EarthIcon",{staticClass:"da-w-4 da-h-4"})]:t._e()],2)])])])]})],2)])])])]),e("div",{staticClass:"field"},[e("div",{staticClass:"heading"},[e("label",[t._v(t._s(t.t("analytics","Period")))])]),e("div",{staticClass:"input"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.period,expression:"period"}],attrs:{name:t.inputName("period")},on:{change:function(i){var u=Array.prototype.filter.call(i.target.options,function(f){return f.selected}).map(function(f){var p="_value"in f?f._value:f.value;return p});t.period=i.target.multiple?u:u[0]}}},[t._l(t.periodOptions,function(i,u){return[e("option",{key:u,domProps:{value:i.value}},[t._v(" "+t._s(i.label)+" ")])]})],2)])])]),t.chartSupportsDimensions?[e("div",{staticClass:"field"},[e("div",{staticClass:"heading"},[e("label",[t._v(t._s(t.t("analytics","Dimension")))])]),e("div",[e("v-select",{attrs:{options:t.dimensionSelectOptions,selectable:i=>!i.optgroup,reduce:i=>i.value},scopedSlots:t._u([{key:"option",fn:function(i){return[i.optgroup?[t._v(" ——— "+t._s(i.label)+" ——— ")]:[t._v(" "+t._s(i.label)+" ")]]}}],null,!1,3128001412),model:{value:t.dimension,callback:function(i){t.dimension=i},expression:"dimension"}}),e("input",{attrs:{type:"hidden",name:t.inputName("options[dimension]")},domProps:{value:t.dimension}})],1)])]:t._e(),e("div",{staticClass:"field"},[e("div",{staticClass:"heading"},[e("label",[t._v(t._s(t.t("analytics","Metric")))])]),e("div",[e("v-select",{attrs:{options:t.metricSelectOptions,selectable:i=>!i.optgroup,reduce:i=>i.value},scopedSlots:t._u([{key:"option",fn:function(i){return[i.optgroup?[t._v(" ——— "+t._s(i.label)+" ——— ")]:[t._v(" "+t._s(i.label)+" ")]]}}]),model:{value:t.metric,callback:function(i){t.metric=i},expression:"metric"}}),e("input",{attrs:{type:"hidden",name:t.inputName("options[metric]")},domProps:{value:t.metric}})],1)])],2)},ua=[],da=T(la,ca,ua,!1,null,null,null,null);const pa=da.exports,ha={components:{AnalyticsChart:G},data(){return{refreshInterval:60,pluginOptions:null,reportResponse:null,activeUsers:0,activePages:null,pageviews:null,chartData:null}},computed:{chartOptions(){return{height:150,theme:"maximized",bar:{groupWidth:"90%"},legend:{position:"bottom"},hAxis:{direction:-1,baselineColor:"transparent",gridlineColor:"transparent",textPosition:"none",gridlines:{count:0}},vAxis:{baselineColor:"#fff",gridlineColor:"#fff",textPosition:"none",gridlines:{count:0}}}}},mounted(){this.refreshInterval=this.pluginOptions.refreshInterval,this.getReport()},methods:{t:xt,getReport(){this.loading=!0,lt.getRealtimeReport({sourceId:this.pluginOptions.source.id}).then(a=>{this.loading=!1,this.reportResponse=a,this.activeUsers=this.reportResponse.data.activeUsers,this.activePages=this.reportResponse.data.activePages,this.parsePageviews(this.reportResponse),setTimeout(this.getReport,this.refreshInterval*1e3)})},parsePageviews(a){this.pageviews=a.data.pageviews,this.chartData=this.getPageviewsDataTable(this.pageviews)},getPageviewsDataTable(a){let t=new google.visualization.DataTable;if(t.addColumn("number",Craft.t("analytics","Minutes ago")),t.addColumn("number",Craft.t("analytics","Active Users")),a.rows)for(let e=30;e>=0;e--){let i=0;a.rows.forEach(f=>{var p=parseInt(f[0]);p===e&&(i=parseInt(f[1]))});let u=Craft.t("analytics","{count} minutes ago",{count:e});e===1&&(u=Craft.t("analytics","{count} minute ago",{count:e})),t.addRow([{v:e,f:u},i])}return t}}};var fa=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(t.pluginOptions.source.name)+" ")]),e("div",{staticClass:"da-mt-2 da-text-6xl"},[t._v(" "+t._s(t.activeUsers)+" ")]),e("div",{staticClass:"da-mt-6"},[e("h3",[t._v(" "+t._s(t.t("analytics","Active users per minute"))+" ")]),e("div",[t.chartData?[e("analytics-chart",{attrs:{"chart-type":"column","chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)]),e("div",{staticClass:"active-pages da-mt-6"},[e("h3",[t._v(" "+t._s(t.t("analytics","Active pages"))+" ")]),t.activePages?[e("table",{staticClass:"data fullwidth"},[e("thead",[e("tr",[e("th",{staticClass:"col-page"},[t._v(" "+t._s(t.t("analytics","Page"))+" ")]),e("th",{staticClass:"col-users"},[t._v(" "+t._s(t.t("analytics","Users"))+" ")])])]),e("tbody",t._l(t.activePages.rows,function(i,u){return e("tr",{key:u},[e("td",{staticClass:"col-page"},[t._v(" "+t._s(i[0])+" ")]),e("td",{staticClass:"col-users"},[t._v(" "+t._s(i[1])+" ")])])}),0)])]:t._e()],2)])},va=[],_a=T(ha,fa,va,!1,null,null,null,null);const ga=_a.exports,ma={components:{AnalyticsChart:G},data(){return{loading:!1,pluginOptions:null,reportType:null,chartData:null,reportResponse:null,metricOptions:[{label:"Screen Page Views",value:"screenPageViews"},{label:"Sessions",value:"sessions"},{label:"Bounce Rate",value:"bounceRate"},{label:"Average Session Duration",value:"averageSessionDuration"}],metric:"screenPageViews"}},computed:{elementId(){return this.pluginOptions.element.id},siteId(){return this.pluginOptions.element.siteId},chartOptions(){return new Q().field()},localeDefinition(){return Ot(this.pluginOptions.currencyDefinition)}},mounted(){this.getElementReport()},methods:{getElementReport(){this.loading=!0,lt.getElementReport({elementId:this.elementId,siteId:this.siteId,metric:this.metric}).then(a=>{this.loading=!1,this.reportResponse=a,this.reportType=a.data.type;const t=Y(this.reportResponse.data.chart,this.localeDefinition);this.chartData=this.formatDataTable(t)})},generateTicks(){var a=[];for(let p=0;p<this.reportResponse.data.chart.rows.length;p++){var t=this.reportResponse.data.chart.rows[p][0],e=t.substr(0,4),i=t.substr(4,2)-1,u=t.substr(6,2),f=new Date(e,i,u);a.push(f)}return a},formatDataTable(a){if(this.reportResponse.data.period==="year"){var t=new google.visualization.DateFormat({pattern:"MMMM yyyy"});t.format(a,0)}return a}}};var ya=function(){var t=this,e=t._self._c;return e("div",{staticClass:"da-mt-2"},[e("div",{staticClass:"da-flex da-items-center"},[e("div",[e("div",{staticClass:"field"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.metric,expression:"metric"}],on:{change:[function(i){var u=Array.prototype.filter.call(i.target.options,function(f){return f.selected}).map(function(f){var p="_value"in f?f._value:f.value;return p});t.metric=i.target.multiple?u:u[0]},function(i){return t.getElementReport()}]}},[t._l(t.metricOptions,function(i,u){return[e("option",{key:u,domProps:{value:i.value}},[t._v(" "+t._s(i.label)+" ")])]})],2)])])]),e("div",{staticClass:"da-flex-1 da-ml-4 da-text-right"},[t._v(" "+t._s(t.pluginOptions.element.url)+" ")])]),t.loading?[e("div",{staticClass:"da-mt-4"},[t._v(" Loading… ")])]:[t.reportResponse?[e("analytics-chart",{staticClass:"da-mt-4",attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()]],2)},ba=[],Ca=T(ma,ya,ba,!1,null,null,null,null);const wa=Ca.exports,Oa=window.axios,xa={getAccountExplorerData(){return Oa.get(Craft.getActionUrl("analytics/sources/get-account-explorer-data"),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})}},Sa={data(){return{loading:!1,accountExplorerData:null,selectedSourceType:null,selectedAccount:null,selectedProperty:null,selectedView:null,selectedCurrency:null,pluginOptions:null}},computed:{accounts(){return this.accountExplorerData?this.accountExplorerData.accounts:[]},properties(){return this.accountExplorerData?this.selectedAccount?this.accountExplorerData.properties.filter(a=>a.accountId===this.selectedAccount):[]:[]}},mounted(){this.loading=!0,xa.getAccountExplorerData().then(a=>{this.loading=!1,this.accountExplorerData=a.data}),this.selectedAccount=this.pluginOptions.source.gaAccountId,this.selectedProperty=this.pluginOptions.source.gaPropertyId},methods:{t:xt,selectGA4Property(a){this.selectedSourceType="GA4",this.selectedProperty=a.id,this.selectedView=null,this.setFormData()},setFormData(){document.getElementById("accountExplorerType").value=this.selectedSourceType,document.getElementById("accountExplorerAccount").value=this.selectedAccount,document.getElementById("accountExplorerProperty").value=this.selectedProperty,this.selectedSourceType==="UA"?document.getElementById("accountExplorerView").value=this.selectedView:document.getElementById("accountExplorerView").value="",document.getElementById("accountExplorerCurrency").value=""}}};var Ta=function(){var t=this,e=t._self._c;return e("div",[t.loading?[e("div",[t._v(" "+t._s(t.t("analytics","Loading Google Analytics accounts…"))+" ")])]:[e("div",{staticClass:"da-flex da-border da-rounded-md"},[e("div",{staticClass:"da-flex-1 da-border-r"},[e("div",{staticClass:"da-border-b da-font-medium da-text-gray-500 da-px-6 da-py-3"},[t._v(" "+t._s(t.t("analytics","Analytics Accounts"))+" ")]),e("div",{staticClass:"da-max-h-[22rem] da-overflow-auto"},[e("ul",[t._l(t.accounts,function(i,u){return[e("li",{key:u},[e("button",{staticClass:"da-px-6 da-py-3 da-block da-w-full da-text-left da-flex da-justify-between da-items-center",class:{"da-bg-gray-100":t.selectedAccount===i.id,"hover:da-bg-gray-100/50":t.selectedAccount!==i.id},on:{click:function(f){f.preventDefault(),t.selectedAccount=i.id}}},[e("div",[e("div",[t._v(" "+t._s(i.name)+" ")]),e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(i.id)+" ")])]),e("svg",{staticClass:"da-h-4 da-w-4 da-text-gray-700",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"}})])])])]})],2)])]),e("div",{staticClass:"da-flex-1 da-border-r"},[e("div",{staticClass:"da-border-b da-font-medium da-text-gray-500 da-px-6 da-py-3"},[t._v(" "+t._s(t.t("analytics","Properties & Apps"))+" ")]),e("div",{staticClass:"da-max-h-[22rem] da-overflow-auto"},[e("ul",[t._l(t.properties,function(i,u){return[e("li",{key:u},[i.type==="UA"?[e("button",{staticClass:"da-px-6 da-py-3 da-block da-w-full da-text-left",class:{"da-bg-gray-100":t.selectedProperty===i.id,"hover:da-bg-gray-100/50":t.selectedProperty!==i.id},on:{click:function(f){f.preventDefault(),t.selectedProperty=i.id}}},[t._v(" "+t._s(i.name)+" "),e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(i.id)+" ")])])]:[e("div",{staticClass:"da-px-6 da-py-3 da-flex da-justify-between",class:{"da-bg-gray-100":t.selectedProperty===i.id}},[e("div",[t._v(" "+t._s(i.name)+" "),e("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(i.id)+" ")])]),e("div",[e("button",{staticClass:"da-bg-blue-600 da-text-white da-font-medium da-rounded-md da-px-2 da-py-1 da-ml-2",class:{"da-opacity-50":t.selectedProperty===i.id},attrs:{disabled:t.selectedProperty===i.id},on:{click:function(f){return f.preventDefault(),t.selectGA4Property(i)}}},[t._v(" "+t._s(t.t("analytics","Select GA4 property"))+" ")])])])]],2)]})],2)])])])]],2)},Ra=[],Da=T(Sa,Ta,Ra,!1,null,null,null,null);const Aa=Da.exports,$a={computed:{formats(){return Craft.charts.BaseChart.defaults.formats},localeDefinition(){return Ot(window.AnalyticsCurrencyDefinition)},jsData(){return[{type:"string",value:"Hello world!"},{type:"percent",value:36.7869},{type:"integer",value:367869},{type:"time",value:3200},{type:"time",value:36786},{type:"currency",value:36786},{type:"float",value:36.7869},{type:"date",value:"201601"},{type:"date",value:"20160203"}]},d3Data(){return[{label:"percentFormat",value:19.345,valueModifier:function(a){return a/100},format:this.formats.percentFormat},{label:"currencyFormat",value:19.34,format:this.formats.currencyFormat},{label:"currencyFormat",value:190234534e-2,format:this.formats.currencyFormat},{label:"decimalFormat",value:19023453412344e-7,format:this.formats.numberFormat}]}},methods:{formatByType(a,t){return L(this.localeDefinition,a,t)},d3FormatByFormat(a,t,e){var i=d3.formatLocale(this.localeDefinition);return typeof t.valueModifier<"u"&&(e=t.valueModifier(e)),i.format(a)(e)}}};var Pa=function(){var t=this,e=t._self._c;return e("div",[e("h2",[t._v("JS Formatting")]),e("table",{staticClass:"data fullwidth formatting-tests",attrs:{id:"formatByType"}},[t._m(0),e("tbody",[t._l(t.jsData,function(i,u){return[e("tr",{key:u},[e("td",[t._v(t._s(i.type))]),e("td",[t._v(t._s(i.value))]),e("td",[t._v(t._s(t.formatByType(i.type,i.value)))])])]})],2)]),e("h2",[t._v("D3 Number Formatting")]),e("table",{staticClass:"data fullwidth formatting-tests",attrs:{id:"d3NumberFormatting"}},[t._m(1),e("tbody",[t._l(t.d3Data,function(i,u){return[e("tr",{key:u},[e("td",[t._v(t._s(i.label))]),e("td",[t._v(t._s(i.format))]),e("td",[t._v(t._s(i.value))]),e("td",[t._v(t._s(t.d3FormatByFormat(i.format,i,i.value)))])])]})],2)])])},Va=[function(){var a=this,t=a._self._c;return t("thead",[t("tr",[t("th",[a._v("Type")]),t("th",[a._v("Value")]),t("th",[a._v("Ouput")])])])},function(){var a=this,t=a._self._c;return t("thead",[t("tr",[t("th",[a._v("Label")]),t("th",[a._v("Format")]),t("th",[a._v("Value")]),t("th",[a._v("Formatted Value")])])])}],Fa=T($a,Pa,Va,!1,null,null,null,null);const Ia=Fa.exports,K=window.Vue;window.AnalyticsVueEcommerceWidget=K.extend(Xn);window.AnalyticsVueReportWidget=K.extend(Ir);window.AnalyticsVueReportWidgetSettings=K.extend(pa);window.AnalyticsVueRealtimeWidget=K.extend(ga);window.AnalyticsVueReportField=K.extend(wa);window.AnalyticsVueSettings=K.extend(Aa);window.AnalyticsVueTestsFormatting=K.extend(Ia);
//# sourceMappingURL=main-fe8c8ff8.js.map

const J=window.axios,lt={getReport(a){return J.post(Craft.getActionUrl("analytics/reports/report-widget"),{...a},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getReportWidgetSettings(){return J.get(Craft.getActionUrl("analytics/vue/get-report-widget-settings"),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getDimensionsMetrics(a){return J.get(Craft.getActionUrl("analytics/reports/get-dimensions-metrics&sourceId="+a),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getElementReport({elementId:a,siteId:t,metric:n}){return J.post(Craft.getActionUrl("analytics/reports/element"),{elementId:a,siteId:t,metric:n},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getRealtimeReport({sourceId:a}){return J.post(Craft.getActionUrl("analytics/reports/realtime-widget"),{sourceId:a},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})},getEcommerceReport({sourceId:a,period:t}){return J.post(Craft.getActionUrl("analytics/reports/ecommerce-widget"),{sourceId:a,period:t},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})}},$n=a=>{var t;return $.each(Analytics.continents,function(n,i){a==i.code&&(t=i.label)}),t||a},Pn={getContinentByCode:$n},Y=(a,t)=>{var n=new google.visualization.DataTable;return $.each(a.cols,function(i,u){var f;switch(u.type){case"date":f="date";break;case"percent":case"time":case"integer":case"currency":case"float":f="number";break;default:f="string"}n.addColumn({type:f,label:u.label,id:u.id})}),$.each(a.rows,$.proxy(function(i,u){var f=[];$.each(a.cols,$.proxy(function(p,v){switch(v.type){case"date":f[p]=L(t,v.type,u[p]);break;case"float":f[p]=+u[p];break;case"integer":case"currency":case"percent":case"time":case"continent":case"continentId":f[p]={v:Vn(t,v.type,u[p]),f:L(t,v.type,u[p])};break;default:f[p]=u[p]}},this)),n.addRow(f)},globalThis)),n},Vn=(a,t,n)=>{switch(t){case"integer":case"currency":case"percent":case"time":case"float":return+n;default:return n}},L=(a,t,n)=>{switch(t){case"continent":return Pn.getContinentByCode(n);case"currency":return Fn(a,+n);case"float":return(+n).toFixed(2);case"integer":return jn(a,+n);case"time":return In(+n);case"percent":return En(a,+n);case"date":{const i=n;if(i.length==8){let u=parseInt(i.substr(0,4)),f=parseInt(i.substr(4,2))-1,p=parseInt(i.substr(6,2));return new Date(u,f,p)}else if(i.length==6){let u=parseInt(i.substr(0,4)),f=parseInt(i.substr(4,2))-1;return new Date(u,f,"01")}break}default:return n}},Nt=a=>d3.formatLocale(a),Fn=(a,t)=>{var n=Nt(a),i=n.format(Craft.charts.BaseChart.defaults.formats.currencyFormat);return i(t)},In=a=>{var t=parseInt(a,10),n=Math.floor(t/3600),i=Math.floor((t-n*3600)/60),u=t-n*3600-i*60;return n<10&&(n="0"+n),i<10&&(i="0"+i),u<10&&(u="0"+u),n+":"+i+":"+u},jn=(a,t)=>Nt(a).format(",")(t),En=(a,t)=>Nt(a).format(Craft.charts.BaseChart.defaults.formats.percentFormat)(t/100),Mn=a=>$.extend(!0,Analytics.d3FormatLocaleDefinition,a),Ot=a=>Mn({currency:a});var ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function he(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var wt={exports:{}};wt.exports;(function(a,t){var n=200,i="__lodash_hash_undefined__",u=800,f=16,p=9007199254740991,v="[object Arguments]",_="[object Array]",b="[object AsyncFunction]",B="[object Boolean]",I="[object Date]",D="[object Error]",k="[object Function]",z="[object GeneratorFunction]",Z="[object Map]",ct="[object Number]",St="[object Null]",ut="[object Object]",Tt="[object Proxy]",Rt="[object RegExp]",dt="[object Set]",N="[object String]",pt="[object Undefined]",Dt="[object WeakMap]",At="[object ArrayBuffer]",e="[object DataView]",l="[object Float32Array]",c="[object Float64Array]",h="[object Int8Array]",y="[object Int16Array]",O="[object Int32Array]",M="[object Uint8Array]",tt="[object Uint8ClampedArray]",P="[object Uint16Array]",R="[object Uint32Array]",et=/[\\^$.*+?()[\]{}|]/g,ht=/^\[object .+?Constructor\]$/,F=/^(?:0|[1-9]\d*)$/,C={};C[l]=C[c]=C[h]=C[y]=C[O]=C[M]=C[tt]=C[P]=C[R]=!0,C[v]=C[_]=C[At]=C[B]=C[e]=C[I]=C[D]=C[k]=C[Z]=C[ct]=C[ut]=C[Rt]=C[dt]=C[N]=C[Dt]=!1;var Ut=typeof ot=="object"&&ot&&ot.Object===Object&&ot,ve=typeof self=="object"&&self&&self.Object===Object&&self,nt=Ut||ve||Function("return this")(),Ht=t&&!t.nodeType&&t,rt=Ht&&!0&&a&&!a.nodeType&&a,qt=rt&&rt.exports===Ht,$t=qt&&Ut.process,Gt=function(){try{var r=rt&&rt.require&&rt.require("util").types;return r||$t&&$t.binding&&$t.binding("util")}catch{}}(),Kt=Gt&&Gt.isTypedArray;function _e(r,s,o){switch(o.length){case 0:return r.call(s);case 1:return r.call(s,o[0]);case 2:return r.call(s,o[0],o[1]);case 3:return r.call(s,o[0],o[1],o[2])}return r.apply(s,o)}function ge(r,s){for(var o=-1,d=Array(r);++o<r;)d[o]=s(o);return d}function me(r){return function(s){return r(s)}}function ye(r,s){return r==null?void 0:r[s]}function be(r,s){return function(o){return r(s(o))}}var Ce=Array.prototype,we=Function.prototype,ft=Object.prototype,Pt=nt["__core-js_shared__"],vt=we.toString,j=ft.hasOwnProperty,Wt=function(){var r=/[^.]+$/.exec(Pt&&Pt.keys&&Pt.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Xt=ft.toString,Oe=vt.call(Object),xe=RegExp("^"+vt.call(j).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_t=qt?nt.Buffer:void 0,Jt=nt.Symbol,Yt=nt.Uint8Array,Qt=_t?_t.allocUnsafe:void 0,Zt=be(Object.getPrototypeOf,Object),te=Object.create,Se=ft.propertyIsEnumerable,Te=Ce.splice,U=Jt?Jt.toStringTag:void 0,gt=function(){try{var r=It(Object,"defineProperty");return r({},"",{}),r}catch{}}(),Re=_t?_t.isBuffer:void 0,ee=Math.max,De=Date.now,ne=It(nt,"Map"),at=It(Object,"create"),Ae=function(){function r(){}return function(s){if(!q(s))return{};if(te)return te(s);r.prototype=s;var o=new r;return r.prototype=void 0,o}}();function H(r){var s=-1,o=r==null?0:r.length;for(this.clear();++s<o;){var d=r[s];this.set(d[0],d[1])}}function $e(){this.__data__=at?at(null):{},this.size=0}function Pe(r){var s=this.has(r)&&delete this.__data__[r];return this.size-=s?1:0,s}function Ve(r){var s=this.__data__;if(at){var o=s[r];return o===i?void 0:o}return j.call(s,r)?s[r]:void 0}function Fe(r){var s=this.__data__;return at?s[r]!==void 0:j.call(s,r)}function Ie(r,s){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=at&&s===void 0?i:s,this}H.prototype.clear=$e,H.prototype.delete=Pe,H.prototype.get=Ve,H.prototype.has=Fe,H.prototype.set=Ie;function E(r){var s=-1,o=r==null?0:r.length;for(this.clear();++s<o;){var d=r[s];this.set(d[0],d[1])}}function je(){this.__data__=[],this.size=0}function Ee(r){var s=this.__data__,o=mt(s,r);if(o<0)return!1;var d=s.length-1;return o==d?s.pop():Te.call(s,o,1),--this.size,!0}function Me(r){var s=this.__data__,o=mt(s,r);return o<0?void 0:s[o][1]}function Le(r){return mt(this.__data__,r)>-1}function Be(r,s){var o=this.__data__,d=mt(o,r);return d<0?(++this.size,o.push([r,s])):o[d][1]=s,this}E.prototype.clear=je,E.prototype.delete=Ee,E.prototype.get=Me,E.prototype.has=Le,E.prototype.set=Be;function W(r){var s=-1,o=r==null?0:r.length;for(this.clear();++s<o;){var d=r[s];this.set(d[0],d[1])}}function ke(){this.size=0,this.__data__={hash:new H,map:new(ne||E),string:new H}}function ze(r){var s=bt(this,r).delete(r);return this.size-=s?1:0,s}function Ne(r){return bt(this,r).get(r)}function Ue(r){return bt(this,r).has(r)}function He(r,s){var o=bt(this,r),d=o.size;return o.set(r,s),this.size+=o.size==d?0:1,this}W.prototype.clear=ke,W.prototype.delete=ze,W.prototype.get=Ne,W.prototype.has=Ue,W.prototype.set=He;function X(r){var s=this.__data__=new E(r);this.size=s.size}function qe(){this.__data__=new E,this.size=0}function Ge(r){var s=this.__data__,o=s.delete(r);return this.size=s.size,o}function Ke(r){return this.__data__.get(r)}function We(r){return this.__data__.has(r)}function Xe(r,s){var o=this.__data__;if(o instanceof E){var d=o.__data__;if(!ne||d.length<n-1)return d.push([r,s]),this.size=++o.size,this;o=this.__data__=new W(d)}return o.set(r,s),this.size=o.size,this}X.prototype.clear=qe,X.prototype.delete=Ge,X.prototype.get=Ke,X.prototype.has=We,X.prototype.set=Xe;function Je(r,s){var o=Mt(r),d=!o&&Et(r),m=!o&&!d&&oe(r),w=!o&&!d&&!m&&ce(r),x=o||d||m||w,g=x?ge(r.length,String):[],S=g.length;for(var V in r)(s||j.call(r,V))&&!(x&&(V=="length"||m&&(V=="offset"||V=="parent")||w&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||se(V,S)))&&g.push(V);return g}function Vt(r,s,o){(o!==void 0&&!Ct(r[s],o)||o===void 0&&!(s in r))&&Ft(r,s,o)}function Ye(r,s,o){var d=r[s];(!(j.call(r,s)&&Ct(d,o))||o===void 0&&!(s in r))&&Ft(r,s,o)}function mt(r,s){for(var o=r.length;o--;)if(Ct(r[o][0],s))return o;return-1}function Ft(r,s,o){s=="__proto__"&&gt?gt(r,s,{configurable:!0,enumerable:!0,value:o,writable:!0}):r[s]=o}var Qe=pn();function yt(r){return r==null?r===void 0?pt:St:U&&U in Object(r)?hn(r):yn(r)}function re(r){return st(r)&&yt(r)==v}function Ze(r){if(!q(r)||gn(r))return!1;var s=Bt(r)?xe:ht;return s.test(On(r))}function tn(r){return st(r)&&le(r.length)&&!!C[yt(r)]}function en(r){if(!q(r))return mn(r);var s=ie(r),o=[];for(var d in r)d=="constructor"&&(s||!j.call(r,d))||o.push(d);return o}function ae(r,s,o,d,m){r!==s&&Qe(s,function(w,x){if(m||(m=new X),q(w))nn(r,s,x,o,ae,d,m);else{var g=d?d(jt(r,x),w,x+"",r,s,m):void 0;g===void 0&&(g=w),Vt(r,x,g)}},ue)}function nn(r,s,o,d,m,w,x){var g=jt(r,o),S=jt(s,o),V=x.get(S);if(V){Vt(r,o,V);return}var A=w?w(g,S,o+"",r,s,x):void 0,it=A===void 0;if(it){var kt=Mt(S),zt=!kt&&oe(S),pe=!kt&&!zt&&ce(S);A=S,kt||zt||pe?Mt(g)?A=g:xn(g)?A=cn(g):zt?(it=!1,A=sn(S,!0)):pe?(it=!1,A=ln(S,!0)):A=[]:Sn(S)||Et(S)?(A=g,Et(g)?A=Tn(g):(!q(g)||Bt(g))&&(A=fn(S))):it=!1}it&&(x.set(S,A),m(A,S,d,w,x),x.delete(S)),Vt(r,o,A)}function rn(r,s){return Cn(bn(r,s,de),r+"")}var an=gt?function(r,s){return gt(r,"toString",{configurable:!0,enumerable:!1,value:Dn(s),writable:!0})}:de;function sn(r,s){if(s)return r.slice();var o=r.length,d=Qt?Qt(o):new r.constructor(o);return r.copy(d),d}function on(r){var s=new r.constructor(r.byteLength);return new Yt(s).set(new Yt(r)),s}function ln(r,s){var o=s?on(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.length)}function cn(r,s){var o=-1,d=r.length;for(s||(s=Array(d));++o<d;)s[o]=r[o];return s}function un(r,s,o,d){var m=!o;o||(o={});for(var w=-1,x=s.length;++w<x;){var g=s[w],S=d?d(o[g],r[g],g,o,r):void 0;S===void 0&&(S=r[g]),m?Ft(o,g,S):Ye(o,g,S)}return o}function dn(r){return rn(function(s,o){var d=-1,m=o.length,w=m>1?o[m-1]:void 0,x=m>2?o[2]:void 0;for(w=r.length>3&&typeof w=="function"?(m--,w):void 0,x&&vn(o[0],o[1],x)&&(w=m<3?void 0:w,m=1),s=Object(s);++d<m;){var g=o[d];g&&r(s,g,d,w)}return s})}function pn(r){return function(s,o,d){for(var m=-1,w=Object(s),x=d(s),g=x.length;g--;){var S=x[r?g:++m];if(o(w[S],S,w)===!1)break}return s}}function bt(r,s){var o=r.__data__;return _n(s)?o[typeof s=="string"?"string":"hash"]:o.map}function It(r,s){var o=ye(r,s);return Ze(o)?o:void 0}function hn(r){var s=j.call(r,U),o=r[U];try{r[U]=void 0;var d=!0}catch{}var m=Xt.call(r);return d&&(s?r[U]=o:delete r[U]),m}function fn(r){return typeof r.constructor=="function"&&!ie(r)?Ae(Zt(r)):{}}function se(r,s){var o=typeof r;return s=s??p,!!s&&(o=="number"||o!="symbol"&&F.test(r))&&r>-1&&r%1==0&&r<s}function vn(r,s,o){if(!q(o))return!1;var d=typeof s;return(d=="number"?Lt(o)&&se(s,o.length):d=="string"&&s in o)?Ct(o[s],r):!1}function _n(r){var s=typeof r;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?r!=="__proto__":r===null}function gn(r){return!!Wt&&Wt in r}function ie(r){var s=r&&r.constructor,o=typeof s=="function"&&s.prototype||ft;return r===o}function mn(r){var s=[];if(r!=null)for(var o in Object(r))s.push(o);return s}function yn(r){return Xt.call(r)}function bn(r,s,o){return s=ee(s===void 0?r.length-1:s,0),function(){for(var d=arguments,m=-1,w=ee(d.length-s,0),x=Array(w);++m<w;)x[m]=d[s+m];m=-1;for(var g=Array(s+1);++m<s;)g[m]=d[m];return g[s]=o(x),_e(r,this,g)}}function jt(r,s){if(!(s==="constructor"&&typeof r[s]=="function")&&s!="__proto__")return r[s]}var Cn=wn(an);function wn(r){var s=0,o=0;return function(){var d=De(),m=f-(d-o);if(o=d,m>0){if(++s>=u)return arguments[0]}else s=0;return r.apply(void 0,arguments)}}function On(r){if(r!=null){try{return vt.call(r)}catch{}try{return r+""}catch{}}return""}function Ct(r,s){return r===s||r!==r&&s!==s}var Et=re(function(){return arguments}())?re:function(r){return st(r)&&j.call(r,"callee")&&!Se.call(r,"callee")},Mt=Array.isArray;function Lt(r){return r!=null&&le(r.length)&&!Bt(r)}function xn(r){return st(r)&&Lt(r)}var oe=Re||An;function Bt(r){if(!q(r))return!1;var s=yt(r);return s==k||s==z||s==b||s==Tt}function le(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=p}function q(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}function st(r){return r!=null&&typeof r=="object"}function Sn(r){if(!st(r)||yt(r)!=ut)return!1;var s=Zt(r);if(s===null)return!0;var o=j.call(s,"constructor")&&s.constructor;return typeof o=="function"&&o instanceof o&&vt.call(o)==Oe}var ce=Kt?me(Kt):tn;function Tn(r){return un(r,ue(r))}function ue(r){return Lt(r)?Je(r,!0):en(r)}var Rn=dn(function(r,s,o){ae(r,s,o)});function Dn(r){return function(){return r}}function de(r){return r}function An(){return!1}a.exports=Rn})(wt,wt.exports);var Ln=wt.exports;const Bn=he(Ln);class Q{constructor(){this.defaults={area:{theme:"maximized",legend:"none",backgroundColor:"transparent",colors:["#058DC7"],areaOpacity:.1,pointSize:7,lineWidth:4,chartArea:{},hAxis:{textPosition:"in",textStyle:{color:"#058DC7"},baselineColor:"#fff",gridlines:{color:"none"}},vAxis:{textPosition:"in",textStyle:{color:"#058DC7"},baselineColor:"#ccc",gridlines:{color:"#fafafa"},minValue:0,maxValue:10,format:"#"}},geo:{displayMode:"auto"},pie:{theme:"maximized",height:282,pieHole:.5,legend:{alignment:"center",position:"top"},chartArea:{top:40,height:"82%"},sliceVisibilityThreshold:1/120},table:{page:"auto",pageSize:10}}}area(t){var n=JSON.parse(JSON.stringify(this.defaults.area));switch(t){case"week":n.hAxis.format="E";break;case"month":n.hAxis.format="MMM d";break;case"year":n.hAxis.format="MMM yy";break}return n}table(){return this.defaults.table}geo(t){var n=this.defaults.geo;switch(t){case"country":n.resolution="countries",n.displayMode="regions";break;case"continent":case"continentId":n.resolution="continents",n.displayMode="regions";break}return n}pie(){return this.defaults.pie}field(){var t=JSON.parse(JSON.stringify(this.defaults.area));return Bn(t,{height:120,hAxis:{format:"MMM d"}})}}function T(a,t,n,i,u,f,p,v){var _=typeof a=="function"?a.options:a;t&&(_.render=t,_.staticRenderFns=n,_._compiled=!0),i&&(_.functional=!0),f&&(_._scopeId="data-v-"+f);var b;if(p?(b=function(D){D=D||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!D&&typeof __VUE_SSR_CONTEXT__<"u"&&(D=__VUE_SSR_CONTEXT__),u&&u.call(this,D),D&&D._registeredComponents&&D._registeredComponents.add(p)},_._ssrRegister=b):u&&(b=v?function(){u.call(this,(_.functional?this.parent:this).$root.$options.shadowRoot)}:u),b)if(_.functional){_._injectStyles=b;var B=_.render;_.render=function(k,z){return b.call(z),B(k,z)}}else{var I=_.beforeCreate;_.beforeCreate=I?[].concat(I,b):[b]}return{exports:a,options:_}}google.charts.load("current",{packages:["corechart","table","geochart"],language:Analytics.chartLanguage,mapsApiKey:Analytics.mapsApiKey});const kn={props:{chartType:{type:String,default:"area"},chartData:{type:[Array,Object],required:!0},chartScale:{type:String,default:null},chartOptions:{type:Object,default:()=>({})}},computed:{isChartTypeSupported(){return this.chartType==="area"||this.chartType==="pie"||this.chartType==="table"||this.chartType==="geo"||this.chartType==="column"}},mounted(){if(!this.isChartTypeSupported)return null;google.charts.setOnLoadCallback(()=>this.drawChart())},created(){window.addEventListener("resize",this.onResize)},destroyed(){window.removeEventListener("resize",this.onResize)},methods:{onResize(){this.drawChart()},drawChart(){switch(this.chartType){case"area":{this.drawAreaChart();break}case"pie":{this.drawPieChart();break}case"table":{this.drawTableChart();break}case"geo":{this.drawGeoChart();break}case"column":{this.drawColumnChart();break}}},drawAreaChart(){const a=new google.visualization.AreaChart(this.$refs.chart),t={...this.chartOptions};t.hAxis.ticks=this.generateAreaTicks();const n=this.formatAreaDataTable(this.chartData);a.draw(n,t)},drawPieChart(){new google.visualization.PieChart(this.$refs.chart).draw(this.chartData,this.chartOptions)},drawTableChart(){new google.visualization.Table(this.$refs.chart).draw(this.chartData,this.chartOptions)},drawGeoChart(){new google.visualization.GeoChart(this.$refs.chart).draw(this.chartData,this.chartOptions)},drawColumnChart(){new google.visualization.ColumnChart(this.$refs.chart).draw(this.chartData,this.chartOptions)},generateAreaTicks(){const a=[];for(let t=0;t<this.chartData.getNumberOfRows();t++){const n=this.chartData.getValue(t,0);a.push(n)}return a},formatAreaDataTable(a){if(this.chartScale==="year"){var t=new google.visualization.DateFormat({pattern:"MMMM yyyy"});t.format(a,0)}return a}}};var zn=function(){var t=this,n=t._self._c;return n("div",[t.isChartTypeSupported?t._e():[t._v(" Chart type “"+t._s(t.chartType)+"” is not supported. ")],n("div",{ref:"chart",class:{"da-hidden":!t.isChartTypeSupported}})],2)},Nn=[],Un=T(kn,zn,Nn,!1,null,null,null,null);const G=Un.exports;const Hn={components:{AnalyticsChart:G},data(){return{loading:!1,reportResponse:null,pluginOptions:null,totalRevenue:0,totalRevenuePerTransaction:0,totalTransactions:0,totalTransactionsPerSession:0,chartData:null}},computed:{siteName(){return this.reportResponse?this.reportResponse.data.reportData.view:null},chartOptions(){return new Q().area(this.pluginOptions.period)}},mounted(){this.getReport()},methods:{getReport(){this.loading=!0,lt.getEcommerceReport({sourceId:this.pluginOptions.sourceId,period:this.pluginOptions.period}).then(a=>{this.loading=!1,this.reportResponse=a;const t=Ot(this.pluginOptions.currencyDefinition);this.totalRevenue=L(t,"currency",a.data.totalRevenue),this.totalRevenuePerTransaction=L(t,"currency",a.data.totalRevenuePerTransaction),this.totalTransactions=L(t,"number",a.data.totalTransactions),this.totalTransactionsPerSession=L(t,"number",a.data.totalTransactionsPerSession);const n=[];a.data.reportData.chart.rows.forEach(u=>{n.push([u[0],u[1]])});const i={cols:[a.data.reportData.chart.cols[0],a.data.reportData.chart.cols[1]],rows:n};this.chartData=Y(i,t)})}}};var qn=function(){var t=this,n=t._self._c;return n("div",[t.loading?[t._v(" Loading… ")]:t._e(),t.reportResponse?[n("div",[t._v(" "+t._s(t.reportResponse.data.reportData.periodLabel)+" ")]),n("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(t.siteName)+" ")]),t.chartData?[n("analytics-chart",{staticClass:"da-mt-4",attrs:{"chart-type":"area","chart-data":t.chartData,"chart-options":t.chartOptions,"chart-scale":t.reportResponse.data.reportData.period}})]:t._e(),n("div",{staticClass:"tiles"},[n("div",{staticClass:"tile"},[n("div",{staticClass:"label light"},[t._v(" "+t._s("Total Revenue")+" ")]),n("div",{staticClass:"value revenue"},[t._v(" "+t._s(t.totalRevenue)+" ")])]),n("div",{staticClass:"tile"},[n("div",{staticClass:"label light"},[t._v(" "+t._s("Revenue Per Transaction")+" ")]),n("div",{staticClass:"value revenue-per-transaction"},[t._v(" "+t._s(t.totalRevenuePerTransaction)+" ")])]),n("div",{staticClass:"tile"},[n("div",{staticClass:"label light"},[t._v(" "+t._s("Transactions")+" ")]),n("div",{staticClass:"value transactions"},[t._v(" "+t._s(t.totalTransactions)+" ")])]),n("div",{staticClass:"tile"},[n("div",{staticClass:"label light"},[t._v(" "+t._s("Transactions Per Session")+" ")]),n("div",{staticClass:"value transactions-per-session"},[t._v(" "+t._s(t.totalTransactionsPerSession)+" ")])])])]:t._e()],2)},Gn=[],Kn=T(Hn,qn,Gn,!1,null,null,null,null);const Wn=Kn.exports,Xn={props:{reportResponse:{type:Object,required:!0}}};var Jn=function(){var t=this,n=t._self._c;return n("div",[n("div",{staticClass:"da-font-bold"},[t._v(" "+t._s(t.reportResponse.data.metric)+" ")]),n("div",[t._v(t._s(t.reportResponse.data.periodLabel))]),n("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(t.reportResponse.data.view)+" ")])])},Yn=[],Qn=T(Xn,Jn,Yn,!1,null,null,null,null);const xt=Qn.exports,Zn={components:{ReportHeader:xt,AnalyticsChart:G},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{chartData:null}},computed:{chartOptions(){return new Q().area(this.reportResponse.data.period)}},mounted(){this.parseReportResponse()},methods:{parseReportResponse(){this.chartData=Y(this.reportResponse.data.chart,this.localeDefinition)}}};var tr=function(){var t=this,n=t._self._c;return n("div",[n("report-header",{attrs:{"report-response":t.reportResponse}}),n("div",{staticClass:"da-mt-4"},[n("div",[t.chartData?[n("analytics-chart",{staticClass:"-da-mx-[24px] -da-mb-[24px]",attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])],1)},er=[],nr=T(Zn,tr,er,!1,null,null,null,null);const rr=nr.exports,ar={props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{pluginOptions:null}},computed:{counterValue(){var i;if(!this.reportResponse||!this.reportResponse.data||!this.reportResponse.data.report)return null;const a=this.reportResponse.data.report;let t=0;(i=a.totals[0][0])!=null&&i.value&&(t=a.totals[0][0].value);const n=a.cols[0].type;return L(this.localeDefinition,n,t)}}};var sr=function(){var t=this,n=t._self._c;return t.reportResponse.data?n("div",[n("div",{staticClass:"da-text-center"},[n("div",{staticClass:"da-text-5xl"},[t._v(" "+t._s(t.counterValue)+" ")]),n("div",{staticClass:"da-mt-2"},[n("strong",[t._v(t._s(t.reportResponse.data.metric))]),t._v(" "+t._s(t.reportResponse.data.periodLabel)+" ")]),n("div",{staticClass:"da-text-gray-500 da-text-sm da-mt-1"},[t._v(" "+t._s(t.reportResponse.data.source)+" ")])])]):t._e()},ir=[],or=T(ar,sr,ir,!1,null,null,null,null);const lr=or.exports,cr={components:{ReportHeader:xt,AnalyticsChart:G},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{chartData:null}},computed:{chartOptions(){return new Q().pie()}},mounted(){this.chartData=Y(this.reportResponse.data.chart,this.localeDefinition)}};var ur=function(){var t=this,n=t._self._c;return n("div",[n("report-header",{attrs:{"report-response":t.reportResponse}}),n("div",{staticClass:"da-mt-4"},[n("div",[t.chartData?[n("analytics-chart",{attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])],1)},dr=[],pr=T(cr,ur,dr,!1,null,null,null,null);const hr=pr.exports;const fr={components:{ReportHeader:xt,AnalyticsChart:G},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{chartData:null}},computed:{chartOptions(){return new Q().table()}},mounted(){this.chartData=Y(this.reportResponse.data.chart,this.localeDefinition)}};var vr=function(){var t=this,n=t._self._c;return n("div",[n("report-header",{attrs:{"report-response":t.reportResponse}}),n("div",{staticClass:"da-mt-4"},[n("div",[t.chartData?[n("analytics-chart",{staticClass:"table-report",attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])],1)},_r=[],gr=T(fr,vr,_r,!1,null,null,null,null);const mr=gr.exports,yr={components:{ReportHeader:xt,AnalyticsChart:G},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},data(){return{chartData:null}},computed:{chartOptions(){return new Q().geo(this.reportResponse.data.dimensionRaw)}},mounted(){this.chartData=Y(this.reportResponse.data.chart,this.localeDefinition)}};var br=function(){var t=this,n=t._self._c;return n("div",[n("report-header",{attrs:{"report-response":t.reportResponse}}),n("div",{staticClass:"da-mt-4"},[n("div",[t.chartData?[n("analytics-chart",{attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)])],1)},Cr=[],wr=T(yr,br,Cr,!1,null,null,null,null);const Or=wr.exports,xr={components:{GeoReport:Or,TableReport:mr,PieReport:hr,CounterReport:lr,AreaReport:rr},props:{reportResponse:{type:Object,required:!0},localeDefinition:{type:Object,required:!0}},computed:{reportType(){return this.reportResponse?this.reportResponse.data.type:null}}};var Sr=function(){var t=this,n=t._self._c;return n("div",[t.reportType==="area"?[n("area-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t.reportType==="counter"?[n("counter-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t.reportType==="pie"?[n("pie-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t.reportType==="table"?[n("table-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t.reportType==="geo"?[n("geo-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]:t._e()],2)},Tr=[],Rr=T(xr,Sr,Tr,!1,null,null,null,null);const Dr=Rr.exports,Ar={components:{AnalyticsReport:Dr},data(){return{loading:!0,reportResponse:null,pluginOptions:null}},computed:{requestCriteria(){return this.pluginOptions.request},localeDefinition(){return Ot(this.pluginOptions.currencyDefinition)}},watch:{requestCriteria(){this.getReport()}},mounted(){this.getReport()},methods:{getReport(){this.requestCriteria&&(this.loading=!0,lt.getReport(this.requestCriteria).then(a=>{this.loading=!1,this.reportResponse=a}))}}};var $r=function(){var t=this,n=t._self._c;return t.requestCriteria&&t.requestCriteria.chart?n("div",[t.loading?[n("div",[t._v("Loading…")])]:[n("analytics-report",{attrs:{"report-response":t.reportResponse,"locale-definition":t.localeDefinition}})]],2):t._e()},Pr=[],Vr=T(Ar,$r,Pr,!1,null,null,null,null);const Fr=Vr.exports;var fe={exports:{}};(function(a,t){(function(n,i){a.exports=i()})(typeof self<"u"?self:ot,function(){return(()=>{var n={646:p=>{p.exports=function(v){if(Array.isArray(v)){for(var _=0,b=new Array(v.length);_<v.length;_++)b[_]=v[_];return b}}},713:p=>{p.exports=function(v,_,b){return _ in v?Object.defineProperty(v,_,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[_]=b,v}},860:p=>{p.exports=function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}},206:p=>{p.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},319:(p,v,_)=>{var b=_(646),B=_(860),I=_(206);p.exports=function(D){return b(D)||B(D)||I()}},8:p=>{function v(_){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p.exports=v=function(b){return typeof b}:p.exports=v=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},v(_)}p.exports=v}},i={};function u(p){var v=i[p];if(v!==void 0)return v.exports;var _=i[p]={exports:{}};return n[p](_,_.exports,u),_.exports}u.n=p=>{var v=p&&p.__esModule?()=>p.default:()=>p;return u.d(v,{a:v}),v},u.d=(p,v)=>{for(var _ in v)u.o(v,_)&&!u.o(p,_)&&Object.defineProperty(p,_,{enumerable:!0,get:v[_]})},u.o=(p,v)=>Object.prototype.hasOwnProperty.call(p,v),u.r=p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})};var f={};return(()=>{u.r(f),u.d(f,{VueSelect:()=>pt,default:()=>At,mixins:()=>Dt});var p=u(319),v=u.n(p),_=u(8),b=u.n(_),B=u(713),I=u.n(B);const D={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer:function(){this.autoscroll&&this.maybeAdjustScroll()},open:function(e){var l=this;this.autoscroll&&e&&this.$nextTick(function(){return l.maybeAdjustScroll()})}},methods:{maybeAdjustScroll:function(){var e,l=((e=this.$refs.dropdownMenu)===null||e===void 0?void 0:e.children[this.typeAheadPointer])||!1;if(l){var c=this.getDropdownViewport(),h=l.getBoundingClientRect(),y=h.top,O=h.bottom,M=h.height;if(y<c.top)return this.$refs.dropdownMenu.scrollTop=l.offsetTop;if(O>c.bottom)return this.$refs.dropdownMenu.scrollTop=l.offsetTop-(c.height-M)}},getDropdownViewport:function(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},k={data:function(){return{typeAheadPointer:-1}},watch:{filteredOptions:function(){for(var e=0;e<this.filteredOptions.length;e++)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},open:function(e){e&&this.typeAheadToLastSelected()},selectedValue:function(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp:function(){for(var e=this.typeAheadPointer-1;e>=0;e--)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},typeAheadDown:function(){for(var e=this.typeAheadPointer+1;e<this.filteredOptions.length;e++)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},typeAheadSelect:function(){var e=this.filteredOptions[this.typeAheadPointer];e&&this.selectable(e)&&this.select(e)},typeAheadToLastSelected:function(){var e=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1;e!==-1&&(this.typeAheadPointer=e)}}},z={props:{loading:{type:Boolean,default:!1}},data:function(){return{mutableLoading:!1}},watch:{search:function(){this.$emit("search",this.search,this.toggleLoading)},loading:function(e){this.mutableLoading=e}},methods:{toggleLoading:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.mutableLoading=e??!this.mutableLoading}}};function Z(e,l,c,h,y,O,M,tt){var P,R=typeof e=="function"?e.options:e;if(l&&(R.render=l,R.staticRenderFns=c,R._compiled=!0),h&&(R.functional=!0),O&&(R._scopeId="data-v-"+O),M?(P=function(F){(F=F||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||typeof __VUE_SSR_CONTEXT__>"u"||(F=__VUE_SSR_CONTEXT__),y&&y.call(this,F),F&&F._registeredComponents&&F._registeredComponents.add(M)},R._ssrRegister=P):y&&(P=tt?function(){y.call(this,(R.functional?this.parent:this).$root.$options.shadowRoot)}:y),P)if(R.functional){R._injectStyles=P;var et=R.render;R.render=function(F,C){return P.call(C),et(F,C)}}else{var ht=R.beforeCreate;R.beforeCreate=ht?[].concat(ht,P):[P]}return{exports:e,options:R}}const ct={Deselect:Z({},function(){var e=this.$createElement,l=this._self._c||e;return l("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"}},[l("path",{attrs:{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"}})])},[],!1,null,null,null).exports,OpenIndicator:Z({},function(){var e=this.$createElement,l=this._self._c||e;return l("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"}},[l("path",{attrs:{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"}})])},[],!1,null,null,null).exports},St={inserted:function(e,l,c){var h=c.context;if(h.appendToBody){var y=h.$refs.toggle.getBoundingClientRect(),O=y.height,M=y.top,tt=y.left,P=y.width,R=window.scrollX||window.pageXOffset,et=window.scrollY||window.pageYOffset;e.unbindPosition=h.calculatePosition(e,h,{width:P+"px",left:R+tt+"px",top:et+M+O+"px"}),document.body.appendChild(e)}},unbind:function(e,l,c){c.context.appendToBody&&(e.unbindPosition&&typeof e.unbindPosition=="function"&&e.unbindPosition(),e.parentNode&&e.parentNode.removeChild(e))}},ut=function(e){var l={};return Object.keys(e).sort().forEach(function(c){l[c]=e[c]}),JSON.stringify(l)};var Tt=0;const Rt=function(){return++Tt};function dt(e,l){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);l&&(h=h.filter(function(y){return Object.getOwnPropertyDescriptor(e,y).enumerable})),c.push.apply(c,h)}return c}function N(e){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?dt(Object(c),!0).forEach(function(h){I()(e,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):dt(Object(c)).forEach(function(h){Object.defineProperty(e,h,Object.getOwnPropertyDescriptor(c,h))})}return e}const pt=Z({components:N({},ct),directives:{appendToBody:St},mixins:[D,k,z],props:{value:{},components:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:function(e){return e}},selectable:{type:Function,default:function(e){return!0}},getOptionLabel:{type:Function,default:function(e){return b()(e)==="object"?e.hasOwnProperty(this.label)?e[this.label]:console.warn('[vue-select warn]: Label key "option.'.concat(this.label,'" does not')+" exist in options object ".concat(JSON.stringify(e),`.
`)+"https://vue-select.org/api/props.html#getoptionlabel"):e}},getOptionKey:{type:Function,default:function(e){if(b()(e)!=="object")return e;try{return e.hasOwnProperty("id")?e.id:ut(e)}catch(l){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,e,l)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default:function(e,l,c){return(l||"").toLocaleLowerCase().indexOf(c.toLocaleLowerCase())>-1}},filter:{type:Function,default:function(e,l){var c=this;return e.filter(function(h){var y=c.getOptionLabel(h);return typeof y=="number"&&(y=y.toString()),c.filterBy(h,y,l)})}},createOption:{type:Function,default:function(e){return b()(this.optionList[0])==="object"?I()({},this.label,e):e}},resetOnOptionsChange:{default:!1,validator:function(e){return["function","boolean"].includes(b()(e))}},clearSearchOnBlur:{type:Function,default:function(e){var l=e.clearSearchOnSelect,c=e.multiple;return l&&!c}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:function(){return[13]}},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:function(e,l){return e}},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default:function(e,l,c){var h=c.width,y=c.top,O=c.left;e.style.top=y,e.style.left=O,e.style.width=h}},dropdownShouldOpen:{type:Function,default:function(e){var l=e.noDrop,c=e.open,h=e.mutableLoading;return!l&&c&&!h}},uid:{type:[String,Number],default:function(){return Rt()}}},data:function(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[]}},computed:{isTrackingValues:function(){return this.value===void 0||this.$options.propsData.hasOwnProperty("reduce")},selectedValue:function(){var e=this.value;return this.isTrackingValues&&(e=this.$data._value),e!=null&&e!==""?[].concat(e):[]},optionList:function(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl:function(){return this.$scopedSlots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope:function(){var e=this,l={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:N({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":"vs".concat(this.uid,"__combobox"),"aria-controls":"vs".concat(this.uid,"__listbox"),ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":"vs".concat(this.uid,"__option-").concat(this.typeAheadPointer)}:{}),events:{compositionstart:function(){return e.isComposing=!0},compositionend:function(){return e.isComposing=!1},keydown:this.onSearchKeyDown,keypress:this.onSearchKeyPress,blur:this.onSearchBlur,focus:this.onSearchFocus,input:function(c){return e.search=c.target.value}}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:l,listFooter:l,header:N({},l,{deselect:this.deselect}),footer:N({},l,{deselect:this.deselect})}},childComponents:function(){return N({},ct,{},this.components)},stateClasses:function(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching:function(){return!!this.search},dropdownOpen:function(){return this.dropdownShouldOpen(this)},searchPlaceholder:function(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions:function(){var e=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return e;var l=this.search.length?this.filter(e,this.search,this):e;if(this.taggable&&this.search.length){var c=this.createOption(this.search);this.optionExists(c)||l.unshift(c)}return l},isValueEmpty:function(){return this.selectedValue.length===0},showClearButton:function(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options:function(e,l){var c=this;!this.taggable&&(typeof c.resetOnOptionsChange=="function"?c.resetOnOptionsChange(e,l,c.selectedValue):c.resetOnOptionsChange)&&this.clearSelection(),this.value&&this.isTrackingValues&&this.setInternalValueFromOptions(this.value)},value:{immediate:!0,handler:function(e){this.isTrackingValues&&this.setInternalValueFromOptions(e)}},multiple:function(){this.clearSelection()},open:function(e){this.$emit(e?"open":"close")},search:function(e){e.length&&(this.open=!0)}},created:function(){this.mutableLoading=this.loading,this.$on("option:created",this.pushTag)},methods:{setInternalValueFromOptions:function(e){var l=this;Array.isArray(e)?this.$data._value=e.map(function(c){return l.findOptionFromReducedValue(c)}):this.$data._value=this.findOptionFromReducedValue(e)},select:function(e){this.$emit("option:selecting",e),this.isOptionSelected(e)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(e):(this.taggable&&!this.optionExists(e)&&this.$emit("option:created",e),this.multiple&&(e=this.selectedValue.concat(e)),this.updateValue(e),this.$emit("option:selected",e)),this.onAfterSelect(e)},deselect:function(e){var l=this;this.$emit("option:deselecting",e),this.updateValue(this.selectedValue.filter(function(c){return!l.optionComparator(c,e)})),this.$emit("option:deselected",e)},clearSelection:function(){this.updateValue(this.multiple?[]:null)},onAfterSelect:function(e){var l=this;this.closeOnSelect&&(this.open=!this.open),this.clearSearchOnSelect&&(this.search=""),this.noDrop&&this.multiple&&this.$nextTick(function(){return l.$refs.search.focus()})},updateValue:function(e){var l=this;this.value===void 0&&(this.$data._value=e),e!==null&&(e=Array.isArray(e)?e.map(function(c){return l.reduce(c)}):this.reduce(e)),this.$emit("input",e)},toggleDropdown:function(e){var l=e.target!==this.searchEl;l&&e.preventDefault();var c=[].concat(v()(this.$refs.deselectButtons||[]),v()([this.$refs.clearButton]));this.searchEl===void 0||c.filter(Boolean).some(function(h){return h.contains(e.target)||h===e.target})?e.preventDefault():this.open&&l?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected:function(e){var l=this;return this.selectedValue.some(function(c){return l.optionComparator(c,e)})},isOptionDeselectable:function(e){return this.isOptionSelected(e)&&this.deselectFromDropdown},optionComparator:function(e,l){return this.getOptionKey(e)===this.getOptionKey(l)},findOptionFromReducedValue:function(e){var l=this,c=[].concat(v()(this.options),v()(this.pushedTags)).filter(function(h){return JSON.stringify(l.reduce(h))===JSON.stringify(e)});return c.length===1?c[0]:c.find(function(h){return l.optionComparator(h,l.$data._value)})||e},closeSearchOptions:function(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue:function(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){var e=null;this.multiple&&(e=v()(this.selectedValue.slice(0,this.selectedValue.length-1))),this.updateValue(e)}},optionExists:function(e){var l=this;return this.optionList.some(function(c){return l.optionComparator(c,e)})},normalizeOptionForSlot:function(e){return b()(e)==="object"?e:I()({},this.label,e)},pushTag:function(e){this.pushedTags.push(e)},onEscape:function(){this.search.length?this.search="":this.open=!1},onSearchBlur:function(){if(!this.mousedown||this.searching){var e=this.clearSearchOnSelect,l=this.multiple;return this.clearSearchOnBlur({clearSearchOnSelect:e,multiple:l})&&(this.search=""),void this.closeSearchOptions()}this.mousedown=!1,this.search.length!==0||this.options.length!==0||this.closeSearchOptions()},onSearchFocus:function(){this.open=!0,this.$emit("search:focus")},onMousedown:function(){this.mousedown=!0},onMouseUp:function(){this.mousedown=!1},onSearchKeyDown:function(e){var l=this,c=function(O){return O.preventDefault(),!l.isComposing&&l.typeAheadSelect()},h={8:function(O){return l.maybeDeleteValue()},9:function(O){return l.onTab()},27:function(O){return l.onEscape()},38:function(O){if(O.preventDefault(),l.open)return l.typeAheadUp();l.open=!0},40:function(O){if(O.preventDefault(),l.open)return l.typeAheadDown();l.open=!0}};this.selectOnKeyCodes.forEach(function(O){return h[O]=c});var y=this.mapKeydown(h,this);if(typeof y[e.keyCode]=="function")return y[e.keyCode](e)},onSearchKeyPress:function(e){this.open||e.keyCode!==32||(e.preventDefault(),this.open=!0)}}},function(){var e=this,l=e.$createElement,c=e._self._c||l;return c("div",{staticClass:"v-select",class:e.stateClasses,attrs:{dir:e.dir}},[e._t("header",null,null,e.scope.header),e._v(" "),c("div",{ref:"toggle",staticClass:"vs__dropdown-toggle",attrs:{id:"vs"+e.uid+"__combobox",role:"combobox","aria-expanded":e.dropdownOpen.toString(),"aria-owns":"vs"+e.uid+"__listbox","aria-label":"Search for option"},on:{mousedown:function(h){return e.toggleDropdown(h)}}},[c("div",{ref:"selectedOptions",staticClass:"vs__selected-options"},[e._l(e.selectedValue,function(h){return e._t("selected-option-container",[c("span",{key:e.getOptionKey(h),staticClass:"vs__selected"},[e._t("selected-option",[e._v(`
            `+e._s(e.getOptionLabel(h))+`
          `)],null,e.normalizeOptionForSlot(h)),e._v(" "),e.multiple?c("button",{ref:"deselectButtons",refInFor:!0,staticClass:"vs__deselect",attrs:{disabled:e.disabled,type:"button",title:"Deselect "+e.getOptionLabel(h),"aria-label":"Deselect "+e.getOptionLabel(h)},on:{click:function(y){return e.deselect(h)}}},[c(e.childComponents.Deselect,{tag:"component"})],1):e._e()],2)],{option:e.normalizeOptionForSlot(h),deselect:e.deselect,multiple:e.multiple,disabled:e.disabled})}),e._v(" "),e._t("search",[c("input",e._g(e._b({staticClass:"vs__search"},"input",e.scope.search.attributes,!1),e.scope.search.events))],null,e.scope.search)],2),e._v(" "),c("div",{ref:"actions",staticClass:"vs__actions"},[c("button",{directives:[{name:"show",rawName:"v-show",value:e.showClearButton,expression:"showClearButton"}],ref:"clearButton",staticClass:"vs__clear",attrs:{disabled:e.disabled,type:"button",title:"Clear Selected","aria-label":"Clear Selected"},on:{click:e.clearSelection}},[c(e.childComponents.Deselect,{tag:"component"})],1),e._v(" "),e._t("open-indicator",[e.noDrop?e._e():c(e.childComponents.OpenIndicator,e._b({tag:"component"},"component",e.scope.openIndicator.attributes,!1))],null,e.scope.openIndicator),e._v(" "),e._t("spinner",[c("div",{directives:[{name:"show",rawName:"v-show",value:e.mutableLoading,expression:"mutableLoading"}],staticClass:"vs__spinner"},[e._v("Loading...")])],null,e.scope.spinner)],2)]),e._v(" "),c("transition",{attrs:{name:e.transition}},[e.dropdownOpen?c("ul",{directives:[{name:"append-to-body",rawName:"v-append-to-body"}],key:"vs"+e.uid+"__listbox",ref:"dropdownMenu",staticClass:"vs__dropdown-menu",attrs:{id:"vs"+e.uid+"__listbox",role:"listbox",tabindex:"-1"},on:{mousedown:function(h){return h.preventDefault(),e.onMousedown(h)},mouseup:e.onMouseUp}},[e._t("list-header",null,null,e.scope.listHeader),e._v(" "),e._l(e.filteredOptions,function(h,y){return c("li",{key:e.getOptionKey(h),staticClass:"vs__dropdown-option",class:{"vs__dropdown-option--deselect":e.isOptionDeselectable(h)&&y===e.typeAheadPointer,"vs__dropdown-option--selected":e.isOptionSelected(h),"vs__dropdown-option--highlight":y===e.typeAheadPointer,"vs__dropdown-option--disabled":!e.selectable(h)},attrs:{id:"vs"+e.uid+"__option-"+y,role:"option","aria-selected":y===e.typeAheadPointer||null},on:{mouseover:function(O){e.selectable(h)&&(e.typeAheadPointer=y)},click:function(O){O.preventDefault(),O.stopPropagation(),e.selectable(h)&&e.select(h)}}},[e._t("option",[e._v(`
          `+e._s(e.getOptionLabel(h))+`
        `)],null,e.normalizeOptionForSlot(h))],2)}),e._v(" "),e.filteredOptions.length===0?c("li",{staticClass:"vs__no-options"},[e._t("no-options",[e._v(`
          Sorry, no matching options.
        `)],null,e.scope.noOptions)],2):e._e(),e._v(" "),e._t("list-footer",null,null,e.scope.listFooter)],2):c("ul",{staticStyle:{display:"none",visibility:"hidden"},attrs:{id:"vs"+e.uid+"__listbox",role:"listbox"}})]),e._v(" "),e._t("footer",null,null,e.scope.footer)],2)},[],!1,null,null,null).exports,Dt={ajax:z,pointer:k,pointerScroll:D},At=pt})(),f})()})})(fe);var Ir=fe.exports;const jr=he(Ir);const Er={};var Mr=function(){var t=this,n=t._self._c;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",fill:"currentColor"}},[n("path",{attrs:{d:"M304 240V.6c5.3-.4 10.6-.6 16-.6C443.7 0 544 100.3 544 224c0 5.4-.2 10.7-.6 16H304zM32 272C32 144.8 130.9 40.8 256 32.5V288L425 457c-41.5 34.4-94.8 55-153 55C139.5 512 32 404.6 32 272zm288 16H575.5C571 355.9 538.3 416.1 489 457L320 288z"}})])},Lr=[],Br=T(Er,Mr,Lr,!1,null,null,null,null);const kr=Br.exports,zr={};var Nr=function(){var t=this,n=t._self._c;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor"}},[n("path",{attrs:{d:"M55.7 199.7L96 240h48l48 48v64l32 32v64h64V400l64-64V256H224l-32-32V192h80V160l-32-32V112l32-32V48.6c-5.3-.4-10.6-.6-16-.6C160.6 48 80.3 112.2 55.7 199.7zM464 256c0-36.9-9.6-71.5-26.4-101.6L400 192v80h63.4c.4-5.3 .6-10.6 .6-16zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"}})])},Ur=[],Hr=T(zr,Nr,Ur,!1,null,null,null,null);const qr=Hr.exports,Gr={};var Kr=function(){var t=this,n=t._self._c;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor"}},[n("path",{attrs:{d:"M48 264V160H232V264H48zm0 48H232V432H64c-8.8 0-16-7.2-16-16V312zM280 432V312H464V416c0 8.8-7.2 16-16 16H280zM464 264H280V160H464V264zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"}})])},Wr=[],Xr=T(Gr,Kr,Wr,!1,null,null,null,null);const Jr=Xr.exports,Yr={};var Qr=function(){var t=this,n=t._self._c;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor"}},[n("path",{attrs:{d:"M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zm191.6 33.2c-12.6-4.2-26.2 2.6-30.4 15.2l-48 144c-2.4 7.3-1.2 15.4 3.3 21.6s11.8 10 19.5 10H240v40c0 13.3 10.7 24 24 24s24-10.7 24-24V320h8c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v56H169.3l37.5-112.4c4.2-12.6-2.6-26.2-15.2-30.4z"}})])},Zr=[],ta=T(Yr,Qr,Zr,!1,null,null,null,null);const ea=ta.exports,na={};var ra=function(){var t=this,n=t._self._c;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor"}},[n("path",{attrs:{d:"M64 64V32H0V64 448v32H32 480h32V416H480 64V64zm64 288H480V240L384 128l-64 64L240 96 128 224V352z"}})])},aa=[],sa=T(na,ra,aa,!1,null,null,null,null);const ia=sa.exports,oa={components:{ChartArea:ia,NumberIcon:ea,TableIcon:Jr,EarthIcon:qr,ChartPieIcon:kr,VSelect:jr},data(){return{loading:!1,pluginSettings:null,chartTypeOptions:[{label:"Area",value:"area"},{label:"Counter",value:"counter"},{label:"Pie",value:"pie"},{label:"Table",value:"table"},{label:"Geo",value:"geo"}],periodOptions:[{label:"Week",value:"week"},{label:"Month",value:"month"},{label:"Year",value:"year"}],vSelectedMetric:null,selectedDimension:null,sourceId:null,chart:null,period:null,dimension:null,metric:null,dimensions:[],metrics:[]}},computed:{viewOptions(){return this.sources.map(a=>({label:a.name,value:a.id}))},metricCategories(){return this.metrics.map(a=>a.category).filter((a,t,n)=>n.indexOf(a)===t)},dimensionCategories(){return this._dimensions.map(a=>a.category).filter((a,t,n)=>n.indexOf(a)===t)},metricOptions(){let a=[];return this.metricCategories.forEach(t=>{a.push({optgroup:t}),this.metrics.filter(n=>n.category===t).forEach(n=>{a.push({label:n.name,value:n.apiName})})}),a},_dimensions(){const a=["country","continent"];return this.dimensions.filter(t=>this.chart!=="geo"||a.find(n=>n===t.apiName)).map(t=>{if(this.chart==="geo")switch(t.apiName){case"continent":return{...t,apiName:"continentId"}}return t})},dimensionOptions(){let a=[];return this.dimensionCategories.forEach(t=>{a.push({optgroup:t}),this._dimensions.filter(n=>n.category===t).forEach(n=>{a.push({label:n.name,value:n.apiName})})}),a},chartSupportsDimensions(){return this.chart==="pie"||this.chart==="table"||this.chart==="geo"},metricSelectOptions(){return this.parseOptionsForVueSelect(this.metricOptions)},dimensionSelectOptions(){return this.parseOptionsForVueSelect(this.dimensionOptions)},sources(){return this.pluginSettings.sources},selectOptions(){return this.pluginSettings.selectOptions},inputName(){return a=>{if(!a)return null;const t=this.pluginSettings.namespace;return Craft.namespaceInputName(a,t)}}},mounted(){this.sourceId=this.pluginSettings.settings.sourceId??this.viewOptions[0].value??null,this.chart=this.pluginSettings.settings.chart??this.chartTypeOptions[0].value,this.period=this.pluginSettings.settings.period??this.periodOptions[0].value,this.namespace=this.pluginSettings.namespace,this.onViewChange()},methods:{onViewChange(){this.refreshDimensionsAndMetrics()},refreshDimensionsAndMetrics(){this.loading=!0,lt.getDimensionsMetrics(this.sourceId).then(a=>{this.dimensions=a.data.dimensions,this.metrics=a.data.metrics,this.initMetric(),this.initDimension()}).finally(()=>{this.loading=!1})},initMetric(){var t,n;const a=this.pluginSettings.settings.options;(t=a==null?void 0:a[this.chart])!=null&&t.metric&&this.metricSelectOptions.find(i=>i.value===a[this.chart].metric)?this.metric=a[this.chart].metric:Object.values(a).length>0&&Object.values(a)[0].metric&&this.metricSelectOptions.find(i=>i.value===Object.values(a)[0].metric)?this.metric=Object.values(a)[0].metric:this.metric=(n=this.metricSelectOptions.find(i=>i.value!==void 0))==null?void 0:n.value},initDimension(){var t,n;const a=this.pluginSettings.settings.options;(t=a==null?void 0:a[this.chart])!=null&&t.dimension&&this.dimensionSelectOptions.find(i=>i.value===a[this.chart].dimension)?this.dimension=a[this.chart].dimension:Object.values(a).length>0&&Object.values(a)[0].dimension&&this.dimensionSelectOptions.find(i=>i.value===Object.values(a)[0].dimension)?this.dimension=Object.values(a)[0].dimension:this.dimension=(n=this.dimensionSelectOptions.find(i=>i.value!==void 0))==null?void 0:n.value},onChartChange(){this.initMetric(),this.initDimension()},parseOptionsForVueSelect(a){if(!a)return[];const t=[];for(let n=0;n<a.length;n++){const i=a[n];i.optgroup?t.push({optgroup:!0,label:i.optgroup}):t.push({label:i.label,value:i.value})}return t}}};var la=function(){var t=this,n=t._self._c;return n("div",[n("div",{staticClass:"field"},[t._m(0),n("div",{staticClass:"input"},[n("div",{staticClass:"da-flex da-items-center da-gap-3"},[n("div",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.sourceId,expression:"sourceId"}],attrs:{name:t.inputName("sourceId")},on:{change:[function(i){var u=Array.prototype.filter.call(i.target.options,function(f){return f.selected}).map(function(f){var p="_value"in f?f._value:f.value;return p});t.sourceId=i.target.multiple?u:u[0]},function(i){return t.onViewChange()}]}},[t._l(t.viewOptions,function(i,u){return[n("option",{key:u,domProps:{value:i.value}},[t._v(" "+t._s(i.label)+" ")])]})],2)]),n("div",{staticClass:"spinner",class:{"da-invisible":!t.loading}})])])]),n("div",{staticClass:"field"},[t._m(1),n("div",{staticClass:"input"},[n("div",{staticClass:"chart-picker"},[n("div",{staticClass:"da-inline-block"},[n("ul",{staticClass:"chart-types da-flex da-border da-border-gray-300/70 da-bg-white da-rounded-md"},[t._l(t.chartTypeOptions,function(i,u){return[n("li",{key:u,staticClass:"da-relative"},[n("label",[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.chart,expression:"chart"}],staticClass:"da-peer da-sr-only",attrs:{name:t.inputName("chart"),type:"radio"},domProps:{value:i.value,checked:t._q(t.chart,i.value)},on:{change:[function(f){t.chart=i.value},t.onChartChange]}}),n("div",{staticClass:"da-text-gray-700 peer-checked:da-text-black da-px-4 da-py-3 da-cursor-pointer peer-focus-visible:da-ring-2 peer-focus-visible:da-z-50 peer-focus-visible:da-border-transparent da-relative",class:{"da-bg-white hover:da-bg-gray-100/50":i.value!==t.chart,"da-bg-gray-100":i.value===t.chart,"da-rounded-l-md":u===0,"da-rounded-r-md":u===t.chartTypeOptions.length-1,"da-border-r":u!==t.chartTypeOptions.length-1},attrs:{title:i.label}},[i.value==="area"?[n("ChartArea",{staticClass:"da-w-4 da-h-4"})]:i.value==="counter"?[n("NumberIcon",{staticClass:"da-w-4 da-h-4"})]:i.value==="pie"?[n("ChartPieIcon",{staticClass:"da-w-4 da-h-4"})]:i.value==="table"?[n("TableIcon",{staticClass:"da-w-4 da-h-4"})]:i.value==="geo"?[n("EarthIcon",{staticClass:"da-w-4 da-h-4"})]:t._e()],2)])])])]})],2)])])])]),n("div",{staticClass:"field"},[t._m(2),n("div",{staticClass:"input"},[n("div",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.period,expression:"period"}],attrs:{name:t.inputName("period")},on:{change:function(i){var u=Array.prototype.filter.call(i.target.options,function(f){return f.selected}).map(function(f){var p="_value"in f?f._value:f.value;return p});t.period=i.target.multiple?u:u[0]}}},[t._l(t.periodOptions,function(i,u){return[n("option",{key:u,domProps:{value:i.value}},[t._v(" "+t._s(i.label)+" ")])]})],2)])])]),t.chartSupportsDimensions?[n("div",{staticClass:"field"},[t._m(3),n("div",[n("v-select",{attrs:{options:t.dimensionSelectOptions,selectable:i=>!i.optgroup,reduce:i=>i.value},scopedSlots:t._u([{key:"option",fn:function(i){return[i.optgroup?[t._v(" ——— "+t._s(i.label)+" ——— ")]:[t._v(" "+t._s(i.label)+" ")]]}}],null,!1,3128001412),model:{value:t.dimension,callback:function(i){t.dimension=i},expression:"dimension"}}),n("input",{attrs:{type:"hidden",name:t.inputName("options["+t.chart+"][dimension]")},domProps:{value:t.dimension}})],1)])]:t._e(),n("div",{staticClass:"field"},[t._m(4),n("div",[n("v-select",{attrs:{options:t.metricSelectOptions,selectable:i=>!i.optgroup,reduce:i=>i.value},scopedSlots:t._u([{key:"option",fn:function(i){return[i.optgroup?[t._v(" ——— "+t._s(i.label)+" ——— ")]:[t._v(" "+t._s(i.label)+" ")]]}}]),model:{value:t.metric,callback:function(i){t.metric=i},expression:"metric"}}),n("input",{attrs:{type:"hidden",name:t.inputName("options["+t.chart+"][metric]")},domProps:{value:t.metric}})],1)])],2)},ca=[function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("Source")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("Chart Type")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("Period")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("Dimension")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"heading"},[t("label",[a._v("Metric")])])}],ua=T(oa,la,ca,!1,null,null,null,null);const da=ua.exports,pa={components:{AnalyticsChart:G},data(){return{refreshInterval:60,pluginOptions:null,reportResponse:null,activeUsers:0,activePages:null,pageviews:null,chartData:null}},computed:{chartOptions(){return{height:150,theme:"maximized",bar:{groupWidth:"90%"},legend:{position:"bottom"},hAxis:{direction:-1,baselineColor:"transparent",gridlineColor:"transparent",textPosition:"none",gridlines:{count:0}},vAxis:{baselineColor:"#fff",gridlineColor:"#fff",textPosition:"none",gridlines:{count:0}}}}},mounted(){this.refreshInterval=this.pluginOptions.refreshInterval,this.getReport()},methods:{getReport(){this.loading=!0,lt.getRealtimeReport({sourceId:this.pluginOptions.source.id}).then(a=>{this.loading=!1,this.reportResponse=a,this.activeUsers=this.reportResponse.data.activeUsers,this.activePages=this.reportResponse.data.activePages,this.parsePageviews(this.reportResponse),setTimeout(this.getReport,this.refreshInterval*1e3)})},parsePageviews(a){this.pageviews=a.data.pageviews,this.chartData=this.getPageviewsDataTable(this.pageviews)},getPageviewsDataTable(a){let t=new google.visualization.DataTable;if(t.addColumn("number",Craft.t("analytics","Minutes ago")),t.addColumn("number",Craft.t("analytics","Active Users")),a.rows)for(let n=30;n>=0;n--){let i=0;a.rows.forEach(f=>{var p=parseInt(f[0]);p===n&&(i=parseInt(f[1]))});let u=Craft.t("analytics","{count} minutes ago",{count:n});n===1&&(u=Craft.t("analytics","{count} minute ago",{count:n})),t.addRow([{v:n,f:u},i])}return t}}};var ha=function(){var t=this,n=t._self._c;return n("div",[n("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(t.pluginOptions.source.name)+" ")]),n("div",{staticClass:"da-mt-2 da-text-6xl"},[t._v(" "+t._s(t.activeUsers)+" ")]),n("div",{staticClass:"da-mt-6"},[n("h3",[t._v(" Active users per minute ")]),n("div",[t.chartData?[n("analytics-chart",{attrs:{"chart-type":"column","chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()],2)]),n("div",{staticClass:"active-pages da-mt-6"},[n("h3",[t._v(" Active pages ")]),t.activePages?[n("table",{staticClass:"data fullwidth"},[t._m(0),n("tbody",t._l(t.activePages.rows,function(i,u){return n("tr",{key:u},[n("td",{staticClass:"col-page"},[t._v(" "+t._s(i[0])+" ")]),n("td",{staticClass:"col-users"},[t._v(" "+t._s(i[1])+" ")])])}),0)])]:t._e()],2)])},fa=[function(){var a=this,t=a._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-page"},[a._v(" Page ")]),t("th",{staticClass:"col-users"},[a._v(" Users ")])])])}],va=T(pa,ha,fa,!1,null,null,null,null);const _a=va.exports,ga={components:{AnalyticsChart:G},data(){return{loading:!1,pluginOptions:null,reportType:null,chartData:null,reportResponse:null,metricOptions:[{label:"Screen Page Views",value:"screenPageViews"},{label:"Sessions",value:"sessions"},{label:"Bounce Rate",value:"bounceRate"},{label:"Average Session Duration",value:"averageSessionDuration"}],metric:"screenPageViews"}},computed:{elementId(){return this.pluginOptions.element.id},siteId(){return this.pluginOptions.element.siteId},chartOptions(){return new Q().field()},localeDefinition(){return Ot(this.pluginOptions.currencyDefinition)}},mounted(){this.getElementReport()},methods:{getElementReport(){this.loading=!0,lt.getElementReport({elementId:this.elementId,siteId:this.siteId,metric:this.metric}).then(a=>{this.loading=!1,this.reportResponse=a,this.reportType=a.data.type;const t=Y(this.reportResponse.data.chart,this.localeDefinition);this.chartData=this.formatDataTable(t)})},generateTicks(){var a=[];for(let p=0;p<this.reportResponse.data.chart.rows.length;p++){var t=this.reportResponse.data.chart.rows[p][0],n=t.substr(0,4),i=t.substr(4,2)-1,u=t.substr(6,2),f=new Date(n,i,u);a.push(f)}return a},formatDataTable(a){if(this.reportResponse.data.period==="year"){var t=new google.visualization.DateFormat({pattern:"MMMM yyyy"});t.format(a,0)}return a}}};var ma=function(){var t=this,n=t._self._c;return n("div",{staticClass:"da-mt-2"},[n("div",{staticClass:"da-flex da-items-center"},[n("div",[n("div",{staticClass:"field"},[n("div",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.metric,expression:"metric"}],on:{change:[function(i){var u=Array.prototype.filter.call(i.target.options,function(f){return f.selected}).map(function(f){var p="_value"in f?f._value:f.value;return p});t.metric=i.target.multiple?u:u[0]},function(i){return t.getElementReport()}]}},[t._l(t.metricOptions,function(i,u){return[n("option",{key:u,domProps:{value:i.value}},[t._v(" "+t._s(i.label)+" ")])]})],2)])])]),n("div",{staticClass:"da-flex-1 da-ml-4 da-text-right"},[t._v(" "+t._s(t.pluginOptions.element.url)+" ")])]),t.loading?[n("div",{staticClass:"da-mt-4"},[t._v(" Loading… ")])]:[t.reportResponse?[n("analytics-chart",{staticClass:"da-mt-4",attrs:{"chart-type":t.reportResponse.data.type,"chart-data":t.chartData,"chart-options":t.chartOptions}})]:t._e()]],2)},ya=[],ba=T(ga,ma,ya,!1,null,null,null,null);const Ca=ba.exports,wa=window.axios,Oa={getAccountExplorerData(){return wa.get(Craft.getActionUrl("analytics/sources/get-account-explorer-data"),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}})}},xa={data(){return{loading:!1,accountExplorerData:null,selectedSourceType:null,selectedAccount:null,selectedProperty:null,selectedView:null,selectedCurrency:null,pluginOptions:null}},computed:{accounts(){return this.accountExplorerData?this.accountExplorerData.accounts:[]},properties(){return this.accountExplorerData?this.selectedAccount?this.accountExplorerData.properties.filter(a=>a.accountId===this.selectedAccount):[]:[]}},mounted(){this.loading=!0,Oa.getAccountExplorerData().then(a=>{this.loading=!1,this.accountExplorerData=a.data}),this.selectedAccount=this.pluginOptions.source.gaAccountId,this.selectedProperty=this.pluginOptions.source.gaPropertyId},methods:{selectGA4Property(a){this.selectedSourceType="GA4",this.selectedProperty=a.id,this.selectedView=null,this.setFormData()},setFormData(){document.getElementById("accountExplorerType").value=this.selectedSourceType,document.getElementById("accountExplorerAccount").value=this.selectedAccount,document.getElementById("accountExplorerProperty").value=this.selectedProperty,this.selectedSourceType==="UA"?document.getElementById("accountExplorerView").value=this.selectedView:document.getElementById("accountExplorerView").value="",document.getElementById("accountExplorerCurrency").value=""}}};var Sa=function(){var t=this,n=t._self._c;return n("div",[t.loading?[n("div",[t._v(" Loading Google Analytics accounts… ")])]:[n("div",{staticClass:"da-flex da-border da-rounded-md"},[n("div",{staticClass:"da-flex-1 da-border-r"},[n("div",{staticClass:"da-border-b da-font-medium da-text-gray-500 da-px-6 da-py-3"},[t._v(" Analytics Accounts ")]),n("div",{staticClass:"da-max-h-[22rem] da-overflow-auto"},[n("ul",[t._l(t.accounts,function(i,u){return[n("li",{key:u},[n("button",{staticClass:"da-px-6 da-py-3 da-block da-w-full da-text-left da-flex da-justify-between da-items-center",class:{"da-bg-gray-100":t.selectedAccount===i.id,"hover:da-bg-gray-100/50":t.selectedAccount!==i.id},on:{click:function(f){f.preventDefault(),t.selectedAccount=i.id}}},[n("div",[n("div",[t._v(" "+t._s(i.name)+" ")]),n("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(i.id)+" ")])]),n("svg",{staticClass:"da-h-4 da-w-4 da-text-gray-700",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"}})])])])]})],2)])]),n("div",{staticClass:"da-flex-1 da-border-r"},[n("div",{staticClass:"da-border-b da-font-medium da-text-gray-500 da-px-6 da-py-3"},[t._v(" Properties & Apps ")]),n("div",{staticClass:"da-max-h-[22rem] da-overflow-auto"},[n("ul",[t._l(t.properties,function(i,u){return[n("li",{key:u},[i.type==="UA"?[n("button",{staticClass:"da-px-6 da-py-3 da-block da-w-full da-text-left",class:{"da-bg-gray-100":t.selectedProperty===i.id,"hover:da-bg-gray-100/50":t.selectedProperty!==i.id},on:{click:function(f){f.preventDefault(),t.selectedProperty=i.id}}},[t._v(" "+t._s(i.name)+" "),n("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(i.id)+" ")])])]:[n("div",{staticClass:"da-px-6 da-py-3 da-flex da-justify-between",class:{"da-bg-gray-100":t.selectedProperty===i.id}},[n("div",[t._v(" "+t._s(i.name)+" "),n("div",{staticClass:"da-text-gray-500"},[t._v(" "+t._s(i.id)+" ")])]),n("div",[n("button",{staticClass:"da-bg-blue-600 da-text-white da-font-medium da-rounded-md da-px-2 da-py-1 da-ml-2",class:{"da-opacity-50":t.selectedProperty===i.id},attrs:{disabled:t.selectedProperty===i.id},on:{click:function(f){return f.preventDefault(),t.selectGA4Property(i)}}},[t._v(" Select GA4 property ")])])])]],2)]})],2)])])])]],2)},Ta=[],Ra=T(xa,Sa,Ta,!1,null,null,null,null);const Da=Ra.exports,Aa={computed:{formats(){return Craft.charts.BaseChart.defaults.formats},localeDefinition(){return Ot(window.AnalyticsCurrencyDefinition)},jsData(){return[{type:"string",value:"Hello world!"},{type:"percent",value:36.7869},{type:"integer",value:367869},{type:"time",value:3200},{type:"time",value:36786},{type:"currency",value:36786},{type:"float",value:36.7869},{type:"date",value:"201601"},{type:"date",value:"20160203"}]},d3Data(){return[{label:"percentFormat",value:19.345,valueModifier:function(a){return a/100},format:this.formats.percentFormat},{label:"currencyFormat",value:19.34,format:this.formats.currencyFormat},{label:"currencyFormat",value:190234534e-2,format:this.formats.currencyFormat},{label:"decimalFormat",value:19023453412344e-7,format:this.formats.numberFormat}]}},methods:{formatByType(a,t){return L(this.localeDefinition,a,t)},d3FormatByFormat(a,t,n){var i=d3.formatLocale(this.localeDefinition);return typeof t.valueModifier<"u"&&(n=t.valueModifier(n)),i.format(a)(n)}}};var $a=function(){var t=this,n=t._self._c;return n("div",[n("h2",[t._v("JS Formatting")]),n("table",{staticClass:"data fullwidth formatting-tests",attrs:{id:"formatByType"}},[t._m(0),n("tbody",[t._l(t.jsData,function(i,u){return[n("tr",{key:u},[n("td",[t._v(t._s(i.type))]),n("td",[t._v(t._s(i.value))]),n("td",[t._v(t._s(t.formatByType(i.type,i.value)))])])]})],2)]),n("h2",[t._v("D3 Number Formatting")]),n("table",{staticClass:"data fullwidth formatting-tests",attrs:{id:"d3NumberFormatting"}},[t._m(1),n("tbody",[t._l(t.d3Data,function(i,u){return[n("tr",{key:u},[n("td",[t._v(t._s(i.label))]),n("td",[t._v(t._s(i.format))]),n("td",[t._v(t._s(i.value))]),n("td",[t._v(t._s(t.d3FormatByFormat(i.format,i,i.value)))])])]})],2)])])},Pa=[function(){var a=this,t=a._self._c;return t("thead",[t("tr",[t("th",[a._v("Type")]),t("th",[a._v("Value")]),t("th",[a._v("Ouput")])])])},function(){var a=this,t=a._self._c;return t("thead",[t("tr",[t("th",[a._v("Label")]),t("th",[a._v("Format")]),t("th",[a._v("Value")]),t("th",[a._v("Formatted Value")])])])}],Va=T(Aa,$a,Pa,!1,null,null,null,null);const Fa=Va.exports,K=window.Vue;window.AnalyticsVueEcommerceWidget=K.extend(Wn);window.AnalyticsVueReportWidget=K.extend(Fr);window.AnalyticsVueReportWidgetSettings=K.extend(da);window.AnalyticsVueRealtimeWidget=K.extend(_a);window.AnalyticsVueReportField=K.extend(Ca);window.AnalyticsVueSettings=K.extend(Da);window.AnalyticsVueTestsFormatting=K.extend(Fa);
//# sourceMappingURL=main-1cab625e.js.map

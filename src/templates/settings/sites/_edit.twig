{% extends "_layouts/cp" %}

{% set fullPageForm = true %}

{% import "_includes/forms" as forms %}

{% set crumbs = [
    { label: "Settings"|t('analytics'), url: url('settings') },
    { label: "Plugins"|t('analytics'), url: url('settings/plugins') },
    { label: "Analytics"|t('analytics'), url: url('analytics/settings') },
    { label: "Sites"|t('analytics'), url: url('analytics/settings/sites') }
] %}

{% set title = site.name %}

{% set content %}

    <input type="hidden" name="action" value="analytics/settings/save-site">
    <input type="hidden" name="siteId" value="{{ site.id }}">

    {{ redirectInput('analytics/settings/sites') }}

    {% set sourceOptions = [{ label: "None", value: "" }] %}
    {% for source in sources %}
        {% set sourceOptions = sourceOptions|merge([{ label: source.name, value: source.id }]) %}
    {% endfor %}

    {{ forms.selectField({
        first: true,
        label: "View",
        instructions: "Select the source this site should be attached to."|t('analytics'),
        name: 'sourceId',
        options: sourceOptions,
        value: (siteSource.sourceId is defined ? siteSource.sourceId : '')
    }) }}

{% endset %}
